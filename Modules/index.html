<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Personal fork of Go Programming Language Wiki"><link href=https://zchee.github.io/golang-wiki/Modules/ rel=canonical><link href=../Mobile/ rel=prev><link href=../MutexOrChannel/ rel=next><link rel=icon href=../assets/images/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.21+insiders-4.53.17"><title>Go Modules - Go Programming Language Wiki</title><link rel=stylesheet href=../assets/stylesheets/main.7d528353.min.css><link rel=stylesheet href=../assets/stylesheets/palette.ab4e12ef.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=https://github.com/facelessuser/pymdown-extensions/raw/main/docs/theme/assets/pymdownx-extras/extra-2d3bedca0e.css><script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=blue data-md-color-accent=light-blue> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#recent-changes class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=.. title="Go Programming Language Wiki" class="md-header__button md-logo" aria-label="Go Programming Language Wiki" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Go Programming Language Wiki </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Go Modules </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/zchee/golang-wiki title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> zchee/golang-wiki </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--integrated" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=.. title="Go Programming Language Wiki" class="md-nav__button md-logo" aria-label="Go Programming Language Wiki" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> Go Programming Language Wiki </label> <div class=md-nav__source> <a href=https://github.com/zchee/golang-wiki title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> zchee/golang-wiki </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Home/ class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class=md-nav__item> <a href=../AI/ class=md-nav__link> <span class=md-ellipsis> AI </span> </a> </li> <li class=md-nav__item> <a href=../Articles/ class=md-nav__link> <span class=md-ellipsis> Articles </span> </a> </li> <li class=md-nav__item> <a href=../AssemblyPolicy/ class=md-nav__link> <span class=md-ellipsis> AssemblyPolicy </span> </a> </li> <li class=md-nav__item> <a href=../AVX512/ class=md-nav__link> <span class=md-ellipsis> AVX512 </span> </a> </li> <li class=md-nav__item> <a href=../Benchmarks/ class=md-nav__link> <span class=md-ellipsis> Benchmarks </span> </a> </li> <li class=md-nav__item> <a href=../Blogs/ class=md-nav__link> <span class=md-ellipsis> Blogs </span> </a> </li> <li class=md-nav__item> <a href=../Books/ class=md-nav__link> <span class=md-ellipsis> Books </span> </a> </li> <li class=md-nav__item> <a href=../BoundingResourceUse/ class=md-nav__link> <span class=md-ellipsis> BoundingResourceUse </span> </a> </li> <li class=md-nav__item> <a href=../cgo/ class=md-nav__link> <span class=md-ellipsis> cgo </span> </a> </li> <li class=md-nav__item> <a href=../ChromeOS/ class=md-nav__link> <span class=md-ellipsis> ChromeOS </span> </a> </li> <li class=md-nav__item> <a href=../CodeReview/ class=md-nav__link> <span class=md-ellipsis> CodeReview </span> </a> </li> <li class=md-nav__item> <a href=../CodeReviewComments/ class=md-nav__link> <span class=md-ellipsis> CodeReviewComments </span> </a> </li> <li class=md-nav__item> <a href=../CodeReviewConcurrency/ class=md-nav__link> <span class=md-ellipsis> CodeReviewConcurrency </span> </a> </li> <li class=md-nav__item> <a href=../CodeTools/ class=md-nav__link> <span class=md-ellipsis> CodeTools </span> </a> </li> <li class=md-nav__item> <a href=../Comments/ class=md-nav__link> <span class=md-ellipsis> Comments </span> </a> </li> <li class=md-nav__item> <a href=../CommitMessage/ class=md-nav__link> <span class=md-ellipsis> CommitMessage </span> </a> </li> <li class=md-nav__item> <a href=../CommonMistakes/ class=md-nav__link> <span class=md-ellipsis> CommonMistakes </span> </a> </li> <li class=md-nav__item> <a href=../CompilerOptimizations/ class=md-nav__link> <span class=md-ellipsis> CompilerOptimizations </span> </a> </li> <li class=md-nav__item> <a href=../Conferences/ class=md-nav__link> <span class=md-ellipsis> Conferences </span> </a> </li> <li class=md-nav__item> <a href=../Configuring-GoLand-for-WebAssembly/ class=md-nav__link> <span class=md-ellipsis> Configuring GoLand for WebAssembly </span> </a> </li> <li class=md-nav__item> <a href=../Contributing-to-gopls/ class=md-nav__link> <span class=md-ellipsis> Contributing to gopls </span> </a> </li> <li class=md-nav__item> <a href=../Contributing/ class=md-nav__link> <span class=md-ellipsis> Contributing </span> </a> </li> <li class=md-nav__item> <a href=../CoreDumpDebugging/ class=md-nav__link> <span class=md-ellipsis> CoreDumpDebugging </span> </a> </li> <li class=md-nav__item> <a href=../Courses/ class=md-nav__link> <span class=md-ellipsis> Courses </span> </a> </li> <li class=md-nav__item> <a href=../CreatingSubRepository/ class=md-nav__link> <span class=md-ellipsis> CreatingSubRepository </span> </a> </li> <li class=md-nav__item> <a href=../CSSStyleGuide/ class=md-nav__link> <span class=md-ellipsis> CSSStyleGuide </span> </a> </li> <li class=md-nav__item> <a href=../CustomPprofProfiles/ class=md-nav__link> <span class=md-ellipsis> CustomPprofProfiles </span> </a> </li> <li class=md-nav__item> <a href=../Darwin/ class=md-nav__link> <span class=md-ellipsis> Darwin </span> </a> </li> <li class=md-nav__item> <a href=../DashboardBuilders/ class=md-nav__link> <span class=md-ellipsis> DashboardBuilders </span> </a> </li> <li class=md-nav__item> <a href=../Deprecated/ class=md-nav__link> <span class=md-ellipsis> Deprecated </span> </a> </li> <li class=md-nav__item> <a href=../DesignDocuments/ class=md-nav__link> <span class=md-ellipsis> DesignDocuments </span> </a> </li> <li class=md-nav__item> <a href=../Diagnostics/ class=md-nav__link> <span class=md-ellipsis> Diagnostics </span> </a> </li> <li class=md-nav__item> <a href=../Download-build-farm-failed-logs-and-debugging/ class=md-nav__link> <span class=md-ellipsis> Download build farm failed logs and debugging </span> </a> </li> <li class=md-nav__item> <a href=../DragonFly-BSD/ class=md-nav__link> <span class=md-ellipsis> DragonFly BSD </span> </a> </li> <li class=md-nav__item> <a href=../Errors/ class=md-nav__link> <span class=md-ellipsis> Errors </span> </a> </li> <li class=md-nav__item> <a href=../ErrorValueFAQ/ class=md-nav__link> <span class=md-ellipsis> ErrorValueFAQ </span> </a> </li> <li class=md-nav__item> <a href=../ExperienceReports/ class=md-nav__link> <span class=md-ellipsis> ExperienceReports </span> </a> </li> <li class=md-nav__item> <a href=../FileTreeDocumentation/ class=md-nav__link> <span class=md-ellipsis> FileTreeDocumentation </span> </a> </li> <li class=md-nav__item> <a href=../FreeBSD/ class=md-nav__link> <span class=md-ellipsis> FreeBSD </span> </a> </li> <li class=md-nav__item> <a href=../FromXToGo/ class=md-nav__link> <span class=md-ellipsis> FromXToGo </span> </a> </li> <li class=md-nav__item> <a href=../Frozen/ class=md-nav__link> <span class=md-ellipsis> Frozen </span> </a> </li> <li class=md-nav__item> <a href=../Fuzzing-trophy-case/ class=md-nav__link> <span class=md-ellipsis> Fuzzing trophy case </span> </a> </li> <li class=md-nav__item> <a href=../Gardening/ class=md-nav__link> <span class=md-ellipsis> Gardening </span> </a> </li> <li class=md-nav__item> <a href=../GccgoCrossCompilation/ class=md-nav__link> <span class=md-ellipsis> GccgoCrossCompilation </span> </a> </li> <li class=md-nav__item> <a href=../GcToolchainTricks/ class=md-nav__link> <span class=md-ellipsis> GcToolchainTricks </span> </a> </li> <li class=md-nav__item> <a href=../GerritAccess/ class=md-nav__link> <span class=md-ellipsis> GerritAccess </span> </a> </li> <li class=md-nav__item> <a href=../GerritBot/ class=md-nav__link> <span class=md-ellipsis> GerritBot </span> </a> </li> <li class=md-nav__item> <a href=../GitHubAccess/ class=md-nav__link> <span class=md-ellipsis> GitHubAccess </span> </a> </li> <li class=md-nav__item> <a href=../Go-1.10-Release-Party/ class=md-nav__link> <span class=md-ellipsis> Go 1.10 Release Party </span> </a> </li> <li class=md-nav__item> <a href=../Go-1.6-release-party/ class=md-nav__link> <span class=md-ellipsis> Go 1.6 release party </span> </a> </li> <li class=md-nav__item> <a href=../Go-1.8-Release-Party/ class=md-nav__link> <span class=md-ellipsis> Go 1.8 Release Party </span> </a> </li> <li class=md-nav__item> <a href=../Go-Community-Slides/ class=md-nav__link> <span class=md-ellipsis> Go Community Slides </span> </a> </li> <li class=md-nav__item> <a href=../Go-Release-Cycle/ class=md-nav__link> <span class=md-ellipsis> Go Release Cycle </span> </a> </li> <li class=md-nav__item> <a href=../Go123Timer/ class=md-nav__link> <span class=md-ellipsis> Go123Timer </span> </a> </li> <li class=md-nav__item> <a href=../Go2/ class=md-nav__link> <span class=md-ellipsis> Go2 </span> </a> </li> <li class=md-nav__item> <a href=../Go2ErrorHandlingFeedback/ class=md-nav__link> <span class=md-ellipsis> Go2ErrorHandlingFeedback </span> </a> </li> <li class=md-nav__item> <a href=../Go2ErrorValuesFeedback/ class=md-nav__link> <span class=md-ellipsis> Go2ErrorValuesFeedback </span> </a> </li> <li class=md-nav__item> <a href=../Go2GenericsFeedback/ class=md-nav__link> <span class=md-ellipsis> Go2GenericsFeedback </span> </a> </li> <li class=md-nav__item> <a href=../GoArm/ class=md-nav__link> <span class=md-ellipsis> GoArm </span> </a> </li> <li class=md-nav__item> <a href=../GoForCPPProgrammers/ class=md-nav__link> <span class=md-ellipsis> GoForCPPProgrammers </span> </a> </li> <li class=md-nav__item> <a href=../GoGenerateTools/ class=md-nav__link> <span class=md-ellipsis> GoGenerateTools </span> </a> </li> <li class=md-nav__item> <a href=../GoGetProxyConfig/ class=md-nav__link> <span class=md-ellipsis> GoGetProxyConfig </span> </a> </li> <li class=md-nav__item> <a href=../GoGetTools/ class=md-nav__link> <span class=md-ellipsis> GoGetTools </span> </a> </li> <li class=md-nav__item> <a href=../golang-tools/ class=md-nav__link> <span class=md-ellipsis> golang tools </span> </a> </li> <li class=md-nav__item> <a href=../GoMips/ class=md-nav__link> <span class=md-ellipsis> GoMips </span> </a> </li> <li class=md-nav__item> <a href=../Gomote/ class=md-nav__link> <span class=md-ellipsis> Gomote </span> </a> </li> <li class=md-nav__item> <a href=../GOPATH/ class=md-nav__link> <span class=md-ellipsis> GOPATH </span> </a> </li> <li class=md-nav__item> <a href=../Gopher/ class=md-nav__link> <span class=md-ellipsis> Gopher </span> </a> </li> <li class=md-nav__item> <a href=../gopherbot/ class=md-nav__link> <span class=md-ellipsis> gopherbot </span> </a> </li> <li class=md-nav__item> <a href=../gopls-integrator-FAQ/ class=md-nav__link> <span class=md-ellipsis> gopls integrator FAQ </span> </a> </li> <li class=md-nav__item> <a href=../gopls/ class=md-nav__link> <span class=md-ellipsis> gopls </span> </a> </li> <li class=md-nav__item> <a href=../GoStrings/ class=md-nav__link> <span class=md-ellipsis> GoStrings </span> </a> </li> <li class=md-nav__item> <a href=../GoTalks/ class=md-nav__link> <span class=md-ellipsis> GoTalks </span> </a> </li> <li class=md-nav__item> <a href=../GoUserGroups/ class=md-nav__link> <span class=md-ellipsis> GoUserGroups </span> </a> </li> <li class=md-nav__item> <a href=../GoUsers/ class=md-nav__link> <span class=md-ellipsis> GoUsers </span> </a> </li> <li class=md-nav__item> <a href=../HandlingIssues/ class=md-nav__link> <span class=md-ellipsis> HandlingIssues </span> </a> </li> <li class=md-nav__item> <a href=../heapdump13/ class=md-nav__link> <span class=md-ellipsis> heapdump13 </span> </a> </li> <li class=md-nav__item> <a href=../heapdump14/ class=md-nav__link> <span class=md-ellipsis> heapdump14 </span> </a> </li> <li class=md-nav__item> <a href=../heapdump15-through-heapdump17/ class=md-nav__link> <span class=md-ellipsis> heapdump15 through heapdump17 </span> </a> </li> <li class=md-nav__item> <a href=../heapdump15/ class=md-nav__link> <span class=md-ellipsis> heapdump15 </span> </a> </li> <li class=md-nav__item> <a href=../HostedContinuousIntegration/ class=md-nav__link> <span class=md-ellipsis> HostedContinuousIntegration </span> </a> </li> <li class=md-nav__item> <a href=../How-to-ask-for-help/ class=md-nav__link> <span class=md-ellipsis> How to ask for help </span> </a> </li> <li class=md-nav__item> <a href=../HowToAsk/ class=md-nav__link> <span class=md-ellipsis> HowToAsk </span> </a> </li> <li class=md-nav__item> <a href=../IDEsAndTextEditorPlugins/ class=md-nav__link> <span class=md-ellipsis> IDEsAndTextEditorPlugins </span> </a> </li> <li class=md-nav__item> <a href=../InstallFromSource/ class=md-nav__link> <span class=md-ellipsis> InstallFromSource </span> </a> </li> <li class=md-nav__item> <a href=../InstallTroubleshooting/ class=md-nav__link> <span class=md-ellipsis> InstallTroubleshooting </span> </a> </li> <li class=md-nav__item> <a href=../InterfaceSlice/ class=md-nav__link> <span class=md-ellipsis> InterfaceSlice </span> </a> </li> <li class=md-nav__item> <a href=../InvalidFlag/ class=md-nav__link> <span class=md-ellipsis> InvalidFlag </span> </a> </li> <li class=md-nav__item> <a href=../Iota/ class=md-nav__link> <span class=md-ellipsis> Iota </span> </a> </li> <li class=md-nav__item> <a href=../Learn/ class=md-nav__link> <span class=md-ellipsis> Learn </span> </a> </li> <li class=md-nav__item> <a href=../LearnConcurrency/ class=md-nav__link> <span class=md-ellipsis> LearnConcurrency </span> </a> </li> <li class=md-nav__item> <a href=../LearnErrorHandling/ class=md-nav__link> <span class=md-ellipsis> LearnErrorHandling </span> </a> </li> <li class=md-nav__item> <a href=../LearnServerProgramming/ class=md-nav__link> <span class=md-ellipsis> LearnServerProgramming </span> </a> </li> <li class=md-nav__item> <a href=../LearnTesting/ class=md-nav__link> <span class=md-ellipsis> LearnTesting </span> </a> </li> <li class=md-nav__item> <a href=../Linux/ class=md-nav__link> <span class=md-ellipsis> Linux </span> </a> </li> <li class=md-nav__item> <a href=../LinuxKernelSignalVectorBug/ class=md-nav__link> <span class=md-ellipsis> LinuxKernelSignalVectorBug </span> </a> </li> <li class=md-nav__item> <a href=../Livestreams/ class=md-nav__link> <span class=md-ellipsis> Livestreams </span> </a> </li> <li class=md-nav__item> <a href=../LockOSThread/ class=md-nav__link> <span class=md-ellipsis> LockOSThread </span> </a> </li> <li class=md-nav__item> <a href=../LoopvarExperiment/ class=md-nav__link> <span class=md-ellipsis> LoopvarExperiment </span> </a> </li> <li class=md-nav__item> <a href=../LUCI/ class=md-nav__link> <span class=md-ellipsis> LUCI </span> </a> </li> <li class=md-nav__item> <a href=../MacOS12BSDThreadRegisterIssue/ class=md-nav__link> <span class=md-ellipsis> MacOS12BSDThreadRegisterIssue </span> </a> </li> <li class=md-nav__item> <a href=../MethodSets/ class=md-nav__link> <span class=md-ellipsis> MethodSets </span> </a> </li> <li class=md-nav__item> <a href=../MinimumRequirements/ class=md-nav__link> <span class=md-ellipsis> MinimumRequirements </span> </a> </li> <li class=md-nav__item> <a href=../MinorReleases/ class=md-nav__link> <span class=md-ellipsis> MinorReleases </span> </a> </li> <li class=md-nav__item> <a href=../Mobile/ class=md-nav__link> <span class=md-ellipsis> Mobile </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Modules </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Modules </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#recent-changes class=md-nav__link> <span class=md-ellipsis> Recent Changes </span> </a> <nav class=md-nav aria-label="Recent Changes"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#go-116 class=md-nav__link> <span class=md-ellipsis> Go 1.16 </span> </a> </li> <li class=md-nav__item> <a href=#go-115 class=md-nav__link> <span class=md-ellipsis> Go 1.15 </span> </a> </li> <li class=md-nav__item> <a href=#go-114 class=md-nav__link> <span class=md-ellipsis> Go 1.14 </span> </a> </li> <li class=md-nav__item> <a href=#go-113 class=md-nav__link> <span class=md-ellipsis> Go 1.13 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#table-of-contents class=md-nav__link> <span class=md-ellipsis> Table of Contents </span> </a> </li> <li class=md-nav__item> <a href=#quick-start class=md-nav__link> <span class=md-ellipsis> Quick Start </span> </a> <nav class=md-nav aria-label="Quick Start"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#example class=md-nav__link> <span class=md-ellipsis> Example </span> </a> </li> <li class=md-nav__item> <a href=#daily-workflow class=md-nav__link> <span class=md-ellipsis> Daily Workflow </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#new-concepts class=md-nav__link> <span class=md-ellipsis> New Concepts </span> </a> <nav class=md-nav aria-label="New Concepts"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#modules class=md-nav__link> <span class=md-ellipsis> Modules </span> </a> </li> <li class=md-nav__item> <a href=#gomod class=md-nav__link> <span class=md-ellipsis> go.mod </span> </a> </li> <li class=md-nav__item> <a href=#version-selection class=md-nav__link> <span class=md-ellipsis> Version Selection </span> </a> </li> <li class=md-nav__item> <a href=#semantic-import-versioning class=md-nav__link> <span class=md-ellipsis> Semantic Import Versioning </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#how-to-use-modules class=md-nav__link> <span class=md-ellipsis> How to Use Modules </span> </a> <nav class=md-nav aria-label="How to Use Modules"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#how-to-install-and-activate-module-support class=md-nav__link> <span class=md-ellipsis> How to Install and Activate Module Support </span> </a> </li> <li class=md-nav__item> <a href=#how-to-define-a-module class=md-nav__link> <span class=md-ellipsis> How to Define a Module </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#how-to-upgrade-and-downgrade-dependencies class=md-nav__link> <span class=md-ellipsis> How to Upgrade and Downgrade Dependencies </span> </a> </li> <li class=md-nav__item> <a href=#how-to-prepare-for-a-release class=md-nav__link> <span class=md-ellipsis> How to Prepare for a Release </span> </a> <nav class=md-nav aria-label="How to Prepare for a Release"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#releasing-modules-all-versions class=md-nav__link> <span class=md-ellipsis> Releasing Modules (All Versions) </span> </a> </li> <li class=md-nav__item> <a href=#releasing-modules-v2-or-higher class=md-nav__link> <span class=md-ellipsis> Releasing Modules (v2 or Higher) </span> </a> </li> <li class=md-nav__item> <a href=#publishing-a-release class=md-nav__link> <span class=md-ellipsis> Publishing a release </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#migrating-to-modules class=md-nav__link> <span class=md-ellipsis> Migrating to Modules </span> </a> <nav class=md-nav aria-label="Migrating to Modules"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#automatic-migration-from-prior-dependency-managers class=md-nav__link> <span class=md-ellipsis> Automatic Migration from Prior Dependency Managers </span> </a> </li> <li class=md-nav__item> <a href=#providing-dependency-information-to-older-versions-of-go-and-non-module-consumers class=md-nav__link> <span class=md-ellipsis> Providing Dependency Information to Older Versions of Go and Non-Module Consumers </span> </a> </li> <li class=md-nav__item> <a href=#updating-pre-existing-install-instructions class=md-nav__link> <span class=md-ellipsis> Updating Pre-Existing Install Instructions </span> </a> </li> <li class=md-nav__item> <a href=#avoid-breaking-existing-import-paths class=md-nav__link> <span class=md-ellipsis> Avoid Breaking Existing Import Paths </span> </a> </li> <li class=md-nav__item> <a href=#incrementing-the-major-version-when-first-adopting-modules-with-v2-packages class=md-nav__link> <span class=md-ellipsis> Incrementing the Major Version When First Adopting Modules with v2+ Packages </span> </a> </li> <li class=md-nav__item> <a href=#v2-modules-allow-multiple-major-versions-within-a-single-build class=md-nav__link> <span class=md-ellipsis> v2+ Modules Allow Multiple Major Versions Within a Single Build </span> </a> </li> <li class=md-nav__item> <a href=#modules-consuming-non-module-code class=md-nav__link> <span class=md-ellipsis> Modules Consuming Non-Module Code </span> </a> </li> <li class=md-nav__item> <a href=#non-module-code-consuming-modules class=md-nav__link> <span class=md-ellipsis> Non-Module Code Consuming Modules </span> </a> </li> <li class=md-nav__item> <a href=#strategies-for-authors-of-pre-existing-v2-packages class=md-nav__link> <span class=md-ellipsis> Strategies for Authors of Pre-Existing v2+ Packages </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#additional-resources class=md-nav__link> <span class=md-ellipsis> Additional Resources </span> </a> <nav class=md-nav aria-label="Additional Resources"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#documentation-and-proposal class=md-nav__link> <span class=md-ellipsis> Documentation and Proposal </span> </a> </li> <li class=md-nav__item> <a href=#introductory-material class=md-nav__link> <span class=md-ellipsis> Introductory Material </span> </a> </li> <li class=md-nav__item> <a href=#additional-material class=md-nav__link> <span class=md-ellipsis> Additional Material </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#changes-since-the-initial-vgo-proposal class=md-nav__link> <span class=md-ellipsis> Changes Since the Initial Vgo Proposal </span> </a> </li> <li class=md-nav__item> <a href=#github-issues class=md-nav__link> <span class=md-ellipsis> GitHub Issues </span> </a> </li> <li class=md-nav__item> <a href=#faqs class=md-nav__link> <span class=md-ellipsis> FAQs </span> </a> <nav class=md-nav aria-label=FAQs> <ul class=md-nav__list> <li class=md-nav__item> <a href=#how-are-versions-marked-as-incompatible class=md-nav__link> <span class=md-ellipsis> How are versions marked as incompatible? </span> </a> </li> <li class=md-nav__item> <a href=#when-do-i-get-old-behavior-vs-new-module-based-behavior class=md-nav__link> <span class=md-ellipsis> When do I get old behavior vs. new module-based behavior? </span> </a> </li> <li class=md-nav__item> <a href=#why-does-installing-a-tool-via-go-get-fail-with-error-cannot-find-main-module class=md-nav__link> <span class=md-ellipsis> Why does installing a tool via go get fail with error cannot find main module? </span> </a> </li> <li class=md-nav__item> <a href=#how-can-i-track-tool-dependencies-for-a-module class=md-nav__link> <span class=md-ellipsis> How can I track tool dependencies for a module? </span> </a> </li> <li class=md-nav__item> <a href=#what-is-the-status-of-module-support-in-ides-editors-and-standard-tools-like-goimports-gorename-etc class=md-nav__link> <span class=md-ellipsis> What is the status of module support in IDEs, editors and standard tools like goimports, gorename, etc? </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#faqs--additional-control class=md-nav__link> <span class=md-ellipsis> FAQs — Additional Control </span> </a> <nav class=md-nav aria-label="FAQs — Additional Control"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#what-community-tooling-exists-for-working-with-modules class=md-nav__link> <span class=md-ellipsis> What community tooling exists for working with modules? </span> </a> </li> <li class=md-nav__item> <a href=#when-should-i-use-the-replace-directive class=md-nav__link> <span class=md-ellipsis> When should I use the replace directive? </span> </a> </li> <li class=md-nav__item> <a href=#can-i-work-entirely-outside-of-vcs-on-my-local-filesystem class=md-nav__link> <span class=md-ellipsis> Can I work entirely outside of VCS on my local filesystem? </span> </a> </li> <li class=md-nav__item> <a href=#how-do-i-use-vendoring-with-modules-is-vendoring-going-away class=md-nav__link> <span class=md-ellipsis> How do I use vendoring with modules? Is vendoring going away? </span> </a> </li> <li class=md-nav__item> <a href=#are-there-always-on-module-repositories-and-enterprise-proxies class=md-nav__link> <span class=md-ellipsis> Are there "always on" module repositories and enterprise proxies? </span> </a> </li> <li class=md-nav__item> <a href=#can-i-control-when-gomod-gets-updated-and-when-the-go-tools-use-the-network-to-satisfy-dependencies class=md-nav__link> <span class=md-ellipsis> Can I control when go.mod gets updated and when the go tools use the network to satisfy dependencies? </span> </a> </li> <li class=md-nav__item> <a href=#how-do-i-use-modules-with-ci-systems-such-as-travis-or-circleci class=md-nav__link> <span class=md-ellipsis> How do I use modules with CI systems such as Travis or CircleCI? </span> </a> </li> <li class=md-nav__item> <a href=#how-do-i-download-modules-needed-to-build-specific-packages-or-tests class=md-nav__link> <span class=md-ellipsis> How do I download modules needed to build specific packages or tests? </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#faqs--gomod-and-gosum class=md-nav__link> <span class=md-ellipsis> FAQs — go.mod and go.sum </span> </a> <nav class=md-nav aria-label="FAQs — go.mod and go.sum"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#why-does-go-mod-tidy-record-indirect-and-test-dependencies-in-my-gomod class=md-nav__link> <span class=md-ellipsis> Why does 'go mod tidy' record indirect and test dependencies in my 'go.mod'? </span> </a> </li> <li class=md-nav__item> <a href=#is-gosum-a-lock-file-why-does-gosum-include-information-for-module-versions-i-am-no-longer-using class=md-nav__link> <span class=md-ellipsis> Is 'go.sum' a lock file? Why does 'go.sum' include information for module versions I am no longer using? </span> </a> </li> <li class=md-nav__item> <a href=#should-i-commit-my-gosum-file-as-well-as-my-gomod-file class=md-nav__link> <span class=md-ellipsis> Should I commit my 'go.sum' file as well as my 'go.mod' file? </span> </a> </li> <li class=md-nav__item> <a href=#should-i-still-add-a-gomod-file-if-i-do-not-have-any-dependencies class=md-nav__link> <span class=md-ellipsis> Should I still add a 'go.mod' file if I do not have any dependencies? </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#faqs--semantic-import-versioning class=md-nav__link> <span class=md-ellipsis> FAQs — Semantic Import Versioning </span> </a> <nav class=md-nav aria-label="FAQs — Semantic Import Versioning"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#why-must-major-version-numbers-appear-in-import-paths class=md-nav__link> <span class=md-ellipsis> Why must major version numbers appear in import paths? </span> </a> </li> <li class=md-nav__item> <a href=#why-are-major-versions-v0-v1-omitted-from-import-paths class=md-nav__link> <span class=md-ellipsis> Why are major versions v0, v1 omitted from import paths?" </span> </a> </li> <li class=md-nav__item> <a href=#what-are-some-implications-of-tagging-my-project-with-major-version-v0-v1-or-making-breaking-changes-with-v2 class=md-nav__link> <span class=md-ellipsis> What are some implications of tagging my project with major version v0, v1, or making breaking changes with v2+? </span> </a> </li> <li class=md-nav__item> <a href=#can-a-module-consume-a-package-that-has-not-opted-in-to-modules class=md-nav__link> <span class=md-ellipsis> Can a module consume a package that has not opted in to modules? </span> </a> </li> <li class=md-nav__item> <a href=#can-a-module-consume-a-v2-package-that-has-not-opted-into-modules-what-does-incompatible-mean class=md-nav__link> <span class=md-ellipsis> Can a module consume a v2+ package that has not opted into modules? What does '+incompatible' mean? </span> </a> </li> <li class=md-nav__item> <a href=#how-are-v2-modules-treated-in-a-build-if-modules-support-is-not-enabled-how-does-minimal-module-compatibility-work-in-197-1103-and-111 class=md-nav__link> <span class=md-ellipsis> How are v2+ modules treated in a build if modules support is not enabled? How does "minimal module compatibility" work in 1.9.7+, 1.10.3+, and 1.11? </span> </a> </li> <li class=md-nav__item> <a href=#what-happens-if-i-create-a-gomod-but-do-not-apply-semver-tags-to-my-repository class=md-nav__link> <span class=md-ellipsis> What happens if I create a go.mod but do not apply semver tags to my repository? </span> </a> </li> <li class=md-nav__item> <a href=#can-a-module-depend-on-a-different-version-of-itself class=md-nav__link> <span class=md-ellipsis> Can a module depend on a different version of itself? </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#faqs--multi-module-repositories class=md-nav__link> <span class=md-ellipsis> FAQS — Multi-Module Repositories </span> </a> <nav class=md-nav aria-label="FAQS — Multi-Module Repositories"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#what-are-multi-module-repositories class=md-nav__link> <span class=md-ellipsis> What are multi-module repositories? </span> </a> </li> <li class=md-nav__item> <a href=#should-i-have-multiple-modules-in-a-single-repository class=md-nav__link> <span class=md-ellipsis> Should I have multiple modules in a single repository? </span> </a> </li> <li class=md-nav__item> <a href=#is-it-possible-to-add-a-module-to-a-multi-module-repository class=md-nav__link> <span class=md-ellipsis> Is it possible to add a module to a multi-module repository? </span> </a> </li> <li class=md-nav__item> <a href=#is-it-possible-to-remove-a-module-from-a-multi-module-repository class=md-nav__link> <span class=md-ellipsis> Is it possible to remove a module from a multi-module repository? </span> </a> </li> <li class=md-nav__item> <a href=#can-a-module-depend-on-an-internal-in-another class=md-nav__link> <span class=md-ellipsis> Can a module depend on an internal/ in another? </span> </a> </li> <li class=md-nav__item> <a href=#can-an-additional-gomod-exclude-unnecessary-content-do-modules-have-the-equivalent-of-a-gitignore-file class=md-nav__link> <span class=md-ellipsis> Can an additional go.mod exclude unnecessary content? Do modules have the equivalent of a .gitignore file? </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#faqs--minimal-version-selection class=md-nav__link> <span class=md-ellipsis> FAQs — Minimal Version Selection </span> </a> <nav class=md-nav aria-label="FAQs — Minimal Version Selection"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#wont-minimal-version-selection-keep-developers-from-getting-important-updates class=md-nav__link> <span class=md-ellipsis> Won't minimal version selection keep developers from getting important updates? </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#faqs--possible-problems class=md-nav__link> <span class=md-ellipsis> FAQs — Possible Problems </span> </a> <nav class=md-nav aria-label="FAQs — Possible Problems"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#what-are-some-general-things-i-can-spot-check-if-i-am-seeing-a-problem class=md-nav__link> <span class=md-ellipsis> What are some general things I can spot check if I am seeing a problem? </span> </a> </li> <li class=md-nav__item> <a href=#what-can-i-check-if-i-am-not-seeing-the-expected-version-of-a-dependency class=md-nav__link> <span class=md-ellipsis> What can I check if I am not seeing the expected version of a dependency? </span> </a> </li> <li class=md-nav__item> <a href=#why-am-i-getting-an-error-cannot-find-module-providing-package-foo class=md-nav__link> <span class=md-ellipsis> Why am I getting an error 'cannot find module providing package foo'? </span> </a> </li> <li class=md-nav__item> <a href=#why-does-go-mod-init-give-the-error-cannot-determine-module-path-for-source-directory class=md-nav__link> <span class=md-ellipsis> Why does 'go mod init' give the error 'cannot determine module path for source directory'? </span> </a> </li> <li class=md-nav__item> <a href=#i-have-a-problem-with-a-complex-dependency-that-has-not-opted-in-to-modules-can-i-use-information-from-its-current-dependency-manager class=md-nav__link> <span class=md-ellipsis> I have a problem with a complex dependency that has not opted in to modules. Can I use information from its current dependency manager? </span> </a> </li> <li class=md-nav__item> <a href=#how-can-i-resolve-parsing-gomod-unexpected-module-path-and-error-loading-module-requirements-errors-caused-by-a-mismatch-between-import-paths-vs-declared-module-identity class=md-nav__link> <span class=md-ellipsis> How can I resolve "parsing go.mod: unexpected module path" and "error loading module requirements" errors caused by a mismatch between import paths vs. declared module identity? </span> </a> <nav class=md-nav aria-label='How can I resolve "parsing go.mod: unexpected module path" and "error loading module requirements" errors caused by a mismatch between import paths vs. declared module identity?'> <ul class=md-nav__list> <li class=md-nav__item> <a href=#why-does-this-error-occur class=md-nav__link> <span class=md-ellipsis> Why does this error occur? </span> </a> </li> <li class=md-nav__item> <a href=#example-problem-scenario class=md-nav__link> <span class=md-ellipsis> Example problem scenario </span> </a> </li> <li class=md-nav__item> <a href=#resolving class=md-nav__link> <span class=md-ellipsis> Resolving </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#why-does-go-build-require-gcc-and-why-are-prebuilt-packages-such-as-nethttp-not-used class=md-nav__link> <span class=md-ellipsis> Why does 'go build' require gcc, and why are prebuilt packages such as net/http not used? </span> </a> </li> <li class=md-nav__item> <a href=#do-modules-work-with-relative-imports-like-import-subdir class=md-nav__link> <span class=md-ellipsis> Do modules work with relative imports like import "./subdir"? </span> </a> </li> <li class=md-nav__item> <a href=#some-needed-files-may-not-be-present-in-populated-vendor-directory class=md-nav__link> <span class=md-ellipsis> Some needed files may not be present in populated vendor directory </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../MutexOrChannel/ class=md-nav__link> <span class=md-ellipsis> MutexOrChannel </span> </a> </li> <li class=md-nav__item> <a href=../NetBSD/ class=md-nav__link> <span class=md-ellipsis> NetBSD </span> </a> </li> <li class=md-nav__item> <a href=../NewSpeakers/ class=md-nav__link> <span class=md-ellipsis> NewSpeakers </span> </a> </li> <li class=md-nav__item> <a href=../NonEnglish/ class=md-nav__link> <span class=md-ellipsis> NonEnglish </span> </a> </li> <li class=md-nav__item> <a href=../NoPlusOne/ class=md-nav__link> <span class=md-ellipsis> NoPlusOne </span> </a> </li> <li class=md-nav__item> <a href=../OpenBSD/ class=md-nav__link> <span class=md-ellipsis> OpenBSD </span> </a> </li> <li class=md-nav__item> <a href=../PackagePublishing/ class=md-nav__link> <span class=md-ellipsis> PackagePublishing </span> </a> </li> <li class=md-nav__item> <a href=../PanicAndRecover/ class=md-nav__link> <span class=md-ellipsis> PanicAndRecover </span> </a> </li> <li class=md-nav__item> <a href=../Performance/ class=md-nav__link> <span class=md-ellipsis> Performance </span> </a> </li> <li class=md-nav__item> <a href=../PerformanceMonitoring/ class=md-nav__link> <span class=md-ellipsis> PerformanceMonitoring </span> </a> </li> <li class=md-nav__item> <a href=../PGO-Tools/ class=md-nav__link> <span class=md-ellipsis> PGO Tools </span> </a> </li> <li class=md-nav__item> <a href=../Plan9/ class=md-nav__link> <span class=md-ellipsis> Plan9 </span> </a> </li> <li class=md-nav__item> <a href=../Podcasts/ class=md-nav__link> <span class=md-ellipsis> Podcasts </span> </a> </li> <li class=md-nav__item> <a href=../PortingPolicy/ class=md-nav__link> <span class=md-ellipsis> PortingPolicy </span> </a> </li> <li class=md-nav__item> <a href=../PriorDiscussion/ class=md-nav__link> <span class=md-ellipsis> PriorDiscussion </span> </a> </li> <li class=md-nav__item> <a href=../Projects/ class=md-nav__link> <span class=md-ellipsis> Projects </span> </a> </li> <li class=md-nav__item> <a href=../Proposals/ class=md-nav__link> <span class=md-ellipsis> Proposals </span> </a> </li> <li class=md-nav__item> <a href=../ProviderIntegration/ class=md-nav__link> <span class=md-ellipsis> ProviderIntegration </span> </a> </li> <li class=md-nav__item> <a href=../Questions/ class=md-nav__link> <span class=md-ellipsis> Questions </span> </a> </li> <li class=md-nav__item> <a href=../Quiet-Weeks/ class=md-nav__link> <span class=md-ellipsis> Quiet Weeks </span> </a> </li> <li class=md-nav__item> <a href=../Range/ class=md-nav__link> <span class=md-ellipsis> Range </span> </a> </li> <li class=md-nav__item> <a href=../RangefuncExperiment/ class=md-nav__link> <span class=md-ellipsis> RangefuncExperiment </span> </a> </li> <li class=md-nav__item> <a href=../RateLimiting/ class=md-nav__link> <span class=md-ellipsis> RateLimiting </span> </a> </li> <li class=md-nav__item> <a href=../ResearchPapers/ class=md-nav__link> <span class=md-ellipsis> ResearchPapers </span> </a> </li> <li class=md-nav__item> <a href=../Resolving-Problems-From-Modified-Module-Path/ class=md-nav__link> <span class=md-ellipsis> Resolving Problems From Modified Module Path </span> </a> </li> <li class=md-nav__item> <a href=../Resources-for-slog/ class=md-nav__link> <span class=md-ellipsis> Resources for slog </span> </a> </li> <li class=md-nav__item> <a href=../RiskyChanges/ class=md-nav__link> <span class=md-ellipsis> RiskyChanges </span> </a> </li> <li class=md-nav__item> <a href=../Screencasts/ class=md-nav__link> <span class=md-ellipsis> Screencasts </span> </a> </li> <li class=md-nav__item> <a href=../SettingGOPATH/ class=md-nav__link> <span class=md-ellipsis> SettingGOPATH </span> </a> </li> <li class=md-nav__item> <a href=../SignalHandling/ class=md-nav__link> <span class=md-ellipsis> SignalHandling </span> </a> </li> <li class=md-nav__item> <a href=../SimultaneousAssignment/ class=md-nav__link> <span class=md-ellipsis> SimultaneousAssignment </span> </a> </li> <li class=md-nav__item> <a href=../SliceTricks/ class=md-nav__link> <span class=md-ellipsis> SliceTricks </span> </a> </li> <li class=md-nav__item> <a href=../SlowBots/ class=md-nav__link> <span class=md-ellipsis> SlowBots </span> </a> </li> <li class=md-nav__item> <a href=../Solaris/ class=md-nav__link> <span class=md-ellipsis> Solaris </span> </a> </li> <li class=md-nav__item> <a href=../Spectre/ class=md-nav__link> <span class=md-ellipsis> Spectre </span> </a> </li> <li class=md-nav__item> <a href=../Spelling/ class=md-nav__link> <span class=md-ellipsis> Spelling </span> </a> </li> <li class=md-nav__item> <a href=../SQLDrivers/ class=md-nav__link> <span class=md-ellipsis> SQLDrivers </span> </a> </li> <li class=md-nav__item> <a href=../SQLInterface/ class=md-nav__link> <span class=md-ellipsis> SQLInterface </span> </a> </li> <li class=md-nav__item> <a href=../Style/ class=md-nav__link> <span class=md-ellipsis> Style </span> </a> </li> <li class=md-nav__item> <a href=../SuccessStories/ class=md-nav__link> <span class=md-ellipsis> SuccessStories </span> </a> </li> <li class=md-nav__item> <a href=../Switch/ class=md-nav__link> <span class=md-ellipsis> Switch </span> </a> </li> <li class=md-nav__item> <a href=../TableDrivenTests/ class=md-nav__link> <span class=md-ellipsis> TableDrivenTests </span> </a> </li> <li class=md-nav__item> <a href=../TargetSpecific/ class=md-nav__link> <span class=md-ellipsis> TargetSpecific </span> </a> </li> <li class=md-nav__item> <a href=../TestComments/ class=md-nav__link> <span class=md-ellipsis> TestComments </span> </a> </li> <li class=md-nav__item> <a href=../TestFailures/ class=md-nav__link> <span class=md-ellipsis> TestFailures </span> </a> </li> <li class=md-nav__item> <a href=../Timeouts/ class=md-nav__link> <span class=md-ellipsis> Timeouts </span> </a> </li> <li class=md-nav__item> <a href=../Training/ class=md-nav__link> <span class=md-ellipsis> Training </span> </a> </li> <li class=md-nav__item> <a href=../Ubuntu/ class=md-nav__link> <span class=md-ellipsis> Ubuntu </span> </a> </li> <li class=md-nav__item> <a href=../Watchflakes/ class=md-nav__link> <span class=md-ellipsis> Watchflakes </span> </a> </li> <li class=md-nav__item> <a href=../WebAccessibilityResourcesAndTips/ class=md-nav__link> <span class=md-ellipsis> WebAccessibilityResourcesAndTips </span> </a> </li> <li class=md-nav__item> <a href=../WebAssembly/ class=md-nav__link> <span class=md-ellipsis> WebAssembly </span> </a> </li> <li class=md-nav__item> <a href=../Well-known-struct-tags/ class=md-nav__link> <span class=md-ellipsis> Well known struct tags </span> </a> </li> <li class=md-nav__item> <a href=../WhyGo/ class=md-nav__link> <span class=md-ellipsis> WhyGo </span> </a> </li> <li class=md-nav__item> <a href=../Windows/ class=md-nav__link> <span class=md-ellipsis> Windows </span> </a> </li> <li class=md-nav__item> <a href=../WindowsBuild/ class=md-nav__link> <span class=md-ellipsis> WindowsBuild </span> </a> </li> <li class=md-nav__item> <a href=../WindowsCrossCompiling/ class=md-nav__link> <span class=md-ellipsis> WindowsCrossCompiling </span> </a> </li> <li class=md-nav__item> <a href=../WindowsDLLs/ class=md-nav__link> <span class=md-ellipsis> WindowsDLLs </span> </a> </li> <li class=md-nav__item> <a href=../X-Repositories/ class=md-nav__link> <span class=md-ellipsis> X Repositories </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1>Modules</h1> <p>This wiki page serves as a usage and troubleshooting guide. * For tutorial blog posts, see <a href=https://go.dev/blog/using-go-modules>Using Go Modules</a>. * For a technical reference, see the <a href=https://go.dev/ref/mod>Go Modules Reference</a> (under development).</p> <p>Go has included support for versioned modules as proposed <a href=https://go.dev/design/24301-versioned-go>here</a> since 1.11. The initial prototype <code>vgo</code> was <a href=https://research.swtch.com/vgo>announced</a> in February 2018. In July 2018, versioned modules <a href=https://groups.google.com/d/msg/golang-dev/a5PqQuBljF4/61QK4JdtBgAJ>landed</a> in the main Go repository.</p> <p>Since <a href=https://go.dev/doc/go1.14>Go 1.14</a>, module support is considered ready for production use, and all users are encouraged to migrate to modules from other dependency management systems. If you are unable to migrate due to a problem in the Go toolchain, please ensure that the problem has an <a href=#github-issues>open issue</a> filed. (If the issue is not on the Go1.16 milestone, please comment on why it prevents you from migrating so it can be prioritized appropriately). You can also provide an <a href=/wiki/ExperienceReports>experience report</a> for more detailed feedback.</p> <h2 id=recent-changes>Recent Changes<a class=headerlink href=#recent-changes title="Permanent link"></a></h2> <h3 id=go-116>Go 1.16<a class=headerlink href=#go-116 title="Permanent link"></a></h3> <p>See the <a href=https://go.dev/doc/go1.16#go-command>Go 1.16 release notes</a> for details.</p> <ul> <li>Module mode (<code>GO111MODULE=on</code>) is the default in all cases</li> <li>Commands no longer modify <code>go.mod</code> / <code>go.sum</code> by default (<code>-mod=readonly</code>)</li> <li><code>go install pkg@version</code> is the recommended way to globally install packages / executables</li> <li><code>retract</code> is available in <code>go.mod</code> </li> </ul> <h3 id=go-115>Go 1.15<a class=headerlink href=#go-115 title="Permanent link"></a></h3> <p>See the <a href=https://go.dev/doc/go1.15#go-command>Go 1.15 release notes</a> for details.</p> <ul> <li>The location of the module cache may now be set with the <code>GOMODCACHE</code> environment variable. The default value of <code>GOMODCACHE</code> is <code>GOPATH[0]/pkg/mod</code>, the location of the module cache before this change.</li> <li>A workaround is now available for Windows "Access is denied" errors in go commands that access the module cache, caused by external programs concurrently scanning the file system (see issue <a href=https://go.dev/issue/36568>#36568</a>). The workaround is not enabled by default because it is not safe to use when Go versions lower than 1.14.2 and 1.13.10 are running concurrently with the same module cache. It can be enabled by explicitly setting the environment variable <code>GODEBUG=modcacheunzipinplace=1</code>.</li> </ul> <h3 id=go-114>Go 1.14<a class=headerlink href=#go-114 title="Permanent link"></a></h3> <p>See the <a href=https://go.dev/doc/go1.14#go-command>Go 1.14 release notes</a> for details.</p> <ul> <li>When the main module contains a top-level vendor directory and its <code>go.mod file</code> specifies <code>go 1.14</code> or higher, the go command now defaults to <code>-mod=vendor</code> for operations that accept that flag.</li> <li><code>-mod=readonly</code> is now set by default when the go.mod file is read-only and no top-level vendor directory is present.</li> <li><code>-modcacherw</code> is a new flag that instructs the go command to leave newly-created directories in the module cache at their default permissions rather than making them read-only.</li> <li><code>-modfile=file</code> is a new flag that instructs the go command to read (and possibly write) an alternate <code>go.mod</code> file instead of the one in the module root directory.</li> <li>When module-aware mode is enabled explicitly (by setting <code>GO111MODULE=on</code>), most module commands have more limited functionality if no <code>go.mod</code> file is present.</li> <li>The go command now supports Subversion repositories in module mode.</li> </ul> <h3 id=go-113>Go 1.13<a class=headerlink href=#go-113 title="Permanent link"></a></h3> <p>See the <a href=https://go.dev/doc/go1.13#modules>Go 1.13 release notes</a> for details.</p> <ul> <li>The <code>go</code> tool now defaults to downloading modules from the public Go module mirror at <a href=https://proxy.golang.org>https://proxy.golang.org</a>, and also defaults to validating downloaded modules (regardless of source) against the public Go checksum database at <a href=https://sum.golang.org>https://sum.golang.org</a>.<ul> <li>If you have private code, you most likely should configure the <code>GOPRIVATE</code> setting (such as <code>go env -w GOPRIVATE=*.corp.com,github.com/secret/repo</code>), or the more fine-grained variants <code>GONOPROXY</code> or <code>GONOSUMDB</code> that support less frequent use cases. See the <a href=https://go.dev/ref/mod#private-module-privacy>documentation</a> for more details.</li> </ul> </li> <li><code>GO111MODULE=auto</code> enables module-mode if any go.mod is found, even inside GOPATH. (Prior to Go 1.13, <code>GO111MODULE=auto</code> would never enable module-mode inside GOPATH).</li> <li><code>go get</code> arguments have changed:<ul> <li><code>go get -u</code> (without any arguments) now only upgrades the direct and indirect dependencies of your current <em>package</em>, and no longer examines your entire <em>module</em>.</li> <li><code>go get -u ./...</code> from your module root upgrades all the direct and indirect dependencies of your module, and now excludes test dependencies.</li> <li><code>go get -u -t ./...</code> is similar, but also upgrades test dependencies.</li> <li><code>go get</code> no longer supports <code>-m</code> (because it would have largely overlapped with <code>go get -d</code> due to other changes; you can usually replace <code>go get -m foo</code> with <code>go get -d foo</code>).</li> </ul> </li> </ul> <h2 id=table-of-contents>Table of Contents<a class=headerlink href=#table-of-contents title="Permanent link"></a></h2> <p>The "Quick Start" and "New Concepts" sections are particularly important for someone who is starting to work with modules. The "How to&hellip;" sections cover more details on mechanics. The largest quantity of content on this page is in the FAQs answering more specific questions; it can be worthwhile to at least skim the FAQ one-liners listed here.</p> <ul> <li><a href=/wiki/Modules#quick-start>Quick Start</a></li> <li><a href=/wiki/Modules#example>Example</a></li> <li><a href=/wiki/Modules#daily-workflow>Daily Workflow</a></li> <li><a href=/wiki/Modules#new-concepts>New Concepts</a></li> <li><a href=/wiki/Modules#modules>Modules</a></li> <li><a href=/wiki/Modules#gomod>go.mod</a></li> <li><a href=/wiki/Modules#version-selection>Version Selection</a></li> <li><a href=/wiki/Modules#semantic-import-versioning>Semantic Import Versioning</a></li> <li><a href=/wiki/Modules#how-to-use-modules>How to Use Modules</a></li> <li><a href=/wiki/Modules#how-to-install-and-activate-module-support>How to Install and Activate Module Support</a></li> <li><a href=/wiki/Modules#how-to-define-a-module>How to Define a Module</a></li> <li><a href=/wiki/Modules#how-to-upgrade-and-downgrade-dependencies>How to Upgrade and Downgrade Dependencies</a></li> <li><a href=/wiki/Modules#how-to-prepare-for-a-release>How to Prepare for a Release (All Versions)</a></li> <li><a href=/wiki/Modules#releasing-modules-v2-or-higher>How to Prepare for a Release (v2 or Higher)</a></li> <li><a href=/wiki/Modules#publishing-a-release>Publishing a Release</a></li> <li><a href=/wiki/Modules#migrating-to-modules>Migrating to Modules</a></li> <li><a href=/wiki/Modules#additional-resources>Additional Resources</a></li> <li><a href=/wiki/Modules#changes-since-the-initial-vgo-proposal>Changes Since the Initial Vgo Proposal</a></li> <li><a href=/wiki/Modules#github-issues>GitHub Issues</a></li> <li><a href=/wiki/Modules#faqs>FAQs</a></li> <li><a href=/wiki/Modules#how-are-versions-marked-as-incompatible>How are versions marked as incompatible?</a></li> <li><a href=/wiki/Modules#when-do-i-get-old-behavior-vs-new-module-based-behavior>When do I get old behavior vs. new module-based behavior?</a></li> <li><a href=/wiki/Modules#why-does-installing-a-tool-via-go-get-fail-with-error-cannot-find-main-module>Why does installing a tool via 'go get' fail with error 'cannot find main module'?</a></li> <li><a href=/wiki/Modules#how-can-i-track-tool-dependencies-for-a-module>How can I track tool dependencies for a module?</a></li> <li><a href=/wiki/Modules#what-is-the-status-of-module-support-in-ides-editors-and-standard-tools-like-goimports-gorename-etc>What is the status of module support in IDEs, editors and standard tools like goimports, gorename, etc.?</a></li> <li><a href=/wiki/Modules#faqs--additional-control>FAQs — Additional Control</a></li> <li><a href=/wiki/Modules#what-community-tooling-exists-for-working-with-modules>What community tooling exists for working with modules?</a></li> <li><a href=/wiki/Modules#when-should-i-use-the-replace-directive>When should I use the 'replace' directive?</a></li> <li><a href=/wiki/Modules#can-i-work-entirely-outside-of-vcs-on-my-local-filesystem>Can I work entirely outside of VCS on my local filesystem?</a></li> <li><a href=/wiki/Modules#how-do-i-use-vendoring-with-modules-is-vendoring-going-away>How do I use vendoring with modules? Is vendoring going away?</a></li> <li><a href=/wiki/Modules#are-there-always-on-module-repositories-and-enterprise-proxies>Are there "always on" module repositories and enterprise proxies?</a></li> <li><a href=/wiki/Modules#can-i-control-when-gomod-gets-updated-and-when-the-go-tools-use-the-network-to-satisfy-dependencies>Can I control when go.mod gets updated and when the go tools use the network to satisfy dependencies?</a></li> <li><a href=/wiki/Modules#how-do-i-use-modules-with-ci-systems-such-as-travis-or-circleci>How do I use modules with CI systems such as Travis or CircleCI?</a></li> <li><a href=/wiki/Modules#how-do-i-download-modules-needed-to-build-specific-packages-or-tests>How do I download modules needed to build specific packages or tests?</a></li> <li><a href=/wiki/Modules#faqs--gomod-and-gosum>FAQs — go.mod and go.sum</a></li> <li><a href=/wiki/Modules#why-does-go-mod-tidy-record-indirect-and-test-dependencies-in-my-gomod>Why does 'go mod tidy' record indirect and test dependencies in my 'go.mod'?</a></li> <li><a href=/wiki/Modules#is-gosum-a-lock-file-why-does-gosum-include-information-for-module-versions-i-am-no-longer-using>Is 'go.sum' a lock file? Why does 'go.sum' include information for module versions I am no longer using?</a></li> <li><a href=/wiki/Modules#should-i-still-add-a-gomod-file-if-i-do-not-have-any-dependencies>Should I still add a 'go.mod' file if I do not have any dependencies?</a></li> <li><a href=/wiki/Modules#should-i-commit-my-gosum-file-as-well-as-my-gomod-file>Should I commit my 'go.sum' file as well as my 'go.mod' file?</a></li> <li><a href=/wiki/Modules#faqs--semantic-import-versioning>FAQs — Semantic Import Versioning</a></li> <li><a href=/wiki/Modules#why-must-major-version-numbers-appear-in-import-paths>Why must major version numbers appear in import paths?</a></li> <li><a href=/wiki/Modules#why-are-major-versions-v0-v1-omitted-from-import-paths>Why are major versions v0, v1 omitted from import paths?</a></li> <li><a href=/wiki/Modules#what-are-some-implications-of-tagging-my-project-with-major-version-v0-v1-or-making-breaking-changes-with-v2>What are some implications of tagging my project with major version v0, v1, or making breaking changes with v2+?</a></li> <li><a href=/wiki/Modules#can-a-module-consume-a-package-that-has-not-opted-in-to-modules>Can a module consume a package that has not opted in to modules?</a></li> <li><a href=/wiki/Modules#can-a-module-consume-a-v2-package-that-has-not-opted-into-modules-what-does-incompatible-mean>Can a module consume a v2+ package that has not opted into modules? What does '+incompatible' mean?</a></li> <li><a href=/wiki/Modules#how-are-v2-modules-treated-in-a-build-if-modules-support-is-not-enabled-how-does-minimal-module-compatibility-work-in-197-1103-and-111>How are v2+ modules treated in a build if modules support is not enabled? How does "minimal module compatibility" work in 1.9.7+, 1.10.3+, and 1.11?</a></li> <li><a href=/wiki/Modules#what-happens-if-i-create-a-gomod-but-do-not-apply-semver-tags-to-my-repository>What happens if I create a go.mod but do not apply semver tags to my repository?</a></li> <li><a href=/wiki/Modules#can-a-module-depend-on-a-different-version-of-itself>Can a module depend on a different version of itself?</a></li> <li><a href=/wiki/Modules#faqs--multi-module-repositories>FAQs — Multi-Module Repositories</a></li> <li><a href=/wiki/Modules#what-are-multi-module-repositories>What are multi-module repositories?</a></li> <li><a href=/wiki/Modules#should-i-have-multiple-modules-in-a-single-repository>Should I have multiple modules in a single repository?</a></li> <li><a href=/wiki/Modules#is-it-possible-to-add-a-module-to-a-multi-module-repository>Is it possible to add a module to a multi-module repository?</a></li> <li><a href=/wiki/Modules#is-it-possible-to-remove-a-module-from-a-multi-module-repository>Is it possible to remove a module from a multi-module repository?</a></li> <li><a href=/wiki/Modules#can-a-module-depend-on-an-internal-in-another>Can a module depend on an internal/ in another?</a></li> <li><a href=/wiki/Modules#can-an-additional-gomod-exclude-unnecessary-content-do-modules-have-the-equivalent-of-a-gitignore-file>Can an additional go.mod exclude unnecessary content? Do modules have the equivalent of a .gitignore file?</a></li> <li><a href=/wiki/Modules#faqs--minimal-version-selection>FAQs — Minimal Version Selection</a></li> <li><a href=/wiki/Modules#wont-minimal-version-selection-keep-developers-from-getting-important-updates>Won't minimal version selection keep developers from getting important updates?</a></li> <li><a href=/wiki/Modules#faqs--possible-problems>FAQs — Possible Problems</a></li> <li><a href=/wiki/Modules#what-are-some-general-things-i-can-spot-check-if-i-am-seeing-a-problem>What are some general things I can spot check if I am seeing a problem?</a></li> <li><a href=/wiki/Modules#what-can-i-check-if-i-am-not-seeing-the-expected-version-of-a-dependency>What can I check if I am not seeing the expected version of a dependency?</a></li> <li><a href=/wiki/Modules#why-am-i-getting-an-error-cannot-find-module-providing-package-foo>Why am I getting an error 'cannot find module providing package foo'?</a></li> <li><a href=/wiki/Modules#why-does-go-mod-init-give-the-error-cannot-determine-module-path-for-source-directory>Why does 'go mod init' give the error 'cannot determine module path for source directory'?</a></li> <li><a href=/wiki/Modules#i-have-a-problem-with-a-complex-dependency-that-has-not-opted-in-to-modules-can-i-use-information-from-its-current-dependency-manager>I have a problem with a complex dependency that has not opted in to modules. Can I use information from its current dependency manager?</a></li> <li><a href=/wiki/Modules#how-can-i-resolve-parsing-gomod-unexpected-module-path-and-error-loading-module-requirements-errors-caused-by-a-mismatch-between-import-paths-vs-declared-module-identity>How can I resolve "parsing go.mod: unexpected module path" and "error loading module requirements" errors caused by a mismatch between import paths vs. declared module identity?</a></li> <li><a href=/wiki/Modules#why-does-go-build-require-gcc-and-why-are-prebuilt-packages-such-as-nethttp-not-used>Why does 'go build' require gcc, and why are prebuilt packages such as net/http not used?</a></li> <li><a href=/wiki/Modules#do-modules-work-with-relative-imports-like-import-subdir>Do modules work with relative imports like <code>import "./subdir"</code>?</a></li> <li><a href=/wiki/Modules#some-needed-files-may-not-be-present-in-populated-vendor-directory>Some needed files may not be present in populated vendor directory</a></li> </ul> <h2 id=quick-start>Quick Start<a class=headerlink href=#quick-start title="Permanent link"></a></h2> <h4 id=example>Example<a class=headerlink href=#example title="Permanent link"></a></h4> <p>The details are covered in the remainder of this page, but here is a simple example of creating a module from scratch.</p> <p>Create a directory outside of your GOPATH, and optionally initialize VCS: <div class=highlight><pre><span></span><code>$ mkdir -p /tmp/scratchpad/repo
$ cd /tmp/scratchpad/repo
$ git init -q
$ git remote add origin https://github.com/my/repo
</code></pre></div></p> <p>Initialize a new module: <div class=highlight><pre><span></span><code>$ go mod init github.com/my/repo

go: creating new go.mod: module github.com/my/repo
</code></pre></div></p> <p>Write your code: <div class=highlight><pre><span></span><code>$ cat &lt;&lt;EOF &gt; hello.go
package main

import (
    &quot;fmt&quot;
    &quot;rsc.io/quote&quot;
)

func main() {
    fmt.Println(quote.Hello())
}
EOF
</code></pre></div></p> <p>Build and run: <div class=highlight><pre><span></span><code>$ go mod tidy
go: finding module for package rsc.io/quote
go: found rsc.io/quote in rsc.io/quote v1.5.2
$ go build -o hello
$ ./hello
Hello, world.
</code></pre></div></p> <p>The <code>go.mod</code> file was updated to include explicit versions for your dependencies, where <code>v1.5.2</code> here is a <a href=https://semver.org>semver</a> tag: <div class=highlight><pre><span></span><code>$ cat go.mod
module github.com/my/repo

go 1.16

require rsc.io/quote v1.5.2
</code></pre></div></p> <h4 id=daily-workflow>Daily Workflow<a class=headerlink href=#daily-workflow title="Permanent link"></a></h4> <p>Prior to 1.16, no <code>go get</code> or <code>go mod tidy</code> was required prior to running <code>go build -o hello</code>. Implicit modification of <code>go.mod</code> and <code>go.sum</code> files was disabled by default in 1.16.</p> <p>Your typical day-to-day workflow can be:</p> <ul> <li>Add import statements to your <code>.go</code> code as needed.</li> <li>Standard commands like <code>go build</code> or <code>go test</code> will automatically add new dependencies as needed to satisfy imports (updating <code>go.mod</code> and downloading the new dependencies).</li> <li>When needed, more specific versions of dependencies can be chosen with commands such as <code>go get foo@v1.2.3</code>, <code>go get foo@master</code> (<code>foo@default</code> with mercurial), <code>go get foo@e3702bed2</code>, or by editing <code>go.mod</code> directly.</li> </ul> <p>A brief tour of other common functionality you might use:</p> <ul> <li><code>go list -m all</code> — View final versions that will be used in a build for all direct and indirect dependencies (<a href=/wiki/Modules#version-selection>details</a>)</li> <li><code>go list -u -m all</code> — View available minor and patch upgrades for all direct and indirect dependencies (<a href=/wiki/Modules#how-to-upgrade-and-downgrade-dependencies>details</a>)</li> <li><code>go get -u ./...</code> or <code>go get -u=patch ./...</code> (from module root directory) — Update all direct and indirect dependencies to latest minor or patch upgrades (pre-releases are ignored) (<a href=/wiki/Modules#how-to-upgrade-and-downgrade-dependencies>details</a>)</li> <li><code>go build ./...</code> or <code>go test ./...</code> (from module root directory) — Build or test all packages in the module (<a href=/wiki/Modules#how-to-define-a-module>details</a>)</li> <li><code>go mod tidy</code> — Prune any no-longer-needed dependencies from <code>go.mod</code> and add any dependencies needed for other combinations of OS, architecture, and build tags (<a href=/wiki/Modules#how-to-prepare-for-a-release>details</a>)</li> <li><code>replace</code> directive or <code>gohack</code> — Use a fork, local copy or exact version of a dependency (<a href=/wiki/Modules#when-should-i-use-the-replace-directive>details</a>)</li> <li><code>go mod vendor</code> — Optional step to create a <code>vendor</code> directory (<a href=/wiki/Modules#how-do-i-use-vendoring-with-modules-is-vendoring-going-away>details</a>)</li> </ul> <p>After reading the next four sections on "New Concepts", you will have enough information to get started with modules for most projects. It is also useful to review the <a href=/wiki/Modules#table-of-contents>Table of Contents</a> above (including the FAQ one-liners there) to familiarize yourself with the list of more detailed topics. </p> <h2 id=new-concepts>New Concepts<a class=headerlink href=#new-concepts title="Permanent link"></a></h2> <p>These sections provide a high-level introduction to the main new concepts. For more details and rationale, please see this 40-minute introductory <a href="https://www.youtube.com/watch?v=F8nrpe0XWRg&list=PLq2Nv-Sh8EbbIjQgDzapOFeVfv5bGOoPE&index=3&t=0s">video by Russ Cox describing the philosophy behind the design</a>, the <a href=https://go.dev/design/24301-versioned-go>official proposal document</a>, or the more detailed initial <a href=https://research.swtch.com/vgo>vgo blog series</a>.</p> <h3 id=modules>Modules<a class=headerlink href=#modules title="Permanent link"></a></h3> <p>A <em>module</em> is a collection of related Go packages that are versioned together as a single unit. </p> <p>Modules record precise dependency requirements and create reproducible builds. </p> <p>Most often, a version control repository contains exactly one module defined in the repository root. (<a href=/wiki/Modules#faqs--multi-module-repositories>Multiple modules are supported in a single repository</a>, but typically that would result in more work on an on-going basis than a single module per repository).</p> <p>Summarizing the relationship between repositories, modules, and packages: <br> * A repository contains one or more Go modules. * Each module contains one or more Go packages. * Each package consists of one or more Go source files in a single directory. </p> <p>Modules must be semantically versioned according to <a href=https://semver.org/ >semver</a>, usually in the form <code>v(major).(minor).(patch)</code>, such as <code>v0.1.0</code>, <code>v1.2.3</code>, or <code>v1.5.0-rc.1</code>. The leading <code>v</code> is required. If using Git, <a href=https://git-scm.com/book/en/v2/Git-Basics-Tagging>tag</a> released commits with their versions. Public and private module repositories and proxies are becoming available (see FAQ <a href=/wiki/Modules#are-there-always-on-module-repositories-and-enterprise-proxies>below</a>).</p> <h3 id=gomod>go.mod<a class=headerlink href=#gomod title="Permanent link"></a></h3> <p>A module is defined by a tree of Go source files with a <code>go.mod</code> file in the tree's root directory. Module source code may be located outside of GOPATH. There are four directives: <code>module</code>, <code>require</code>, <code>replace</code>, <code>exclude</code>. </p> <p>Here is an example <code>go.mod</code> file defining the module <code>github.com/my/thing</code>:</p> <div class=highlight><pre><span></span><code>module github.com/my/thing

require (
    github.com/some/dependency v1.2.3
    github.com/another/dependency/v4 v4.0.0
)
</code></pre></div> <p>A module declares its identity in its <code>go.mod</code> via the <code>module</code> directive, which provides the <em>module path</em>. The import paths for all packages in a module share the module path as a common prefix. The module path and the relative path from the <code>go.mod</code> to a package's directory together determine a package's import path.</p> <p>For example, if you are creating a module for a repository <code>github.com/user/mymod</code> that will contain two packages with import paths <code>github.com/user/mymod/foo</code> and <code>github.com/user/mymod/bar</code>, then the first line in your <code>go.mod</code> file typically would declare your module path as <code>module github.com/user/mymod</code>, and the corresponding on-disk structure could be:</p> <div class=highlight><pre><span></span><code>mymod
|-- bar
|   `-- bar.go
|-- foo
|   `-- foo.go
`-- go.mod
</code></pre></div> <p>In Go source code, packages are imported using the full path including the module path. For example, if in our example above, we declared the module identity in <code>go.mod</code> as <code>module github.com/user/mymod</code>, a consumer could do: <div class=highlight><pre><span></span><code>import &quot;github.com/user/mymod/bar&quot;
</code></pre></div> This imports package <code>bar</code> from the module <code>github.com/user/mymod</code>.</p> <p><code>exclude</code> and <code>replace</code> directives only operate on the current (“main”) module. <code>exclude</code> and <code>replace</code> directives in modules other than the main module are ignored when building the main module. The <code>replace</code> and <code>exclude</code> statements, therefore, allow the main module complete control over its own build, without also being subject to complete control by dependencies. (See FAQ <a href=/wiki/Modules#when-should-i-use-the-replace-directive>below</a> for a discussion of when to use a <code>replace</code> directive).</p> <h3 id=version-selection>Version Selection<a class=headerlink href=#version-selection title="Permanent link"></a></h3> <p>If you add a new import to your source code that is not yet covered by a <code>require</code> in <code>go.mod</code>, most go commands like 'go build' and 'go test' will automatically look up the proper module and add the <em>highest</em> version of that new direct dependency to your module's <code>go.mod</code> as a <code>require</code> directive. For example, if your new import corresponds to dependency M whose latest tagged release version is <code>v1.2.3</code>, your module's <code>go.mod</code> will end up with <code>require M v1.2.3</code>, which indicates module M is a dependency with allowed version &gt;= v1.2.3 (and &lt; v2, given v2 is considered incompatible with v1).</p> <p>The <em>minimal version selection</em> algorithm is used to select the versions of all modules used in a build. For each module in a build, the version selected by minimal version selection is always the semantically <em>highest</em> of the versions explicitly listed by a <code>require</code> directive in the main module or one of its dependencies. </p> <p>As an example, if your module depends on module A which has a <code>require D v1.0.0</code>, and your module also depends on module B which has a <code>require D v1.1.1</code>, then minimal version selection would choose <code>v1.1.1</code> of D to include in the build (given it is the highest listed <code>require</code> version). This selection of <code>v1.1.1</code> remains consistent even if sometime later a <code>v1.2.0</code> of D becomes available. This is an example of how the modules system provides 100% reproducible builds. When ready, the module author or user might choose to upgrade to the latest available version of D or choose an explicit version for D. </p> <p>For a brief rationale and overview of the minimal version selection algorithm, <a href=https://github.com/golang/proposal/blob/master/design/24301-versioned-go.md#update-timing--high-fidelity-builds>see the "High Fidelity Builds" section</a> of the official proposal, or see the <a href=https://research.swtch.com/vgo>more detailed <code>vgo</code> blog series</a>.</p> <p>To see a list of the selected module versions (including indirect dependencies), use <code>go list -m all</code>.</p> <p>See also the <a href=/wiki/Modules#how-to-upgrade-and-downgrade-dependencies>"How to Upgrade and Downgrade Dependencies"</a> section below and the <a href=/wiki/Modules#how-are-versions-marked-as-incompatible>"How are versions marked as incompatible?"</a> FAQ below.</p> <h3 id=semantic-import-versioning>Semantic Import Versioning<a class=headerlink href=#semantic-import-versioning title="Permanent link"></a></h3> <p>For many years, the official Go FAQ has included this advice on package versioning:</p> <blockquote> <p>"Packages intended for public use should try to maintain backward compatibility as they evolve. The Go 1 compatibility guidelines are a good reference here: don't remove exported names, encourage tagged composite literals, and so on. If different functionality is required, add a new name instead of changing an old one. If a complete break is required, create a new package with a new import path."</p> </blockquote> <p>The last sentence is especially important — if you break compatibility, you should change the import path of your package. With Go 1.11 modules, that advice is formalized into the <em>import compatibility rule</em>:</p> <blockquote> <p>"If an old package and a new package have the same import path, the new package must be backwards compatible with the old package."</p> </blockquote> <p>Recall <a href=https://semver.org/ >semver</a> requires a major version change when a v1 or higher package makes a backwards-incompatible change. The result of following both the import compatibility rule and semver is called <em>Semantic Import Versioning</em>, where the major version is included in the import path — this ensures the import path changes any time the major version increments due to a compatibility break.</p> <p>As a result of Semantic Import Versioning, code opting in to Go modules <strong>must comply with these rules</strong>: * Follow <a href=https://semver.org/ >semver</a>. (An example VCS tag is <code>v1.2.3</code>). * If the module is version v2 or higher, the major version of the module <em>must</em> be included as a <code>/vN</code> at the end of the module paths used in <code>go.mod</code> files (e.g., <code>module github.com/my/mod/v2</code>, <code>require github.com/my/mod/v2 v2.0.1</code>) and in the package import path (e.g., <code>import "github.com/my/mod/v2/mypkg"</code>). This includes the paths used in <code>go get</code> commands (e.g., <code>go get github.com/my/mod/v2@v2.0.1</code>. Note there is both a <code>/v2</code> and a <code>@v2.0.1</code> in that example. One way to think about it is that the module name now includes the <code>/v2</code>, so include <code>/v2</code> whenever you are using the module name). * If the module is version v0 or v1, do <em>not</em> include the major version in either the module path or the import path.</p> <p>In general, packages with different import paths are different packages. For example, <code>math/rand</code> is a different package than <code>crypto/rand</code>. This is also true if different import paths are due to different major versions appearing in the import path. Thus <code>example.com/my/mod/mypkg</code> is a different package than <code>example.com/my/mod/v2/mypkg</code>, and both may be imported in a single build, which among other benefits helps with diamond dependency problems and also allows a v1 module to be implemented in terms of its v2 replacement or vice versa.</p> <p>See the <a href=https://pkg.go.dev/cmd/go/#hdr-Module_compatibility_and_semantic_versioning>"Module compatibility and semantic versioning"</a> section of the <code>go</code> command documentation for more details on Semantic Import Versioning, and see <a href=https://semver.org>https://semver.org</a> for more about semantic versioning.</p> <p>This section so far has been focused on code that has opted in to modules and imports other modules. However, putting major versions in import paths for v2+ modules could create incompatibilities with older versions of Go, or with code that has not yet opted in to modules. To help with this, there are three important transitional special cases or exceptions to the behavior and rules described above. These transitional exceptions will become less important over time as more packages opt in to modules. </p> <p><strong>Three Transitional Exceptions</strong></p> <ol> <li> <p><strong>gopkg.in</strong></p> <p>Existing code that uses import paths starting with <code>gopkg.in</code> (such as <code>gopkg.in/yaml.v1</code> and <code>gopkg.in/yaml.v2</code>) can continue to use those forms for their module paths and import paths even after opting in to modules.</p> </li> <li> <p><strong>'+incompatible' when importing non-module v2+ packages</strong></p> <p>A module can import a v2+ package that has not opted in to modules itself. A non-module v2+ package that has a valid v2+ <a href=https://semver.org>semver</a> tag will be recorded with a <code>+incompatible</code> suffix in the importing module's <code>go.mod</code> file. The <code>+incompatible</code> suffix indicates that even though the v2+ package has a valid v2+ <a href=https://semver.org>semver</a> tag such as <code>v2.0.0</code>, the v2+ package has not actively opted in to modules and hence that v2+ package is assumed to have <em>not</em> been created with an understanding of the implications of Semantic Import Versioning and how to use major versions in import paths. Therefore, when operating in <a href=/wiki/Modules#when-do-i-get-old-behavior-vs-new-module-based-behavior>module mode</a>, the <code>go</code> tool will treat a non-module v2+ package as an (incompatible) extension of the v1 version series of the package and assume the package has no awareness of Semantic Import Versioning, and the <code>+incompatible</code> suffix is an indication that the <code>go</code> tool is doing so. </p> </li> <li> <p><strong>"Minimal module compatibility" when module mode is not enabled</strong></p> <p>To help with backwards-compatibility, Go versions 1.9.7+, 1.10.3+ and 1.11 have been updated to make it easier for code built with those releases to be able to properly consume v2+ modules <em>without</em> requiring modification of pre-existing code. This behavior is called "minimal module compatibility", and it only takes effect when full <a href=/wiki/Modules#when-do-i-get-old-behavior-vs-new-module-based-behavior>module mode</a> is disabled for the <code>go</code> tool, such as if such as you have set <code>GO111MODULE=off</code> in Go 1.11, or are using Go versions 1.9.7+ or 1.10.3+. When relying on this "minimal module compatibility" mechanism in Go 1.9.7+, 1.10.3+ and 1.11, a package that has <em>not</em> opted in to modules would <em>not</em> include the major version in the import path for any imported v2+ modules. In contrast, a package that <em>has</em> opted in to modules <em>must</em> include the major version in the import path to import any v2+ modules (in order to properly import the v2+ module when the <code>go</code> tool is operating in full module mode with full awareness of Semantic Import Versioning).</p> </li> </ol> <p>For the exact mechanics required to release a v2+ module, please see the <a href=/wiki/Modules#releasing-modules-v2-or-higher>"Releasing Modules (v2 or Higher)"</a> section below.</p> <h2 id=how-to-use-modules>How to Use Modules<a class=headerlink href=#how-to-use-modules title="Permanent link"></a></h2> <h3 id=how-to-install-and-activate-module-support>How to Install and Activate Module Support<a class=headerlink href=#how-to-install-and-activate-module-support title="Permanent link"></a></h3> <p>To use modules, two install options are: * <a href=https://go.dev/dl/ >Install the latest Go 1.11 release</a>. * <a href=https://go.dev/doc/install/source>Install the Go toolchain from source</a> on the <code>master</code> branch.</p> <p>Once installed, you can then activate module support in one of two ways: * Invoke the <code>go</code> command in a directory outside of the <code>$GOPATH/src</code> tree, with a valid <code>go.mod</code> file in the current directory or any parent of it and the environment variable <code>GO111MODULE</code> unset (or explicitly set to <code>auto</code>). * Invoke the <code>go</code> command with <code>GO111MODULE=on</code> environment variable set.</p> <h3 id=how-to-define-a-module>How to Define a Module<a class=headerlink href=#how-to-define-a-module title="Permanent link"></a></h3> <p>To create a <code>go.mod</code> for an existing project:</p> <ol> <li>Navigate to the root of the module's source tree outside of GOPATH:</li> </ol> <p><div class=highlight><pre><span></span><code>$ cd &lt;project path outside $GOPATH/src&gt;         # e.g., cd ~/projects/hello
</code></pre></div> Note that outside of GOPATH, you do not need to set <code>GO111MODULE</code> to activate module mode.</p> <p>Alternatively, if you want to work in your GOPATH:</p> <div class=highlight><pre><span></span><code>$ export GO111MODULE=on                         # manually active module mode
$ cd $GOPATH/src/&lt;project path&gt;                 # e.g., cd $GOPATH/src/you/hello
</code></pre></div> <ol> <li>Create the initial module definition and write it to the <code>go.mod</code> file:</li> </ol> <div class=highlight><pre><span></span><code>$ go mod init
</code></pre></div> <p><code>go mod init</code> will often be able to use auxiliary data (such as VCS meta-data) to automatically determine the appropriate module path, but if <code>go mod init</code> states it can not automatically determine the module path, or if you need to otherwise override that path, you can supply the <a href=/wiki/Modules#gomod>module path</a> as an optional argument to <code>go mod init</code>, for example:</p> <div class=highlight><pre><span></span><code>$ go mod init github.com/my/repo
</code></pre></div> <p>Note that if your dependencies include v2+ modules, or if you are initializing a v2+ module, then after running <code>go mod init</code> you might also need to edit your <code>go.mod</code> and <code>.go</code> code to add <code>/vN</code> to import paths and module paths as described in the <a href=/wiki/Modules#semantic-import-versioning>"Semantic Import Versioning"</a> section above. This applies even if <code>go mod init</code> automatically converted your dependency information from <code>dep</code> or other dependency managers. (Because of this, after running <code>go mod init</code>, you typically should not run <code>go mod tidy</code> until you have successfully run <code>go build ./...</code> or similar, which is the sequence shown in this section).</p> <p>If used with go 1.21.13 or older, this step also converts from any existing <a href=https://github.com/golang/dep><code>dep</code></a> <code>Gopkg.lock</code> file or any of the other <a href=https://pkg.go.dev/cmd/go/internal/modconv@go1.21.13#pkg-variables>nine total supported dependency formats</a>, adding require statements to match the existing configuration.</p> <ol> <li>Build the module. When executed from the root directory of a module, the <code>./...</code> pattern matches all the packages within the current module. <code>go build</code> will automatically add missing or unconverted dependencies as needed to satisfy imports for this particular build invocation:</li> </ol> <p><div class=highlight><pre><span></span><code>$ go build ./...
</code></pre></div> 4. Test the module as configured to ensure that it works with the selected versions:</p> <div class=highlight><pre><span></span><code>$ go test ./...
</code></pre></div> <ol> <li>(Optional) Run the tests for your module plus the tests for all direct and indirect dependencies to check for incompatibilities:</li> </ol> <div class=highlight><pre><span></span><code>$ go test all
</code></pre></div> <p>Prior to tagging a release, see the <a href=/wiki/Modules#how-to-prepare-for-a-release>"How to Prepare for a Release"</a> section below.</p> <p>For more information on all of these topics, the primary entry point to the official modules documentation is <a href=https://pkg.go.dev/cmd/go/#hdr-Modules__module_versions__and_more>available on golang.org</a>.</p> <h2 id=how-to-upgrade-and-downgrade-dependencies>How to Upgrade and Downgrade Dependencies<a class=headerlink href=#how-to-upgrade-and-downgrade-dependencies title="Permanent link"></a></h2> <p>Day-to-day upgrading and downgrading of dependencies should be done using 'go get', which will automatically update the <code>go.mod</code> file. Alternatively, you can edit <code>go.mod</code> directly.</p> <p>In addition, go commands like 'go build', 'go test', or even 'go list' will automatically add new dependencies as needed to satisfy imports (updating <code>go.mod</code> and downloading the new dependencies).</p> <p>To upgrade a dependency to the latest version: <div class=highlight><pre><span></span><code>go get example.com/package
</code></pre></div></p> <p>To upgrade a dependency <em>and all its dependencies</em> to the latest version: <div class=highlight><pre><span></span><code>go get -u example.com/package
</code></pre></div></p> <p>To view available minor and patch upgrades for all direct and indirect dependencies:</p> <div class=highlight><pre><span></span><code>go list -u -m all
</code></pre></div> <p>To view available minor and patch upgrades <em>only</em> for the direct dependencies, run: <div class=highlight><pre><span></span><code>go list -u -f &#39;{{if (and (not (or .Main .Indirect)) .Update)}}{{.Path}}: {{.Version}} -&gt; {{.Update.Version}}{{end}}&#39; -m all 2&gt; /dev/null
</code></pre></div></p> <p>To upgrade to the latest version for all direct and indirect dependencies of the current module, the following can be run from the module root directory: * <code>go get -u ./...</code> to use the latest <em>minor or patch</em> releases (and add <code>-t</code> to also upgrade test dependencies) * <code>go get -u=patch ./...</code> to use the latest <em>patch</em> releases (and add <code>-t</code> to also upgrade test dependencies)</p> <p><code>go get foo</code> updates to the latest version of <code>foo</code>. <code>go get foo</code> is equivalent to <code>go get foo@latest</code> — in other words, <code>@latest</code> is the default if no <code>@</code> version is specified.</p> <p>In this section, "latest" is the latest version with a <a href=https://semver.org/ >semver</a> tag, or the latest known commit if there are no semver tags. Prerelease tags are not selected as "latest" unless there are no other semver tags on the repository (<a href=https://pkg.go.dev/cmd/go/#hdr-Module_aware_go_get>details</a>).</p> <p>A common mistake is thinking <code>go get -u foo</code> solely gets the latest version of <code>foo</code>. In actuality, the <code>-u</code> in <code>go get -u foo</code> or <code>go get -u foo@latest</code> means to <em>also</em> get the latest versions for <em>all</em> of the direct and indirect dependencies of <code>foo</code>. A common starting point when upgrading <code>foo</code> is instead to do <code>go get foo</code> or <code>go get foo@latest</code> without a <code>-u</code> (and after things are working, consider <code>go get -u=patch foo</code>, <code>go get -u=patch</code>, <code>go get -u foo</code>, or <code>go get -u</code>).</p> <p>To upgrade or downgrade to a more specific version, 'go get' allows version selection to be overridden by adding an <a class="magiclink magiclink-github magiclink-mention" href=https://github.com/version title="GitHub User: version">@version</a> suffix or <a href=https://pkg.go.dev/cmd/go/#hdr-Module_queries>"module query"</a> to the package argument, such as <code>go get foo@v1.6.2</code>, <code>go get foo@e3702bed2</code>, or <code>go get foo@'&lt;v1.6.2'</code>. </p> <p>Using a branch name such as <code>go get foo@master</code> (<code>foo@default</code> with mercurial) is one way to obtain the latest commit regardless of whether or not it has a semver tag.</p> <p>In general, module queries that do not resolve to a semver tag will be recorded as <a href=https://tip.golang.org/cmd/go/#hdr-Pseudo_versions>pseudo-versions</a> in the <code>go.mod</code> file.</p> <p>See the <a href=https://pkg.go.dev/cmd/go/#hdr-Module_aware_go_get>"Module-aware go get"</a> and <a href=https://pkg.go.dev/cmd/go/#hdr-Module_queries>"Module queries"</a> sections of the <code>go</code> command documentation for more information on the topics here.</p> <p>Modules are capable of consuming packages that have not yet opted into modules, including recording any available semver tags in <code>go.mod</code> and using those semver tags to upgrade or downgrade. Modules can also consume packages that do not yet have any proper semver tags (in which case they will be recorded using pseudo-versions in <code>go.mod</code>).</p> <p>After upgrading or downgrading any dependencies, you may then want to run the tests again for all packages in your build (including direct and indirect dependencies) to check for incompatibilities:</p> <div class=highlight><pre><span></span><code>$ go test all
</code></pre></div> <h2 id=how-to-prepare-for-a-release>How to Prepare for a Release<a class=headerlink href=#how-to-prepare-for-a-release title="Permanent link"></a></h2> <h3 id=releasing-modules-all-versions>Releasing Modules (All Versions)<a class=headerlink href=#releasing-modules-all-versions title="Permanent link"></a></h3> <p>Best practices for creating a release of a module are expected to emerge as part of the initial modules experiment. Many of these might end up being automated by a <a href=https://github.com/golang/go/issues/26420>future 'go release' tool</a>.</p> <p>Some current suggested best practices to consider prior to tagging a release:</p> <ul> <li>Run <code>go mod tidy</code> to possibly prune any extraneous requirements (as described <a href=https://tip.golang.org/cmd/go/#hdr-Maintaining_module_requirements>here</a>) and also ensure your current go.mod reflects all possible build tags/OS/architecture combinations (as described <a href=https://github.com/golang/go/issues/25971#issuecomment-399091682>here</a>). </li> <li> <p>In contrast, other commands like <code>go build</code> and <code>go test</code> will not remove dependencies from <code>go.mod</code> that are no longer required and only update <code>go.mod</code> based on the current build invocation's tags/OS/architecture.</p> </li> <li> <p>Run <code>go test all</code> to test your module (including running the tests for your direct and indirect dependencies) as a way of validating that the currently selected package versions are compatible. </p> </li> <li>The number of possible version combinations is exponential in the number of modules, so in general, you cannot expect your dependencies to have tested against all possible combinations of their dependencies.</li> <li> <p>As part of the modules work, <code>go test all</code> has been <a href=https://research.swtch.com/vgo-cmd>re-defined to be more useful</a>: to include all the packages in the current module plus all the packages they depend on through a sequence of one or more imports while excluding packages that don't matter in the current module.</p> </li> <li> <p>Ensure your <code>go.sum</code> file is committed along with your <code>go.mod</code> file. See <a href=/wiki/Modules#should-i-commit-my-gosum-file-as-well-as-my-gomod-file>FAQ below</a> for more details and rationale. </p> </li> </ul> <h3 id=releasing-modules-v2-or-higher>Releasing Modules (v2 or Higher)<a class=headerlink href=#releasing-modules-v2-or-higher title="Permanent link"></a></h3> <p>If you are releasing a v2 or higher module, please first review the discussion in the <a href=/wiki/Modules#semantic-import-versioning>"Semantic Import Versioning" </a> section above, which includes why major versions are included in the module path and import path for v2+ modules, as well as how Go versions 1.9.7+ and 1.10.3+ have been updated to simplify that transition.</p> <p>Note that if you are adopting modules for the first time for a pre-existing repository or set of packages that have already been tagged <code>v2.0.0</code> or higher before adopting modules, then the <a href=https://github.com/golang/go/issues/25967#issuecomment-422828770>recommended best practice</a> is to increment the major version when first adopting modules. For example, if you are the author of <code>foo</code>, and the latest tag for the <code>foo</code> repository is <code>v2.2.2</code>, and <code>foo</code> has not yet adopted modules, then the best practice would be to use <code>v3.0.0</code> for the first release of <code>foo</code> to adopt modules (and hence the first release of <code>foo</code> to contain a <code>go.mod</code> file). Incrementing the major version in this case provides greater clarity to consumers of <code>foo</code>, allows for additional non-module patches or minor releases on the v2 series of <code>foo</code> if needed, and provides a strong signal for a module-based consumer of <code>foo</code> that different major versions result if you do <code>import "foo"</code> and a corresponding <code>require foo v2.2.2+incompatible</code>, vs. <code>import "foo/v3"</code> and a corresponding <code>require foo/v3 v3.0.0</code>. (Note that this advice regarding incrementing the major version when first adopting modules does <em>not</em> apply to pre-existing repos or packages whose latest versions are v0.x.x or v1.x.x).</p> <p>There are two alternative mechanisms to release a v2 or higher module. Note that with both techniques, the new module release becomes available to consumers when the module author pushes the new tags. Using the example of creating a <code>v3.0.0</code> release, the two options are:</p> <ol> <li><strong>Major branch</strong>: Update the <code>go.mod</code> file to include a <code>/v3</code> at the end of the module path in the <code>module</code> directive (e.g., <code>module github.com/my/module/v3</code>). Update import statements within the module to also use <code>/v3</code> (e.g., <code>import "github.com/my/module/v3/mypkg"</code>). Tag the release with <code>v3.0.0</code>. </li> <li>Go versions 1.9.7+, 1.10.3+, and 1.11 are able to properly consume and build a v2+ module created using this approach without requiring updates to consumer code that has not yet opted in to modules (as described in the <a href=/wiki/Modules#semantic-import-versioning>"Semantic Import Versioning"</a> section above). </li> <li>A community tool <a href=https://github.com/marwan-at-work/mod>github.com/marwan-at-work/mod</a> helps automate this procedure. See the <a href=https://github.com/marwan-at-work/mod>repository</a> or the <a href=/wiki/Modules#what-community-tooling-exists-for-working-with-modules>community tooling FAQ</a> below for an overview.</li> <li>To avoid confusion with this approach, consider putting the <code>v3.*.*</code> commits for the module on a separate v3 branch.</li> <li><strong>Note:</strong> creating a new branch is <em>not</em> required. If instead you have been previously releasing on master and would prefer to tag <code>v3.0.0</code> on master, that is a viable option. (However, be aware that introducing an incompatible API change in <code>master</code> can cause issues for non-modules users who issue a <code>go get -u</code> given the <code>go</code> tool is not aware of <a href=https://semver.org>semver</a> prior to Go 1.11 or when <a href=/wiki/Modules#when-do-i-get-old-behavior-vs-new-module-based-behavior>module mode</a> is not enabled in Go 1.11+).</li> <li> <p>Pre-existing dependency management solutions such as <code>dep</code> currently can have problems consuming a v2+ module created in this way. See for example <a href=https://github.com/golang/dep/issues/1962>dep#1962</a>.</p> </li> <li> <p><strong>Major subdirectory</strong>: Create a new <code>v3</code> subdirectory (e.g., <code>my/module/v3</code>) and place a new <code>go.mod</code> file in that subdirectory. The module path must end with <code>/v3</code>. Copy or move the code into the <code>v3</code> subdirectory. Update import statements within the module to also use <code>/v3</code> (e.g., <code>import "github.com/my/module/v3/mypkg"</code>). Tag the release with <code>v3.0.0</code>.</p> </li> <li>This provides greater backwards-compatibility. In particular, Go versions older than 1.9.7 and 1.10.3 are also able to properly consume and build a v2+ module created using this approach.</li> <li>A more sophisticated approach here could exploit type aliases (introduced in Go 1.9) and forwarding shims between major versions residing in different subdirectories. This can provide additional compatibility and allow one major version to be implemented in terms of another major version but would entail more work for a module author. An in-progress tool to automate this is <code>goforward</code>. Please see <a href=https://go.dev/cl/137076>here</a> for more details and rationale, along with a functioning initial version of <code>goforward</code>.</li> <li>Pre-existing dependency management solutions such as <code>dep</code> should be able to consume a v2+ module created in this way. </li> </ol> <p>See <a href=https://research.swtch.com/vgo-module>https://research.swtch.com/vgo-module</a> for a more in-depth discussion of these alternatives.</p> <h3 id=publishing-a-release>Publishing a release<a class=headerlink href=#publishing-a-release title="Permanent link"></a></h3> <p>A new module version may be published by pushing a tag to the repository that contains the module source code. The tag is formed by concatenating two strings: a <em>prefix</em> and a <em>version</em>.</p> <p>The <em>version</em> is the semantic import version for the release. It should be chosen by following the rules of <a href=#semantic-import-versioning>semantic import versioning</a>.</p> <p>The <em>prefix</em> indicates where a module is defined within a repository. If the module is defined at the root of the repository, the prefix is empty, and the tag is just the version. However, in <a href=#faqs--multi-module-repositories>multi-module repositories</a>, the prefix distinguishes versions for different modules. The prefix is the directory within the repository where the module is defined. If the repository follows the major subdirectory pattern described above, the prefix does not include the major version suffix.</p> <p>For example, suppose we have a module <code>example.com/repo/sub/v2</code>, and we want to publish version <code>v2.1.6</code>. The repository root corresponds to <code>example.com/repo</code>, and the module is defined in <code>sub/v2/go.mod</code> within the repository. The prefix for this module is <code>sub/</code>. The full tag for this release should be <code>sub/v2.1.6</code>.</p> <h2 id=migrating-to-modules>Migrating to Modules<a class=headerlink href=#migrating-to-modules title="Permanent link"></a></h2> <p>This section attempts to briefly enumerate the major decisions to be made when migrating to modules as well as list other migration-related topics. References are generally provided to other sections for more details.</p> <p>This material is primarily based on best practices that have emerged from the community as part of the modules experiment; this is, therefore, a work-in-progress section that will improve as the community gains more experience.</p> <p>Summary:</p> <ul> <li>The modules system is designed to allow different packages in the overall Go ecosystem to opt-in at different rates.</li> <li>Packages that are already on version v2 or higher have more migration considerations, primarily due to the implications of <a href=/wiki/Modules#semantic-import-versioning>Semantic Import versioning</a>. </li> <li>New packages and packages on v0 or v1 have substantially fewer considerations when adopting modules.</li> <li>Modules defined with Go 1.11 can be used by older Go versions (although the exact Go versions depend on the strategy used by the main module and its dependencies, as outlined below).</li> </ul> <p>Migration topics:</p> <h4 id=automatic-migration-from-prior-dependency-managers>Automatic Migration from Prior Dependency Managers<a class=headerlink href=#automatic-migration-from-prior-dependency-managers title="Permanent link"></a></h4> <ul> <li>With go 1.21.13 or older, <code>go mod init</code> automatically translates the required information from <a href=https://pkg.go.dev/cmd/go/internal/modconv@go1.21.13#pkg-variables>dep, glide, govendor, godep, and 5 other pre-existing dependency managers</a> into a <code>go.mod</code>file that produces the equivalent build.</li> <li>If you are creating a v2+ module, be sure your <code>module</code> directive in the converted <code>go.mod</code> includes the appropriate <code>/vN</code> (e.g., <code>module foo/v3</code>).</li> <li>Note that if you are importing v2+ modules, you might need to do some manual adjustments after an initial conversion in order to add <code>/vN</code> to the <code>require</code> statements that <code>go mod init</code> generates after translating from a prior dependency manager. See the <a href=/wiki/Modules#how-to-define-a-module>"How to Define a Module"</a> section above for more details.</li> <li>In addition, <code>go mod init</code> will not edit your <code>.go</code> code to add any required <code>/vN</code> to import statements. See the <a href=/wiki/Modules#semantic-import-versioning>"Semantic Import versioning"</a> and <a href=/wiki/Modules#releasing-modules-v2-or-higher>"Releasing Modules (v2 or Higher)"</a> sections above for the required steps, including some options around community tools to automate the conversion.</li> </ul> <h4 id=providing-dependency-information-to-older-versions-of-go-and-non-module-consumers>Providing Dependency Information to Older Versions of Go and Non-Module Consumers<a class=headerlink href=#providing-dependency-information-to-older-versions-of-go-and-non-module-consumers title="Permanent link"></a></h4> <ul> <li>Older versions of Go understand how to consume a vendor directory created by <code>go mod vendor</code>, as do Go 1.11 and 1.12+ when module mode is disabled. Therefore, vendoring is one way for a module to provide dependencies to older versions of Go that do not fully understand modules, as well as to consumers that have not enabled modules themselves. See the <a href=/wiki/Modules#how-do-i-use-vendoring-with-modules-is-vendoring-going-away>vendoring FAQ</a> and the <code>go</code> command <a href=https://tip.golang.org/cmd/go/#hdr-Modules_and_vendoring>documentation</a> for more details.</li> </ul> <h4 id=updating-pre-existing-install-instructions>Updating Pre-Existing Install Instructions<a class=headerlink href=#updating-pre-existing-install-instructions title="Permanent link"></a></h4> <ul> <li>Pre-modules, it is common for install instructions to include <code>go get -u foo</code>. If you are publishing a module <code>foo</code>, consider dropping the <code>-u</code> in instructions for modules-based consumers.<ul> <li><code>-u</code> asks the <code>go</code> tool to upgrade all the direct and indirect dependencies of <code>foo</code>. </li> <li>A module consumer might choose to run <code>go get -u foo</code> later, but there are more benefits of <a href=https://github.com/golang/proposal/blob/master/design/24301-versioned-go.md#update-timing--high-fidelity-builds>"High Fidelity Builds"</a> if <code>-u</code> is not part of the initial install instructions. See <a href=/wiki/Modules#how-to-upgrade-and-downgrade-dependencies>"How to Upgrade and Downgrade Dependencies"</a> for more details.</li> <li><code>go get -u foo</code> does still work, and can still be a valid choice for install instructions.</li> </ul> </li> <li>In addition, <code>go get foo</code> is not strictly needed for a module-based consumer. <ul> <li>Simply adding an import statement <code>import "foo"</code> is sufficient. (Subsequent commands like <code>go build</code> or <code>go test</code> will automatically download <code>foo</code> and update <code>go.mod</code> as needed).</li> </ul> </li> <li>Module-based consumers will not use a <code>vendor</code> directory by default. <ul> <li>When module mode is enabled in the <code>go</code> tool, <code>vendor</code> is not strictly required when consuming a module (given the information contained in <code>go.mod</code> and the cryptographic checksums in <code>go.sum</code>), but some pre-existing install instructions assume the <code>go</code> tool will use <code>vendor</code> by default. See the <a href=/wiki/Modules#how-do-i-use-vendoring-with-modules-is-vendoring-going-away>vendoring FAQ</a> for more details.</li> </ul> </li> <li>Install instructions that include <code>go get foo/...</code> might have issues in some cases (see discussion in <a href=https://github.com/golang/go/issues/27215#issuecomment-427672781>#27215</a>).</li> </ul> <h4 id=avoid-breaking-existing-import-paths>Avoid Breaking Existing Import Paths<a class=headerlink href=#avoid-breaking-existing-import-paths title="Permanent link"></a></h4> <p>A module declares its identity in its <code>go.mod</code> via the <code>module</code> directive, such as <code>module github.com/my/module</code>. All packages within the module must be imported by any module-aware consumer with import paths that match the module's declared module path (either exactly for a root package, or with the module path as a prefix of the import path). The <code>go</code> command reports an <code>unexpected module path</code> error if there is a mismatch between an import path vs. the corresponding module's declared module path.</p> <p>When adopting modules for a pre-existing set of packages, care should be taken to avoid breaking existing import paths used by existing consumers, unless you are incrementing your major version when adopting modules. </p> <p>For example, if your pre-existing README has been telling consumers to use <code>import "gopkg.in/foo.v1"</code>, and if you then adopt modules with a v1 release, your initial <code>go.mod</code> should almost certainly read <code>module gopkg.in/foo.v1</code>. If you wanted to move away from using <code>gopkg.in</code>, that would be a breaking change for your current consumers. One approach would be to change to something like <code>module github.com/repo/foo/v2</code> if you later move to v2.</p> <p>Note that module paths and import paths are case-sensitive. Changing a module from <code>github.com/Sirupsen/logrus</code> to <code>github.com/sirupsen/logrus</code>, for example, is a breaking change for consumers, even if GitHub automatically forwards from one repository name to the new repository name.</p> <p>After you have adopted modules, changing your module path in your <code>go.mod</code> is a breaking change.</p> <p>Overall, this is similar to the pre-modules enforcement of a canonical import path via <a href=https://pkg.go.dev/cmd/go/#hdr-Import_path_checking>"import path comments"</a>, which are also sometimes called "import pragmas" or "import path enforcement". As an example, the package <code>go.uber.org/zap</code> is currently hosted at <code>github.com/uber-go/zap</code>, but uses an import path comment <a href=https://github.com/uber-go/zap/blob/8a2ee5670ced5d94154bf385dc6a362722945daf/doc.go#L113>next to the package declaration</a> that triggers an error for any pre-modules consumer using the wrong github-based import path:</p> <p><code>package zap // import "go.uber.org/zap"</code></p> <p>Import path comments are obsoleted by the go.mod file's module statement.</p> <h4 id=incrementing-the-major-version-when-first-adopting-modules-with-v2-packages>Incrementing the Major Version When First Adopting Modules with v2+ Packages<a class=headerlink href=#incrementing-the-major-version-when-first-adopting-modules-with-v2-packages title="Permanent link"></a></h4> <ul> <li>If you have packages that have already been tagged v2.0.0 or higher before adopting modules, then the recommended best practice is to increment the major version when first adopting modules. For example, if you are on <code>v2.0.1</code> and have not yet adopted modules, then you would use <code>v3.0.0</code> for the first release that adopts modules. See the <a href=/wiki/Modules#releasing-modules-v2-or-higher>"Releasing Modules (v2 or Higher)"</a> section above for more details.</li> </ul> <h4 id=v2-modules-allow-multiple-major-versions-within-a-single-build>v2+ Modules Allow Multiple Major Versions Within a Single Build<a class=headerlink href=#v2-modules-allow-multiple-major-versions-within-a-single-build title="Permanent link"></a></h4> <ul> <li>If a module is on v2 or higher, an implication is that multiple major versions can be in a single build (e.g., <code>foo</code> and <code>foo/v3</code> might end up in a single build).</li> <li>This flows naturally from the rule that "packages with different import paths are different packages".</li> <li>When this happens, there will be multiple copies of package-level state (e.g., package-level state for <code>foo</code> and package-level state for <code>foo/v3</code>) as well as each major version will run its own <code>init</code> function.</li> <li>This approach helps with multiple aspects of the modules system, including helping with diamond dependency problems, gradual migration to new versions within large codebases, and allowing a major version to be implemented as a shim around a different major version.</li> <li>See the "Avoiding Singleton Problems" section of <a href=https://research.swtch.com/vgo-import>https://research.swtch.com/vgo-import</a> or <a href=https://github.com/golang/go/issues/27514>#27514</a> for some related discussion.</li> </ul> <h4 id=modules-consuming-non-module-code>Modules Consuming Non-Module Code<a class=headerlink href=#modules-consuming-non-module-code title="Permanent link"></a></h4> <ul> <li>Modules are capable of consuming packages that have not yet opted into modules, with the appropriate package version information recorded in the importing module's <code>go.mod</code>. Modules can consume packages that do not yet have any proper semver tags. See FAQ <a href=/wiki/Modules#can-a-module-consume-a-package-that-has-not-opted-in-to-modules>below</a> for more details.</li> <li>Modules can also import a v2+ package that has not opted into modules. It will be recorded with a <code>+incompatible</code> suffix if the imported v2+ package has valid semver tags. See FAQ <a href=/wiki/Modules#can-a-module-consume-a-v2-package-that-has-not-opted-into-modules-what-does-incompatible-mean>below</a> for more details.</li> </ul> <h4 id=non-module-code-consuming-modules>Non-Module Code Consuming Modules<a class=headerlink href=#non-module-code-consuming-modules title="Permanent link"></a></h4> <ul> <li> <p><strong>Non-module code consuming v0 and v1 modules</strong>: </p> <ul> <li>Code that has not yet opted in to modules can consume and build v0 and v1 modules (without any requirement related to the Go version used).</li> </ul> </li> <li> <p><strong>Non-module code consuming v2+ modules</strong>:</p> <ul> <li> <p>Go versions 1.9.7+, 1.10.3+ and 1.11 have been updated so that code built with those releases can properly consume v2+ modules without requiring modification of pre-existing code as described in the <a href=/wiki/Modules#semantic-import-versioning>"Semantic Import versioning"</a> and <a href=/wiki/Modules#releasing-modules-v2-or-higher>"Releasing Modules (v2 or Higher)"</a> sections above.</p> </li> <li> <p>Go versions prior to 1.9.7 and 1.10.3 can consume v2+ modules if the v2+ module was created following the "Major subdirectory" approach outlined in the <a href=/wiki/Modules#releasing-modules-v2-or-higher>"Releasing Modules (v2 or Higher)"</a> section.</p> </li> </ul> </li> </ul> <h4 id=strategies-for-authors-of-pre-existing-v2-packages>Strategies for Authors of Pre-Existing v2+ Packages<a class=headerlink href=#strategies-for-authors-of-pre-existing-v2-packages title="Permanent link"></a></h4> <p>For authors of pre-existing v2+ packages considering opting in to modules, one way to summarize the alternative approaches is as a choice between three top-level strategies. Each choice then has follow-on decisions and variations (as outlined above). These alternative top-level strategies are:</p> <ol> <li> <p><strong>Require clients to use Go versions 1.9.7+, 1.10.3+, or 1.11+</strong>. </p> <p>The approach uses the "Major Branch" approach and relies on the "minimal module awareness" that was backported to 1.9.7 and 1.10.3. See the <a href=/wiki/Modules#semantic-import-versioning>"Semantic Import versioning"</a> and <a href=/wiki/Modules#releasing-modules-v2-or-higher>"Releasing Modules (v2 or Higher)"</a> sections above for more details.</p> </li> <li> <p><strong>Allow clients to use even older Go versions like Go 1.8</strong>. </p> <p>This approach uses the "Major Subdirectory" approach and involves creating a subdirectory such as <code>/v2</code> or <code>/v3</code>. See the <a href=/wiki/Modules#semantic-import-versioning>"Semantic Import versioning"</a> and <a href=/wiki/Modules#releasing-modules-v2-or-higher>"Releasing Modules (v2 or Higher)"</a> sections above for more details.</p> </li> <li> <p><strong>Wait on opting into modules</strong>. </p> <p>In this strategy, things continue to work with client code that has opted into modules as well as with client code that has not opted into modules. As time goes by, Go versions 1.9.7+, 1.10.3+, and 1.11+ will be out for an increasingly longer time period, and at some point in the future, it becomes more natural or client-friendly to require Go versions 1.9.7+/1.10.3+/1.11+, and at that point in time, you can implement strategy 1 above (requiring Go versions 1.9.7+, 1.10.3+, or 1.11+) or even strategy 2 above (though if you are ultimately going to go with strategy 2 above in order to support older Go versions like 1.8, then that is something you can do now).</p> </li> </ol> <h2 id=additional-resources>Additional Resources<a class=headerlink href=#additional-resources title="Permanent link"></a></h2> <h3 id=documentation-and-proposal>Documentation and Proposal<a class=headerlink href=#documentation-and-proposal title="Permanent link"></a></h3> <ul> <li>Official documentation:</li> <li>Latest <a href=https://pkg.go.dev/cmd/go/#hdr-Modules__module_versions__and_more>HTML documentation for modules on golang.org</a></li> <li>Run <code>go help modules</code> for more about modules. (This is the main entry point for modules topics via <code>go help</code>)</li> <li>Run <code>go help mod</code> for more about the <code>go mod</code> command.</li> <li>Run <code>go help module-get</code> for more about the behavior of <code>go get</code> when in module-aware mode.</li> <li>Run <code>go help goproxy</code> for more about the module proxy, including a pure file-based option via a <code>file:///</code> URL.</li> <li>The initial <a href=https://research.swtch.com/vgo>"Go &amp; Versioning"</a> series of blog posts on <code>vgo</code> by Russ Cox (first posted February 20, 2018)</li> <li>Official <a href=https://go.dev/blog/versioning-proposal>golang.org blog post introducing the proposal</a> (March 26, 2018)</li> <li>This provides a more succinct overview of the proposal than the full <code>vgo</code> blog series, along with some of the history and process behind the proposal</li> <li>Official <a href=https://go.dev/design/24301-versioned-go>Versioned Go Modules Proposal</a> (last updated March 20, 2018)</li> </ul> <h3 id=introductory-material>Introductory Material<a class=headerlink href=#introductory-material title="Permanent link"></a></h3> <ul> <li>Introductory 40-minute video <a href="https://www.youtube.com/watch?v=F8nrpe0XWRg&list=PLq2Nv-Sh8EbbIjQgDzapOFeVfv5bGOoPE&index=3&t=0s">"The Principles of Versions in Go"</a> from GopherCon Singapore by Russ Cox (May 2, 2018)</li> <li>Succinctly covers the philosophy behind the design of versioned Go modules, including the three core principles of "Compatibility", "Repeatability", and "Cooperation"</li> <li>Example based 35-minute introductory video <a href="https://www.youtube.com/watch?v=6MbIzJmLz6Q&list=PL8QGElREVyDA2iDrPNeCe8B1u7li5S6ep&index=5&t=0s">"What are Go modules and how do I use them?"</a> (<a href=https://talks.godoc.org/github.com/myitcv/talks/2018-08-15-glug-modules/main.slide#1>slides</a>) by Paul Jolly (August 15, 2018)</li> <li>Introductory blog post <a href=https://dave.cheney.net/2018/07/14/taking-go-modules-for-a-spin>"Taking Go Modules for a Spin"</a> by Dave Cheney (July 14, 2018)</li> <li>Introductory <a href="https://docs.google.com/presentation/d/1ansfXN8a_aVL-QuvQNY7xywnS78HE8aG7fPiITNQWMM/edit#slide=id.g3d87f3177d_0_0">Go Meetup slides on modules</a> by Chris Hines (July 16, 2018)</li> <li>Introductory 30-minute video <a href="https://www.youtube.com/watch?v=aeF3l-zmPsY">"Intro to Go Modules and SemVer"</a> by Francesc Campoy (Nov 15, 2018)</li> </ul> <h3 id=additional-material>Additional Material<a class=headerlink href=#additional-material title="Permanent link"></a></h3> <ul> <li>Blog post <a href=https://arslan.io/2018/08/26/using-go-modules-with-vendor-support-on-travis-ci/ >"Using Go modules with vendor support on Travis CI"</a> by Fatih Arslan (August 26, 2018)</li> <li>Blog post <a href=https://medium.com/@toddkeech/go-modules-and-circleci-c0d6fac0b000>"Go Modules and CircleCI"</a> by Todd Keech (July 30, 2018)</li> <li>Blog post <a href=https://research.swtch.com/vgo-accepted>"The vgo proposal is accepted. Now what?"</a> by Russ Cox (May 29, 2018)</li> <li>Includes a summary of what it means that versioned modules are currently an experimental opt-in feature</li> <li>Blog post on <a href=https://carolynvanslyck.com/blog/2018/07/building-go-from-source/ >how to build go from tip and start using go modules</a> by Carolyn Van Slyck (July 16, 2018)</li> </ul> <h2 id=changes-since-the-initial-vgo-proposal>Changes Since the Initial Vgo Proposal<a class=headerlink href=#changes-since-the-initial-vgo-proposal title="Permanent link"></a></h2> <p>As part of the proposal, prototype, and beta processes, there have been over 400 issues created by the overall community. Please continue to supply feedback. </p> <p>Here is a partial list of some of the larger changes and improvements, almost all of which were primarily based on feedback from the community:</p> <ul> <li>Top-level vendor support was retained rather than vgo-based builds ignoring vendor directories entirely (<a href=https://groups.google.com/d/msg/golang-dev/FTMScX1fsYk/uEUSjBAHAwAJ>discussion</a>, <a href=https://go-review.googlesource.com/c/vgo/+/118316>CL</a>)</li> <li>Backported minimal module-awareness to allow older Go versions 1.9.7+ and 1.10.3+ to more easily consume modules for v2+ projects (<a href=https://github.com/golang/go/issues/24301#issuecomment-371228742>discussion</a>, <a href=https://go.dev/cl/109340>CL</a>)</li> <li>Allowed vgo to use v2+ tags by default for pre-existing packages did not yet have a go.mod (recent update in related behavior described <a href=https://github.com/golang/go/issues/25967#issuecomment-407567904>here</a>)</li> <li>Added support via command <code>go get -u=patch</code> to update all transitive dependencies to the latest available patch-level versions on the same minor version (<a href=https://research.swtch.com/vgo-cmd>discussion</a>, <a href=https://tip.golang.org/cmd/go/#hdr-Module_aware_go_get>documentation</a>)</li> <li>Additional control via environmental variables (e.g., GOFLAGS in <a href=https://github.com/golang/go/issues/26585>#26585</a>, <a href=https://go-review.googlesource.com/c/go/+/126656>CL</a>)</li> <li>Finer grain control on whether or not go.mod is allowed to be updated, how vendor directory is used, and whether or not network access is allowed (e.g., -mod=readonly, -mod=vendor, GOPROXY=off; related <a href=https://go-review.googlesource.com/c/go/+/126696>CL</a> for a recent change)</li> <li>Added more flexible replace directives (<a href=https://go-review.googlesource.com/c/vgo/+/122400>CL</a>)</li> <li>Added additional ways to interrogate modules (for human consumption, as well as for better editor / IDE integration)</li> <li>The UX of the go CLI has continued to be refined based on experiences so far (e.g., <a href=https://github.com/golang/go/issues/26581>#26581</a>, <a href=https://go-review.googlesource.com/c/go/+/126655>CL</a>)</li> <li>Additional support for warming caches for use cases such as CI or docker builds via <code>go mod download</code> (<a href=https://github.com/golang/go/issues/26610#issuecomment-408654653>#26610</a>)</li> <li><strong>Most likely</strong>: better support for installing specific versions of programs to GOBIN (<a href=https://github.com/golang/go/issues/24250#issuecomment-377553022>#24250</a>)</li> </ul> <h2 id=github-issues>GitHub Issues<a class=headerlink href=#github-issues title="Permanent link"></a></h2> <ul> <li><a href="https://go.dev/issues?q=is%3Aopen+is%3Aissue+label:modules">Currently open module issues</a></li> <li><a href="https://github.com/golang/go/issues?q=is%3Aclosed+is%3Aissue+label%3Amodules+sort%3Aupdated-desc">Closed module issues</a></li> <li><a href="https://github.com/golang/go/issues?q=-label%3Amodules+vgo+is%3Aclosed+sort%3Aupdated-desc">Closed vgo issues</a></li> <li>Submit a <a href="https://github.com/golang/go/issues/new?title=cmd%2Fgo%3A%20%3Cfill%20this%20in%3E">new module issue</a> using 'cmd/go:' as the prefix</li> </ul> <h2 id=faqs>FAQs<a class=headerlink href=#faqs title="Permanent link"></a></h2> <h3 id=how-are-versions-marked-as-incompatible>How are versions marked as incompatible?<a class=headerlink href=#how-are-versions-marked-as-incompatible title="Permanent link"></a></h3> <p>The <code>require</code> directive allows any module to declare that it should be built with version &gt;= x.y.z of a dependency D (which may be specified due to incompatibilities with version &lt; x.y.z of module D). Empirical data suggests <a href=https://twitter.com/_rsc/status/1022590868967116800>this is the dominant form of constraints used in <code>dep</code> and <code>cargo</code></a>. In addition, the top-level module in the build can <code>exclude</code> specific versions of dependencies or <code>replace</code> other modules with different code. See the full proposal for <a href=https://github.com/golang/proposal/blob/master/design/24301-versioned-go.md>more details and rationale</a>.</p> <p>One of the key goals of the versioned modules proposal is to add a common vocabulary and semantics around versions of Go code for both tools and developers. This lays a foundation for future capabilities to declare additional forms of incompatibilities, such as possibly: * declaring deprecated versions as <a href=https://research.swtch.com/vgo-module>described</a> in the initial <code>vgo</code> blog series * declaring pair-wise incompatibility between modules in an external system as discussed for example <a href=https://github.com/golang/go/issues/24301#issuecomment-392111327>here</a> during the proposal process * declaring pair-wise incompatible versions or insecure versions of a module after a release has been published. See for example the on-going discussion in <a href=https://github.com/golang/go/issues/24031#issuecomment-407798552>#24031</a> and <a href=https://github.com/golang/go/issues/26829>#26829</a></p> <h3 id=when-do-i-get-old-behavior-vs-new-module-based-behavior>When do I get old behavior vs. new module-based behavior?<a class=headerlink href=#when-do-i-get-old-behavior-vs-new-module-based-behavior title="Permanent link"></a></h3> <p>In general, modules are opt-in for Go 1.11, so by design old behavior is preserved by default.</p> <p>Summarizing when you get the old 1.10 status quo behavior vs. the new opt-in modules-based behavior:</p> <ul> <li>Inside GOPATH — defaults to old 1.10 behavior (ignoring modules)</li> <li>Outside GOPATH while inside a file tree with a <code>go.mod</code> — defaults to modules behavior</li> <li>GO111MODULE environment variable:</li> <li>unset or <code>auto</code> — default behavior above</li> <li><code>on</code> — force module support on regardless of directory location</li> <li><code>off</code> — force module support off regardless of directory location</li> </ul> <h3 id=why-does-installing-a-tool-via-go-get-fail-with-error-cannot-find-main-module>Why does installing a tool via <code>go get</code> fail with error <code>cannot find main module</code>?<a class=headerlink href=#why-does-installing-a-tool-via-go-get-fail-with-error-cannot-find-main-module title="Permanent link"></a></h3> <p>This occurs when you have set <code>GO111MODULE=on</code>, but are not inside of a file tree with a <code>go.mod</code> when you run <code>go get</code>.</p> <p>The simplest solution is to leave <code>GO111MODULE</code> unset (or equivalently explicitly set to <code>GO111MODULE=auto</code>), which avoids this error.</p> <p>Recall one of the primary reason modules exist is to record precise dependency information. This dependency information is written to your current <code>go.mod</code>. If you are not inside of a file tree with a <code>go.mod</code> but you have told the <code>go get</code> command to operate in module mode by setting <code>GO111MODULE=on</code>, then running <code>go get</code> will result in the error <code>cannot find main module</code> because there is no <code>go.mod</code> available to record dependency information.</p> <p>Solution alternatives include:</p> <ol> <li> <p>Leave <code>GO111MODULE</code> unset (the default, or explicitly set <code>GO111MODULE=auto</code>), which results in friendlier behavior. This will give you Go 1.10 behavior when you are outside of a module and hence will avoid <code>go get</code> reporting <code>cannot find main module</code>.</p> </li> <li> <p>Leave <code>GO111MODULE=on</code>, but as needed disable modules temporarily and enable Go 1.10 behavior during <code>go get</code>, such as via <code>GO111MODULE=off go get example.com/cmd</code>. This can be turned into a simple script or shell alias such as <code>alias oldget='GO111MODULE=off go get'</code></p> </li> <li> <p>Create a temporary <code>go.mod</code> file that is then discarded. This has been automated by a <a href=https://gist.github.com/rogpeppe/7de05eef4dd774056e9cf175d8e6a168>simple shell script</a> by <a href=https://github.com/rogpeppe>@rogpeppe</a>. This script allows version information to optionally be supplied via <code>vgoget example.com/cmd[@version]</code>. (This can be a solution for avoiding the error <code>cannot use path@version syntax in GOPATH mode</code>).</p> </li> <li> <p><code>gobin</code> is a module-aware command to install and run main packages. By default, <code>gobin</code> installs/runs main packages without first needing to manually create a module, but with the <code>-m</code> flag it can be told to use an existing module to resolve dependencies. Please see the <code>gobin</code> <a href=https://github.com/myitcv/gobin#usage>README</a> and <a href=https://github.com/myitcv/gobin/wiki/FAQ>FAQ</a> for details and additional use cases.</p> </li> <li> <p>Create a <code>go.mod</code> you use to track your globally installed tools, such as in <code>~/global-tools/go.mod</code>, and <code>cd</code> to that directory prior to running <code>go get</code> or <code>go install</code> for any globally installed tools. </p> </li> <li> <p>Create a <code>go.mod</code> for each tool in separate directories, such as <code>~/tools/gorename/go.mod</code> and <code>~/tools/goimports/go.mod</code>, and <code>cd</code> to that appropriate directory prior to running <code>go get</code> or <code>go install</code> for the tool. </p> </li> </ol> <p>This current limitation will be resolved. However, the primary issue is that modules are currently opt-in, and a full solution will likely wait until GO111MODULE=on becomes the default behavior. See <a href=https://github.com/golang/go/issues/24250#issuecomment-377553022>#24250</a> for more discussion, including this comment:</p> <blockquote> <p>This clearly must work eventually. The thing I'm not sure about is exactly what this does as far as the version is concerned: does it create a temporary module root and go.mod, do the install, and then throw it away? Probably. But I'm not completely sure, and for now, I didn't want to confuse people by making vgo do things outside go.mod trees. Certainly, the eventual go command integration has to support this.</p> </blockquote> <p>This FAQ has been discussing tracking <em>globally</em> installed tools.</p> <p>If instead, you want to track the tools required by a <em>specific</em> module, see the next FAQ.</p> <h3 id=how-can-i-track-tool-dependencies-for-a-module>How can I track tool dependencies for a module?<a class=headerlink href=#how-can-i-track-tool-dependencies-for-a-module title="Permanent link"></a></h3> <p>If you: * want to use a go-based tool (e.g. <code>stringer</code>) while working on a module, and * want to ensure that everyone is using the same version of that tool while tracking the tool's version in your module's <code>go.mod</code> file</p> <p>then in Go 1.24 and above, you can add a <a href=https://go.dev/doc/modules/managing-dependencies#tools><code>tool</code> directive</a> to your go.mod: <div class=highlight><pre><span></span><code>go 1.24

...

tool golang.org/x/tools/cmd/stringer
</code></pre></div></p> <p>Before Go 1.24 the recommended approach was to add a <code>tools.go</code> file to your module that includes import statements for the tools of interest (such as <code>import _ "golang.org/x/tools/cmd/stringer"</code>), along with a <code>//go:build tools</code> build constraint. The import statements allow the <code>go</code> command to precisely record the version information for your tools in your module's <code>go.mod</code>, while the <code>//go:build tools</code> build constraint prevents your normal builds from actually importing your tools.</p> <p>For a concrete example of how to do this, please see this <a href=https://github.com/go-modules-by-example/index/blob/master/010_tools/README.md>"Go Modules by Example" walkthrough</a>.</p> <p>You can also (since go 1.16) use <code>go install tool@version</code>, which will install a specific version, or (since go 1.17) <code>go run tool@version</code>, which will run the tool without installing, as implemented in <a href=https://github.com/golang/go/issues/42088>#42088</a> and <a href=https://github.com/golang/go/issues/40276>#40276</a>, which can eliminate the need for tools.go.</p> <h3 id=what-is-the-status-of-module-support-in-ides-editors-and-standard-tools-like-goimports-gorename-etc>What is the status of module support in IDEs, editors and standard tools like goimports, gorename, etc?<a class=headerlink href=#what-is-the-status-of-module-support-in-ides-editors-and-standard-tools-like-goimports-gorename-etc title="Permanent link"></a></h3> <p>Support for modules is starting to land in editors and IDEs. </p> <p>For example: * <strong>GoLand</strong>: currently has full support for modules outside and inside GOPATH, including completion, syntax analysis, refactoring, navigation as described <a href=https://blog.jetbrains.com/go/2018/08/24/goland-2018-2-2-is-here/ >here</a>. * <strong>VS Code</strong>: work is complete, MS recommending modules over GOPATH, the former tracking issue (<a href=https://github.com/Microsoft/vscode-go/issues/1532>#1532</a>) has been closed. Documentation is available in the <a href=https://github.com/golang/vscode-go>VS Code module repository</a>. * <strong>Atom with go-plus</strong>: tracking issue is <a href=https://github.com/joefitzgerald/go-plus/issues/761>#761</a>. * <strong>vim with vim-go</strong>: initial support for syntax highlighting and formatting <code>go.mod</code> has <a href=https://github.com/fatih/vim-go/pull/1931>landed</a>. Broader support tracked in <a href=https://github.com/fatih/vim-go/issues/1906>#1906</a>. * <strong>emacs with go-mode.el</strong>: tracking issue in <a href=https://github.com/dominikh/go-mode.el/issues/237>#237</a>.</p> <p>The status of other tools such as goimports, guru, gorename and similar tools is being tracked in an umbrella issue <a href=https://github.com/golang/go/issues/24661>#24661</a>. Please see that umbrella issue for latest status.</p> <p>Some tracking issues for particular tools include: * <strong>gocode</strong>: tracking issue in <a href=https://github.com/mdempsky/gocode/issues/46>mdempsky/gocode/#46</a>. Note that <code>nsf/gocode</code> is recommending people migrate off of <code>nsf/gocode</code> to <code>mdempsky/gocode</code>. * <strong>go-tools</strong> (tools by dominikh such as staticcheck, megacheck, gosimple): sample tracking issue <a href=https://github.com/dominikh/go-tools/issues/328>dominikh/go-tools#328</a>.</p> <p>In general, even if your editor, IDE or other tools have not yet been made module aware, much of their functionality should work with modules if you are using modules inside GOPATH and do <code>go mod vendor</code> (because then the proper dependencies should be picked up via GOPATH).</p> <p>The full fix is to move programs that load packages off of <code>go/build</code> and onto <code>golang.org/x/tools/go/packages</code>, which understands how to locate packages in a module-aware manner. This will likely eventually become <code>go/packages</code>.</p> <h2 id=faqs--additional-control>FAQs — Additional Control<a class=headerlink href=#faqs--additional-control title="Permanent link"></a></h2> <h3 id=what-community-tooling-exists-for-working-with-modules>What community tooling exists for working with modules?<a class=headerlink href=#what-community-tooling-exists-for-working-with-modules title="Permanent link"></a></h3> <p>The community is starting to build tooling on top of modules. For example:</p> <ul> <li><a href=https://github.com/rogpeppe/gohack>github.com/rogpeppe/gohack</a></li> <li>A new community tool to automate and greatly simplify <code>replace</code> and multi-module workflows, including allowing you to easily modify one of your dependencies </li> <li>For example, <code>gohack example.com/some/dependency</code> automatically clones the appropriate repository and adds the necessary <code>replace</code> directives to your <code>go.mod</code></li> <li>Remove all gohack replace statements with <code>gohack undo</code></li> <li>The project is continuing to expand to make other module-related workflows easier</li> <li><a href=https://github.com/marwan-at-work/mod>github.com/marwan-at-work/mod</a></li> <li>Command line tool to automatically upgrade/downgrade major versions for modules</li> <li>Automatically adjusts <code>go.mod</code> files and related import statements in go source code</li> <li>Helps with upgrades, or when first opting into modules with a v2+ package</li> <li><a href=https://github.com/akyoto/mgit>github.com/akyoto/mgit</a></li> <li>Lets you view &amp; control semver tags of all of your local projects</li> <li>Shows untagged commits and lets you tag them all at once (<code>mgit -tag +0.0.1</code>)</li> <li><a href=https://github.com/goware/modvendor>github.com/goware/modvendor</a></li> <li>Helps copy additional files into the <code>vendor/</code> folder, such as shell scripts, .cpp files, .proto files, etc.</li> <li><a href=https://github.com/psampaz/go-mod-outdated>github.com/psampaz/go-mod-outdated</a></li> <li>Displays outdated dependencies in a human friendly way </li> <li>Provides a way to filter indirect dependencies and dependencies without updates</li> <li>Provides a way to break CI pipelines in case of outdated dependencies</li> <li><a href=https://github.com/oligot/go-mod-upgrade>github.com/oligot/go-mod-upgrade</a></li> <li>Update outdated Go dependencies interactively</li> </ul> <h3 id=when-should-i-use-the-replace-directive>When should I use the replace directive?<a class=headerlink href=#when-should-i-use-the-replace-directive title="Permanent link"></a></h3> <p>As described in the <a href=/wiki/Modules#gomod>'go.mod' concepts section above</a>, <code>replace</code> directives provide additional control in the top-level <code>go.mod</code> for what is actually used to satisfy a dependency found in the Go source or go.mod files, while <code>replace</code> directives in modules other than the main module are ignored when building the main module.</p> <p>The <code>replace</code> directive allows you to supply another import path that might be another module located in VCS (GitHub or elsewhere), or on your local filesystem with a relative or absolute file path. The new import path from the <code>replace</code> directive is used without needing to update the import paths in the actual source code.</p> <p><code>replace</code> allows the top-level module control over the exact version used for a dependency, such as: * <code>replace example.com/some/dependency =&gt; example.com/some/dependency v1.2.3</code></p> <p><code>replace</code> also allows the use of a forked dependency, such as: * <code>replace example.com/some/dependency =&gt; example.com/some/dependency-fork v1.2.3</code></p> <p>You can also reference branches, for example: * <code>replace example.com/some/dependency =&gt; example.com/some/dependency-fork master</code></p> <p>One sample use case is if you need to fix or investigate something in a dependency, you can have a local fork and add something like the following in your top-level <code>go.mod</code>: * <code>replace example.com/original/import/path =&gt; /your/forked/import/path</code></p> <p><code>replace</code> also can be used to inform the go tooling of the relative or absolute on-disk location of modules in a multi-module project, such as: * <code>replace example.com/project/foo =&gt; ../foo</code></p> <p><strong>Note</strong>: if the right-hand side of a <code>replace</code> directive is a filesystem path, then the target must have a <code>go.mod</code> file at that location. If the <code>go.mod</code> file is not present, you can create one with <code>go mod init</code>.</p> <p>In general, you have the option of specifying a version to the left of the <code>=&gt;</code> in a replace directive, but typically it is less sensitive to change if you omit that (e.g., as done in all of the <code>replace</code> examples above).</p> <p>A <code>require</code> directive is needed for each <code>replace</code> directive of a direct dependency. When replacing a dependency from a filesystem path, the version of the corresponding require directive is essentially ignored; in this case, the pseudoversion <code>v0.0.0</code> is a good choice to make this clear, e.g. <code>require example.com/module v0.0.0</code>. </p> <p>You can confirm you are getting your expected versions by running <code>go list -m all</code>, which shows you the actual final versions that will be used in your build including taking into account <code>replace</code> statements.</p> <p>See the <a href=https://pkg.go.dev/cmd/go/#hdr-Edit_go_mod_from_tools_or_scripts>'go mod edit' documentation</a> for more details.</p> <p><a href=https://github.com/rogpeppe/gohack>github.com/rogpeppe/gohack</a> makes these types of workflows much easier, especially if your goal is to have mutable checkouts of dependencies of a module. See the <a href=https://github.com/rogpeppe/gohack>repository</a> or the immediately prior FAQ for an overview.</p> <p>See the next FAQ for the details of using <code>replace</code> to work entirely outside of VCS.</p> <h3 id=can-i-work-entirely-outside-of-vcs-on-my-local-filesystem>Can I work entirely outside of VCS on my local filesystem?<a class=headerlink href=#can-i-work-entirely-outside-of-vcs-on-my-local-filesystem title="Permanent link"></a></h3> <p>Yes. VCS is not required. </p> <p>This is very simple if you have a single module you want to edit at a time outside of VCS (and you either have only one module in total, or if the other modules reside in VCS). In this case, you can place the file tree containing the single <code>go.mod</code> in a convenient location. Your <code>go build</code>, <code>go test</code> and similar commands will work even if your single module is outside of VCS (without requiring any use of <code>replace</code> in your <code>go.mod</code>).</p> <p>If you want to have multiple inter-related modules on your local disk that you want to edit at the same time, then <code>replace</code> directives are one approach. Here is a sample <code>go.mod</code> that uses a <code>replace</code> with a relative path to point the <code>hello</code> module at the on-disk location of the <code>goodbye</code> module (without relying on any VCS):</p> <div class=highlight><pre><span></span><code>module example.com/me/hello

require (
  example.com/me/goodbye v0.0.0
)

replace example.com/me/goodbye =&gt; ../goodbye
</code></pre></div> <p>A small runnable example is shown in this <a href=https://groups.google.com/d/msg/golang-nuts/1nYoAMFZVVM/eppaRW2rCAAJ>thread</a>.</p> <h3 id=how-do-i-use-vendoring-with-modules-is-vendoring-going-away>How do I use vendoring with modules? Is vendoring going away?<a class=headerlink href=#how-do-i-use-vendoring-with-modules-is-vendoring-going-away title="Permanent link"></a></h3> <p>The initial series of <code>vgo</code> blog posts did propose dropping vendoring entirely, but <a href=https://groups.google.com/d/msg/golang-dev/FTMScX1fsYk/uEUSjBAHAwAJ>feedback</a> from the community resulted in retaining support for vendoring.</p> <p>In brief, to use vendoring with modules: * <code>go mod vendor</code> resets the main module's vendor directory to include all packages needed to build and test all of the module's packages based on the state of the go.mod files and Go source code. * By default, go commands like <code>go build</code> ignore the vendor directory when in module mode. * The <code>-mod=vendor</code> flag (e.g., <code>go build -mod=vendor</code>) instructs the go commands to use the main module's top-level vendor directory to satisfy dependencies. The go commands in this mode therefore ignore the dependency descriptions in go.mod and assume that the vendor directory holds the correct copies of dependencies. Note that only the main module's top-level vendor directory is used; vendor directories in other locations are still ignored. * Some people will want to routinely opt-in to vendoring by setting a <code>GOFLAGS=-mod=vendor</code> environment variable.</p> <p>Older versions of Go such as 1.10 understand how to consume a vendor directory created by <code>go mod vendor</code>, as do Go 1.11 and 1.12+ when <a href=/wiki/Modules#when-do-i-get-old-behavior-vs-new-module-based-behavior>module mode</a> is disabled. Therefore, vendoring is one way for a module to provide dependencies to older versions of Go that do not fully understand modules, as well as to consumers that have not enabled modules themselves. </p> <p>If you are considering using vendoring, it is worthwhile to read the <a href=https://tip.golang.org/cmd/go/#hdr-Modules_and_vendoring>"Modules and vendoring"</a> and <a href=https://tip.golang.org/cmd/go/#hdr-Make_vendored_copy_of_dependencies>"Make vendored copy of dependencies"</a> sections of the tip documentation.</p> <h3 id=are-there-always-on-module-repositories-and-enterprise-proxies>Are there "always on" module repositories and enterprise proxies?<a class=headerlink href=#are-there-always-on-module-repositories-and-enterprise-proxies title="Permanent link"></a></h3> <p>Publicly hosted "always on" immutable module repositories and optional privately hosted proxies and repositories are becoming available.</p> <p>For example: * <a href=https://proxy.golang.org>proxy.golang.org</a> - Official project - Run by <a href=https://www.google.com>Google</a> - The default Go module proxy built by the Go team. * <a href=https://proxy.golang.com.cn>proxy.golang.com.cn</a> - China proxy project - Run by <a href=https://golangcn.org>China Golang Contributor Club</a> - China Go module proxy. * <a href=https://mirrors.tencent.com/go/ >mirrors.tencent.com/go</a> - Commercial project - Run by <a href=https://cloud.tencent.com/ >Tencent Cloud</a> - A Go module proxy alternate. * <a href=https://mirrors.aliyun.com/goproxy>mirrors.aliyun.com/goproxy</a> - Commercial project - Run by <a href=https://www.alibabacloud.com>Alibaba Cloud</a> - A Go module proxy alternate. * <a href=https://goproxy.cn>goproxy.cn</a> - Open source project - Run by <a href=https://www.qiniu.com>Qiniu Cloud</a> - The most trusted Go module proxy in China. * <a href=https://goproxy.io>goproxy.io</a> - Open source project - Run by <a href=https://golangcn.org>China Golang Contributor Club</a> - A global proxy for Go modules. * <a href=https://github.com/gomods/athens>Athens</a> - Open source project - Self-hosted - A Go module datastore and proxy. * <a href=https://github.com/goproxy/goproxy>Goproxy</a> - Open source project - Self-hosted - A minimalist Go module proxy handler. * <a href=https://thumbai.app>THUMBAI</a> - Open source project - Self-hosted - Go mod proxy server and Go vanity import path server.</p> <p>Note that you are not required to run a proxy. Rather, the go tooling in 1.11 has added optional proxy support via <a href=https://tip.golang.org/cmd/go/#hdr-Module_proxy_protocol>GOPROXY</a> to enable more enterprise use cases (such as greater control), and also to better handle situations such as "GitHub is down" or people deleting GitHub repositories.</p> <h3 id=can-i-control-when-gomod-gets-updated-and-when-the-go-tools-use-the-network-to-satisfy-dependencies>Can I control when go.mod gets updated and when the go tools use the network to satisfy dependencies?<a class=headerlink href=#can-i-control-when-gomod-gets-updated-and-when-the-go-tools-use-the-network-to-satisfy-dependencies title="Permanent link"></a></h3> <p>By default, a command like <code>go build</code> will reach out to the network as needed to satisfy imports.</p> <p>Some teams will want to disallow the go tooling from touching the network at certain points, or will want greater control regarding when the go tooling updates <code>go.mod</code>, how dependencies are obtained, and how vendoring is used.</p> <p>The go tooling provides a fair amount of flexibility to adjust or disable these default behaviors, including via <code>-mod=readonly</code>, <code>-mod=vendor</code>, <code>GOFLAGS</code>, <code>GOPROXY=off</code>, <code>GOPROXY=file:///filesystem/path</code>, <code>go mod vendor</code>, and <code>go mod download</code>.</p> <p>The details on these options are spread throughout the official documentation. One community attempt at a consolidated overview of knobs related to these behaviors is <a href=https://github.com/thepudds/go-module-knobs/blob/master/README.md>here</a>, which includes links to the official documentation for more information.</p> <h3 id=how-do-i-use-modules-with-ci-systems-such-as-travis-or-circleci>How do I use modules with CI systems such as Travis or CircleCI?<a class=headerlink href=#how-do-i-use-modules-with-ci-systems-such-as-travis-or-circleci title="Permanent link"></a></h3> <p>The simplest approach is likely just setting the environment variable <code>GO111MODULE=on</code>, which should work with most CI systems.</p> <p>However, it can be valuable to run tests in CI on Go 1.11 with modules enabled as well as disabled, given some of your users will not have yet opted in to modules themselves. Vendoring is also a topic to consider.</p> <p>The following two blog posts cover these topics more concretely:</p> <ul> <li><a href=https://arslan.io/2018/08/26/using-go-modules-with-vendor-support-on-travis-ci/ >"Using Go modules with vendor support on Travis CI"</a> by Fatih Arslan </li> <li><a href=https://medium.com/@toddkeech/go-modules-and-circleci-c0d6fac0b000>"Go Modules and CircleCI"</a> by Todd Keech </li> </ul> <h3 id=how-do-i-download-modules-needed-to-build-specific-packages-or-tests>How do I download modules needed to build specific packages or tests?<a class=headerlink href=#how-do-i-download-modules-needed-to-build-specific-packages-or-tests title="Permanent link"></a></h3> <p>The <code>go mod download</code> command (or equivalently, <code>go mod download all</code>) downloads all modules in the build list (as reported by <code>go list -m all</code>). Many of these modules aren't needed to build packages in the main module, since the full build list contains things like test dependencies and tool dependencies for other modules. Consequently, Docker images prepared with <code>go mod download</code> may be larger than necessary.</p> <p>Instead, consider using <code>go list</code>. For example, <code>go list ./...</code> will download the modules needed to build the packages <code>./...</code> (the set of packages in the main module, when run from the module root directory).</p> <p>To download test dependencies as well, use <code>go list -test ./...</code>.</p> <p>By default, <code>go list</code> will only consider dependencies needed for the current platform. You can set <code>GOOS</code> and <code>GOARCH</code> to make <code>go list</code> consider another platform, for example, <code>GOOS=linux GOARCH=amd64 go list ./...</code>. The <code>-tags</code> flag may also be used to select packages with specific build tags.</p> <p>This technique may be less necessary in the future when lazy module loading is implemented (see <a href=https://github.com/golang/go/issues/36460>#36460</a>), since the module pattern <code>all</code> will include fewer modules.</p> <h2 id=faqs--gomod-and-gosum>FAQs — go.mod and go.sum<a class=headerlink href=#faqs--gomod-and-gosum title="Permanent link"></a></h2> <h3 id=why-does-go-mod-tidy-record-indirect-and-test-dependencies-in-my-gomod>Why does 'go mod tidy' record indirect and test dependencies in my 'go.mod'?<a class=headerlink href=#why-does-go-mod-tidy-record-indirect-and-test-dependencies-in-my-gomod title="Permanent link"></a></h3> <p>The modules system records precise dependency requirements in your <code>go.mod</code>. (For more details, see the <a href=/wiki/Modules#gomod>go.mod concepts</a> section above or the <a href=https://tip.golang.org/cmd/go/#hdr-The_go_mod_file>go.mod tip documentation</a>).</p> <p><code>go mod tidy</code> updates your current <code>go.mod</code> to include the dependencies needed for tests in your module — if a test fails, we must know which dependencies were used in order to reproduce the failure.</p> <p><code>go mod tidy</code> also ensures your current <code>go.mod</code> reflects the dependency requirements for all possible combinations of OS, architecture, and build tags (as described <a href=https://github.com/golang/go/issues/25971#issuecomment-399091682>here</a>). In contrast, other commands like <code>go build</code> and <code>go test</code> only update <code>go.mod</code> to provide the packages imported by the requested packages under the current <code>GOOS</code>, <code>GOARCH</code>, and build tags (which is one reason <code>go mod tidy</code> might add requirements that were not added by <code>go build</code> or similar).</p> <p>If a dependency of your module does not itself have a <code>go.mod</code> (e.g., because the dependency has not yet opted in to modules itself), or if its <code>go.mod</code> file is missing one or more of its dependencies (e.g., because the module author did not run <code>go mod tidy</code>), then the missing transitive dependencies will be added to <em>your</em> module's requirements, along with an <code>// indirect</code> comment to indicate that the dependency is not from a direct import within your module. </p> <p>Note that this also means that any missing test dependencies from your direct or indirect dependencies will also be recorded in your <code>go.mod</code>. (An example of when this is important: <code>go test all</code> runs the tests of <em>all</em> direct and indirect dependencies of your module, which is one way to validate that your current combination of versions work together. If a test fails in one of your dependencies when you run <code>go test all</code>, it is important to have a complete set of test dependency information recorded so that you have reproducible <code>go test all</code> behavior).</p> <p>Another reason you might have <code>// indirect</code> dependencies in your <code>go.mod</code> file is if you have upgraded (or downgraded) one of your indirect dependencies beyond what is required by your direct dependencies, such as if you ran <code>go get -u</code> or <code>go get foo@1.2.3</code>. The go tooling needs a place to record those new versions, and it does so in your <code>go.mod</code> file (and it does not reach down into your dependencies to modify <em>their</em> <code>go.mod</code> files).</p> <p>In general, the behaviors described above are part of how modules provide 100% reproducible builds and tests by recording precise dependency information.</p> <p>If you are curious as to why a particular module is showing up in your <code>go.mod</code>, you can run <code>go mod why -m &lt;module&gt;</code> to <a href=https://tip.golang.org/cmd/go/#hdr-Explain_why_packages_or_modules_are_needed>answer</a> that question. Other useful tools for inspecting requirements and versions include <code>go mod graph</code> and <code>go list -m all</code>.</p> <h3 id=is-gosum-a-lock-file-why-does-gosum-include-information-for-module-versions-i-am-no-longer-using>Is 'go.sum' a lock file? Why does 'go.sum' include information for module versions I am no longer using?<a class=headerlink href=#is-gosum-a-lock-file-why-does-gosum-include-information-for-module-versions-i-am-no-longer-using title="Permanent link"></a></h3> <p>No, <code>go.sum</code> is not a lock file. The <code>go.mod</code> files in a build provide enough information for 100% reproducible builds.</p> <p>For validation purposes, <code>go.sum</code> contains the expected cryptographic checksums of the content of specific module versions. See the <a href=/wiki/Modules#should-i-commit-my-gosum-file-as-well-as-my-gomod-file>FAQ below</a> for more details on <code>go.sum</code> (including why you typically should check in <code>go.sum</code>) as well as the <a href=https://tip.golang.org/cmd/go/#hdr-Module_downloading_and_verification>"Module downloading and verification"</a> section in the tip documentation.</p> <p>In addition, your module's <code>go.sum</code> records checksums for all direct and indirect dependencies used in a build (and hence your <code>go.sum</code> will frequently have more modules listed than your <code>go.mod</code>).</p> <h3 id=should-i-commit-my-gosum-file-as-well-as-my-gomod-file>Should I commit my 'go.sum' file as well as my 'go.mod' file?<a class=headerlink href=#should-i-commit-my-gosum-file-as-well-as-my-gomod-file title="Permanent link"></a></h3> <p>Typically your module's <code>go.sum</code> file should be committed along with your <code>go.mod</code> file. </p> <ul> <li><code>go.sum</code> contains the expected cryptographic checksums of the content of specific module versions.</li> <li>If someone clones your repository and downloads your dependencies using the go command, they will receive an error if there is any mismatch between their downloaded copies of your dependencies and the corresponding entries in your <code>go.sum</code>.</li> <li>In addition, <code>go mod verify</code> checks that the on-disk cached copies of module downloads still match the entries in <code>go.sum</code>.</li> <li>Note that <code>go.sum</code> is not a lock file as used in some alternative dependency management systems. (<code>go.mod</code> provides enough information for reproducible builds).</li> <li>See very brief <a href=https://twitter.com/FiloSottile/status/1029404663358087173>rationale here</a> from Filippo Valsorda on why you should check in your <code>go.sum</code>. See the <a href=https://tip.golang.org/cmd/go/#hdr-Module_downloading_and_verification>"Module downloading and verification"</a> section of the tip documentation for more details. See possible future extensions being discussed for example in <a href=https://github.com/golang/go/issues/24117>#24117</a> and <a href=https://github.com/golang/go/issues/25530>#25530</a>.</li> </ul> <h3 id=should-i-still-add-a-gomod-file-if-i-do-not-have-any-dependencies>Should I still add a 'go.mod' file if I do not have any dependencies?<a class=headerlink href=#should-i-still-add-a-gomod-file-if-i-do-not-have-any-dependencies title="Permanent link"></a></h3> <p>Yes. This supports working outside of GOPATH, helps communicate to the ecosystem that you are opting in to modules, and in addition the <code>module</code> directive in your <code>go.mod</code> serves as a definitive declaration of the identity of your code (which is one reason why import comments might eventually be deprecated). Of course, modules are purely an opt-in capability in Go 1.11.</p> <h2 id=faqs--semantic-import-versioning>FAQs — Semantic Import Versioning<a class=headerlink href=#faqs--semantic-import-versioning title="Permanent link"></a></h2> <h3 id=why-must-major-version-numbers-appear-in-import-paths>Why must major version numbers appear in import paths?<a class=headerlink href=#why-must-major-version-numbers-appear-in-import-paths title="Permanent link"></a></h3> <p>Please see the discussion on the Semantic Import Versioning and the import compatibility rule in the <a href=/wiki/Modules#semantic-import-versioning>"Semantic Import Versioning"</a> concepts section above. See also the <a href=https://go.dev/blog/versioning-proposal>blog post announcing the proposal</a>, which talks more about the motivation and justification for the import compatibility rule.</p> <h3 id=why-are-major-versions-v0-v1-omitted-from-import-paths>Why are major versions v0, v1 omitted from import paths?"<a class=headerlink href=#why-are-major-versions-v0-v1-omitted-from-import-paths title="Permanent link"></a></h3> <p>Please see the question "Why are major versions v0, v1 omitted from import paths?" in the earlier <a href=https://github.com/golang/go/issues/24301#issuecomment-371228664>FAQ from the official proposal discussion</a>.</p> <h3 id=what-are-some-implications-of-tagging-my-project-with-major-version-v0-v1-or-making-breaking-changes-with-v2>What are some implications of tagging my project with major version v0, v1, or making breaking changes with v2+?<a class=headerlink href=#what-are-some-implications-of-tagging-my-project-with-major-version-v0-v1-or-making-breaking-changes-with-v2 title="Permanent link"></a></h3> <p>In response to a comment about <em>"k8s does minor releases but changes the Go API in each minor release"</em>, Russ Cox made the following <a href=https://github.com/kubernetes/kubernetes/pull/65683#issuecomment-403705882>response</a> that highlights some implications for picking v0, v1, vs. frequently making breaking changes with v2, v3, v4, etc. with your project:</p> <blockquote> <p>I don't fully understand the k8s dev cycle etc, but I think generally the k8s team needs to decide/confirm what they intend to guarantee to users about stability and then apply version numbers accordingly to express that.</p> <ul> <li>To make a promise about API compatibility (which seems like the best user experience!) then start doing that and use 1.X.Y.</li> <li>To have the flexibility to make backwards-incompatible changes in every release but allow different parts of a large program to upgrade their code on different schedules, meaning different parts can use different major versions of the API in one program, then use X.Y.0, along with import paths like k8s.io/client/vX/foo.</li> <li>To make no promises about API compatible and also require every build to have only one copy of the k8s libraries no matter what, with the implied forcing of all parts of a build to use the same version even if not all of them are ready for it, then use 0.X.Y.</li> </ul> </blockquote> <p>On a related note, Kubernetes has some atypical build approaches (currently including custom wrapper scripts on top of godep), and hence Kubernetes is an imperfect example for many other projects, but it will likely be an interesting example as <a href=https://github.com/kubernetes/kubernetes/pull/64731#issuecomment-407345841>Kubernetes moves towards adopting Go 1.11 modules</a>. </p> <h3 id=can-a-module-consume-a-package-that-has-not-opted-in-to-modules>Can a module consume a package that has not opted in to modules?<a class=headerlink href=#can-a-module-consume-a-package-that-has-not-opted-in-to-modules title="Permanent link"></a></h3> <p>Yes.</p> <p>If a repository has not opted in to modules but has been tagged with valid <a href=https://semver.org>semver</a> tags (including the required leading <code>v</code>), then those semver tags can be used in a <code>go get</code>, and a corresponding semver version will be record in the importing module's <code>go.mod</code> file. If the repository does not have any valid semver tags, then the repository's version will be recorded with a <a href=https://pkg.go.dev/cmd/go/#hdr-Pseudo_versions>"pseudo-version"</a> such as <code>v0.0.0-20171006230638-a6e239ea1c69</code> (which includes a timestamp and a commit hash, and which are designed to allow a total ordering across versions recorded in <code>go.mod</code> and to make it easier to reason about which recorded versions are "later" than another recorded version).</p> <p>For example, if the latest version of package <code>foo</code> is tagged <code>v1.2.3</code> but <code>foo</code> has not itself opted in to modules, then running <code>go get foo</code> or <code>go get foo@v1.2.3</code> from inside module M will be recorded in module M's <code>go.mod</code> file as:</p> <div class=highlight><pre><span></span><code>require  foo  v1.2.3
</code></pre></div> <p>The <code>go</code> tool will also use available semver tags for a non-module package in additional workflows (such as <code>go list -u=patch</code>, which upgrades the dependencies of a module to available patch releases, or <code>go list -u -m all</code>, which shows available upgrades, etc.).</p> <p>Please see the next FAQs for additional details related to v2+ packages that have not opted in to modules.</p> <h3 id=can-a-module-consume-a-v2-package-that-has-not-opted-into-modules-what-does-incompatible-mean>Can a module consume a v2+ package that has not opted into modules? What does '+incompatible' mean?<a class=headerlink href=#can-a-module-consume-a-v2-package-that-has-not-opted-into-modules-what-does-incompatible-mean title="Permanent link"></a></h3> <p>Yes, a module can import a v2+ package that has not opted into modules, and if the imported v2+ package has a valid <a href=https://semver.org>semver</a> tag, it will be recorded with a <code>+incompatible</code> suffix.</p> <p><strong>Additional Details</strong></p> <p>Please be familiar with the material in the <a href=/wiki/Modules#semantic-import-versioning>"Semantic Import Versioning"</a> section above.</p> <p>It is helpful to first review some core principles that are generally useful but particularly important to keep in mind when thinking about the behavior described in this FAQ.</p> <p>The following core principles are <em>always</em> true when the <code>go</code> tool is operating in module mode (e.g., <code>GO111MODULE=on</code>):</p> <ol> <li>A package's import path defines the identity of the package.</li> <li>Packages with <em>different</em> import paths are treated as <em>different</em> packages.</li> <li>Packages with the <em>same</em> import path are treated as the <em>same</em> package (and this is true <em>even if</em> the VCS tags say the packages have different major versions).</li> <li>An import path without a <code>/vN</code> is treated as a v1 or v0 module (and this is true <em>even if</em> the imported package has not opted in to modules and has VCS tags that say the major version is greater than 1).</li> <li>The module path (such as <code>module foo/v2</code>) declared at the start of a module's <code>go.mod</code> file is both:</li> <li>the definitive declaration of that module's identity</li> <li>the definitive declaration of how that module must be imported by consuming code</li> </ol> <p>As we will see in the next FAQ, these principles are not always true when the <code>go</code> tool is <em>not</em> in module mode, but these principles are always true when the <code>go</code> tool <em>is</em> in module mode.</p> <p>In short, the <code>+incompatible</code> suffix indicates that principle 2 above is in effect when the following are true: * an imported package has not opted in to modules, and * its VCS tags say the major version is greater than 1, and * principle 2 is overriding the VCS tags – the import path without a <code>/vN</code> is treated as a v1 or v0 module (even though the VCS tags say otherwise)</p> <p>When the <code>go</code> tool is in module mode, it will assume a non-module v2+ package has no awareness of Semantic Import Versioning and treat it as an (incompatible) extension of the v1 version series of the package (and the <code>+incompatible</code> suffix is an indication that the <code>go</code> tool is doing so).</p> <p><strong>Example</strong></p> <p>Suppose: * <code>oldpackage</code> is a package that predates the introduction of modules * <code>oldpackage</code> has never opted in to modules (and hence does not have a <code>go.mod</code> itself) * <code>oldpackage</code> has a valid semver tag <code>v3.0.1</code>, which is its latest tag</p> <p>In this case, running for example <code>go get oldpackage@latest</code> from inside module M will record the following in module M's <code>go.mod</code> file:</p> <div class=highlight><pre><span></span><code>require  oldpackage  v3.0.1+incompatible
</code></pre></div> <p>Note that there is no <code>/v3</code> used at the end of <code>oldpackage</code> in the <code>go get</code> command above or in the recorded <code>require</code> directive – using <code>/vN</code> in module paths and import paths is a feature of <a href=/wiki/Modules#semantic-import-versioning>Semantic Import Versioning</a>, and <code>oldpackage</code> has not signaled its acceptance and understanding of Semantic Import Versioning given <code>oldpackage</code> has not opted into modules by having a <code>go.mod</code> file within <code>oldpackage</code> itself. In other words, even though <code>oldpackage</code> has a <a href=https://semver.org>semver</a> tag of <code>v3.0.1</code>, <code>oldpackage</code> is not granted the rights and responsibilities of <a href=/wiki/Modules#semantic-import-versioning>Semantic Import Versioning</a> (such as using <code>/vN</code> in import paths) because <code>oldpackage</code> has not yet stated its desire to do so.</p> <p>The <code>+incompatible</code> suffix indicates that the <code>v3.0.1</code> version of <code>oldpackage</code> has not actively opted in to modules, and hence the <code>v3.0.1</code> version of <code>oldpackage</code> is assumed to <em>not</em> understand Semantic Import Versioning or how to use major versions in import paths. Therefore, when operating in <a href=/wiki/Modules#when-do-i-get-old-behavior-vs-new-module-based-behavior>module mode</a>, the <code>go</code> tool will treat the non-module <code>v3.0.1</code> version of <code>oldpackage</code> as an (incompatible) extension of the v1 version series of <code>oldpackage</code> and assume that the <code>v3.0.1</code> version of <code>oldpackage</code> has no awareness of Semantic Import Versioning, and the <code>+incompatible</code> suffix is an indication that the <code>go</code> tool is doing so. </p> <p>The fact that the <code>v3.0.1</code> version of <code>oldpackage</code> is considered to be part of the v1 release series according to Semantic Import Versioning means for example that versions <code>v1.0.0</code>, <code>v2.0.0</code>, and <code>v3.0.1</code> are all always imported using the same import path:</p> <div class=highlight><pre><span></span><code>import  &quot;oldpackage&quot;
</code></pre></div> <p>Note again that there is no <code>/v3</code> used at the end of <code>oldpackage</code>.</p> <p>In general, packages with different import paths are different packages. In this example, given versions <code>v1.0.0</code>, <code>v2.0.0</code>, and <code>v3.0.1</code> of <code>oldpackage</code> would all be imported using the same import path, they are therefore treated by a build as the same package (again because <code>oldpackage</code> has not yet opted in to Semantic Import Versioning), with a single copy of <code>oldpackage</code> ending up in any given build. (The version used will be the semantically highest of the versions listed in any <code>require</code> directives; see <a href=/wiki/Modules#version-selection>"Version Selection"</a>).</p> <p>If we suppose that later a new <code>v4.0.0</code> release of <code>oldpackage</code> is created that adopts modules and hence contains a <code>go.mod</code> file, that is the signal that <code>oldpackage</code> now understands the rights and responsibilities of Semantic Import Versioning, and hence a module-based consumer would now import using <code>/v4</code> in the import path:</p> <div class=highlight><pre><span></span><code>import  &quot;oldpackage/v4&quot;
</code></pre></div> <p>and the version would be recorded as:</p> <div class=highlight><pre><span></span><code>require  oldpackage/v4  v4.0.0
</code></pre></div> <p><code>oldpackage/v4</code> is now a different import path than <code>oldpackage</code>, and hence a different package. Two copies (one for each import path) would end up in a module-aware build if some consumers in the build have <code>import "oldpackage/v4"</code> while other consumers in the same build have <code>import "oldpackage"</code>. This is desirable as part of the strategy to allow gradual adoption of modules. In addition, even after modules are out of their current transitional phase, this behavior is also desirable to allow gradual code evolution over time with different consumers upgrading at different rates to newer versions (e.g., allowing different consumers in a large build to choose to upgrade at different rates from <code>oldpackage/v4</code> to some future <code>oldpackage/v5</code>).</p> <h3 id=how-are-v2-modules-treated-in-a-build-if-modules-support-is-not-enabled-how-does-minimal-module-compatibility-work-in-197-1103-and-111>How are v2+ modules treated in a build if modules support is not enabled? How does "minimal module compatibility" work in 1.9.7+, 1.10.3+, and 1.11?<a class=headerlink href=#how-are-v2-modules-treated-in-a-build-if-modules-support-is-not-enabled-how-does-minimal-module-compatibility-work-in-197-1103-and-111 title="Permanent link"></a></h3> <p>When considering older Go versions or Go code that has not yet opted in to modules, Semantic Import Versioning has significant backwards-compatibility implications related to v2+ modules.</p> <p>As described in the <a href=/wiki/Modules#semantic-import-versioning>"Semantic Import Versioning"</a> section above: * a module that is version v2 or higher must include a <code>/vN</code> in its own module path declared in its <code>go.mod</code>.<br> * a module-based consumer (that is, code that has opted in to modules) must include a <code>/vN</code> in the import path to import a v2+ module. </p> <p>However, the ecosystem is expected to proceed at varying paces of adoption for modules and Semantic Import Versioning.</p> <p>As described in more detail in the <a href=/wiki/Modules#releasing-modules-v2-or-higher>"How to Release a v2+ Module"</a> section, in the "Major Subdirectory" approach, the author of a v2+ module creates subdirectories such as <code>mymodule/v2</code> or <code>mymodule/v3</code> and moves or copies the appropriate packages underneath those subdirectories. This means the traditional import path logic (even in older Go releases such as Go 1.8 or 1.7) will find the appropriate packages upon seeing an import statement such as <code>import "mymodule/v2/mypkg"</code>. Hence, packages residing in a "Major Subdirectory" v2+ module will be found and used even if modules support is not enabled (whether that is because you are running Go 1.11 and have not enabled modules, or because you are running a older version like Go 1.7, 1.8, 1.9 or 1.10 that does not have full module support). Please see the <a href=/wiki/Modules#releasing-modules-v2-or-higher>"How to Release a v2+ Module"</a> section for more details on the "Major Subdirectory" approach.</p> <p>The remainder of this FAQ is focused on the "Major Branch" approach described in the <a href=/wiki/Modules#releasing-modules-v2-or-higher>"How to Release a v2+ Module"</a> section. In the "Major Branch" approach, no <code>/vN</code> subdirectories are created and instead the module version information is communicated by the <code>go.mod</code> file and by applying semver tags to commits (which often will be on <code>master</code>, but could be on different branches).</p> <p>In order to help during the current transitional period, "minimal module compatibility" was <a href=https://go-review.googlesource.com/c/go/+/109340>introduced</a> to Go 1.11 to provide greater compatibility for Go code that has not yet opted in to modules, and that "minimal module compatibility" was also backported to Go 1.9.7 and 1.10.3 (where those versions are effectively always operating with full module mode disabled given those older Go versions do not have full module support).</p> <p>The primary goals of "minimal module compatibility" are:</p> <ol> <li> <p>Allow older Go versions 1.9.7+ and 1.10.3+ to be able to more easily compile modules that are using Semantic Import Versioning with <code>/vN</code> in import paths, and provide that same behavior when <a href=/wiki/Modules#when-do-i-get-old-behavior-vs-new-module-based-behavior>module mode</a> is disabled in Go 1.11.</p> </li> <li> <p>Allow old code to be able to consume a v2+ module without requiring that old consumer code to immediately change to using a new <code>/vN</code> import path when consuming a v2+ module. </p> </li> <li> <p>Do so without relying on the module author to create <code>/vN</code> subdirectories.</p> </li> </ol> <p><strong>Additional Details – "Minimal Module Compatibility"</strong></p> <p>"Minimal module compatibility" only takes effect when full <a href=/wiki/Modules#when-do-i-get-old-behavior-vs-new-module-based-behavior>module mode</a> is disabled for the <code>go</code> tool, such as if you have set <code>GO111MODULE=off</code> in Go 1.11, or are using Go versions 1.9.7+ or 1.10.3+.</p> <p>When a v2+ module author has <em>not</em> created <code>/v2</code> or <code>/vN</code> subdirectories and you are instead relying on the "minimal module compatibility" mechanism in Go 1.9.7+, 1.10.3+ and 1.11:</p> <ul> <li>A package that has <em>not</em> opted in to modules would <em>not</em> include the major version in the import path for any imported v2+ modules. </li> <li>In contrast, a package that <em>has</em> opted in to modules <em>must</em> include the major version in the import path to import any v2+ modules. </li> <li>If a package has opted in to modules, but does not include the major version in the import path when importing a v2+ modules, it will not import a v2+ version of that module when the <code>go</code> tool is operating in full module mode. (A package that has opted in to modules is assumed to "speak" Semantic Import Versioning. If <code>foo</code> is a module with v2+ versions, then under Semantic Import Versioning saying <code>import "foo"</code> means import the v1 Semantic Import Versioning series of <code>foo</code>). </li> <li>The mechanism used to implement "minimal module compatibility" is intentionally very narrow:</li> <li>The entirety of the logic is – when operating in GOPATH mode, an unresolvable import statement containing a <code>/vN</code> will be tried again after removing the <code>/vN</code> if the import statement is inside code that has opted in to modules (that is, import statements in <code>.go</code> files within a tree with a valid <code>go.mod</code> file). </li> <li>The net effect is that an import statement such as <code>import "foo/v2"</code> within code that lives inside of a module will still compile correctly in GOPATH mode in 1.9.7+, 1.10.3+ and 1.11, and it will resolve as if it said <code>import "foo"</code> (without the <code>/v2</code>), which means it will use the version of <code>foo</code> that resides in your GOPATH without being confused by the extra <code>/v2</code>.</li> <li>"Minimal module compatibility" does not affect anything else, including it does not the affect paths used in the <code>go</code> command line (such as arguments to <code>go get</code> or <code>go list</code>).</li> <li>This transitional "minimal module awareness" mechanism purposefully breaks the rule of "packages with different import paths are treated as different packages" in pursuit a very specific backwards-compatibility goal – to allow old code to compile unmodified when it is consuming a v2+ module. In slightly more detail:</li> <li>It would be a more burdensome for the overall ecosystem if the only way for old code to consume a v2+ module was to first change the old code. </li> <li>If we are not modifying old code, then that old code must work with pre-module import paths for v2+ modules.</li> <li>On the other hand, new or updated code opting in to modules must use the new <code>/vN</code> import for v2+ modules.</li> <li>The new import path is not equal to old import path, yet both are allowed to work in a single build, and therefore we have two different functioning import paths that resolve to the same package.</li> <li>For example, when operating in GOPATH mode, <code>import "foo/v2"</code> appearing in module-based code resolves to the same code residing in your GOPATH as <code>import "foo"</code>, and the build ends up with one copy of <code>foo</code> – in particular, whatever version is on disk in GOPATH. This allows module-based code with <code>import "foo/v2"</code> to compile even in GOPATH mode in 1.9.7+, 1.10.3+ and 1.11.</li> <li>In contrast, when the <code>go</code> tool is operating in full module mode:</li> <li>There are no exceptions to the rule "packages with different import paths are different packages" (including vendoring has been refined in full module mode to also adhere to this rule).</li> <li>For example, if the <code>go</code> tool is in full module mode and <code>foo</code> is a v2+ module, then <code>import "foo"</code> is asking for a v1 version of <code>foo</code> vs. <code>import "foo/v2"</code> is asking for a v2 version of <code>foo</code>.</li> </ul> <h3 id=what-happens-if-i-create-a-gomod-but-do-not-apply-semver-tags-to-my-repository>What happens if I create a go.mod but do not apply semver tags to my repository?<a class=headerlink href=#what-happens-if-i-create-a-gomod-but-do-not-apply-semver-tags-to-my-repository title="Permanent link"></a></h3> <p><a href=https://semver.org>semver</a> is a foundation of the modules system. In order to provide the best experience for consumers, module authors are encouraged to apply semver VCS tags (e.g., <code>v0.1.0</code> or <code>v1.2.3-rc.1</code>), but semver VCS tags are not strictly required:</p> <ol> <li> <p>Modules are required to follow the <em>semver specification</em> in order for the <code>go</code> command to behave as documented. This includes following the semver specification regarding how and when breaking changes are allowed.</p> </li> <li> <p>Modules that do not have semver <em>VCS tags</em> are recorded by consumers using a semver version in the form of a <a href=https://tip.golang.org/cmd/go/#hdr-Pseudo_versions>pseudo-version</a>. Typically this will be a v0 major version, unless the module author constructed a v2+ module following the <a href=/wiki/Modules#releasing-modules-v2-or-higher>"Major Subdirectory"</a> approach.</p> </li> <li> <p>Therefore, modules that do not apply semver VCS tags and have not created a "Major Subdirectory" are effectively declaring themselves to be in the semver v0 major version series, and a module-based consumer will treat them as having a semver v0 major version.</p> </li> </ol> <h3 id=can-a-module-depend-on-a-different-version-of-itself>Can a module depend on a different version of itself?<a class=headerlink href=#can-a-module-depend-on-a-different-version-of-itself title="Permanent link"></a></h3> <p>A module can depend on a different major version of itself: by-and-large, this is comparable to depending on a different module. This can be useful for different reasons, including to allow a major version of a module to be implemented as a shim around a different major version.</p> <p>In addition, a module can depend on a different major version of itself in a cycle, just as two completely different modules can depend on each other in a cycle.</p> <p>However, if you are not expecting a module to depend on a different version of itself, it can be a sign of a mistake. For example, .go code intending to import a package from a v3 module might be missing the required <code>/v3</code> in the import statement. That mistake can manifest as a v3 module depending on the v1 version of itself. </p> <p>If you are surprised to see a module to depend on a different version of itself, it can be worthwhile to review the <a href=/wiki/Modules#semantic-import-versioning>"Semantic Import Versioning"</a> section above along with the FAQ <a href=/wiki/Modules#what-can-i-check-if-i-am-not-seeing-the-expected-version-of-a-dependency>"What can I check if I am not seeing the expected version of a dependency?"</a>.</p> <p>It continues to be a constraint that two <em>packages</em> may not depend on each other in a cycle.</p> <h2 id=faqs--multi-module-repositories>FAQS — Multi-Module Repositories<a class=headerlink href=#faqs--multi-module-repositories title="Permanent link"></a></h2> <h3 id=what-are-multi-module-repositories>What are multi-module repositories?<a class=headerlink href=#what-are-multi-module-repositories title="Permanent link"></a></h3> <p>A multi-module repository is a repository that contains multiple modules, each with its own go.mod file. Each module starts at the directory containing its go.mod file, and contains all packages from that directory and its subdirectories recursively, excluding any subtree that contains another go.mod file.</p> <p>Each module has its own version information. Version tags for modules below the root of the repository must include the relative directory as a prefix. For example, consider the following repository:</p> <div class=highlight><pre><span></span><code>my-repo
`-- foo
    `-- rop
        `-- go.mod
</code></pre></div> <p>The tag for version 1.2.3 of module "my-repo/foo/rop" is "foo/rop/v1.2.3".</p> <p>Typically, the path for one module in the repository will be a prefix of the others. For example, consider this repository:</p> <p><div class=highlight><pre><span></span><code>my-repo
|-- bar
|-- foo
|   |-- rop
|   `-- yut
|-- go.mod
`-- mig
    |-- go.mod
    `-- vub
</code></pre></div> <img alt="Fig. A top-level module's path is a prefix of another module's path." src=https://github.com/jeanbza/module-testing/blob/master/imagery/multi_module_repo.png></p> <p><em>Fig. A top-level module's path is a prefix of another module's path.</em></p> <p>This repository contains two modules. However, the module "my-repo" is a prefix of the path of the module "my-repo/mig".</p> <h3 id=should-i-have-multiple-modules-in-a-single-repository>Should I have multiple modules in a single repository?<a class=headerlink href=#should-i-have-multiple-modules-in-a-single-repository title="Permanent link"></a></h3> <p>Adding modules, removing modules, and versioning modules in such a configuration require considerable care and deliberation, so it is almost always easier and simpler to manage a single-module repository rather than multiple modules in an existing repository.</p> <p>Russ Cox commented in <a href=https://github.com/golang/go/issues/26664#issuecomment-455232444>#26664</a>:</p> <blockquote> <p>For all but power users, you probably want to adopt the usual convention that one repo = one module. It's important for long-term evolution of code storage options that a repo <em>can</em> contain multiple modules, but it's almost certainly not something you want to do by default.</p> </blockquote> <p>Two examples of how multi-modules can be more work: * <code>go test ./...</code> from the repository root will no longer test everything in the repository * you might need to routinely manage the relationship between the modules via <code>replace</code> directives.</p> <p>However, there is additional nuance beyond those two examples. Please read the FAQs in this <a href=/wiki/Modules#faqs--multi-module-repositories>sub-section</a> carefully if you are considering having multiple modules in a single repository.</p> <p>Two example scenarios where it can make sense to have more than one <code>go.mod</code> in a repository:</p> <ol> <li> <p>if you have usage examples where the examples themselves have a complex set of dependencies (e.g., perhaps you have a small package but include an example of using your package with kubernetes). In that case, it can make sense for your repository to have an <code>example</code> or <code>_example</code> directory with its own <code>go.mod</code>, such as shown <a href=https://pkg.go.dev/github.com/loov/hrtime>here</a>.</p> </li> <li> <p>if you have a repository with a complex set of dependencies, but you have a client API with a smaller set of dependencies. In some cases, it might make sense to have an <code>api</code> or <code>clientapi</code> or similar directory with its own <code>go.mod</code>, or to separate out that <code>clientapi</code> into its own repository. </p> </li> </ol> <p>However, for both of those cases, if you are considering creating a multi-module repository for performance or download size for a large set of indirect dependencies, you are strongly encouraged to first try with a GOPROXY, which will be enabled by default in Go 1.13. Using a GOPROXY mostly equals any performance benefits or dependency download size benefits that might otherwise come from creating a multi-module repository.</p> <h3 id=is-it-possible-to-add-a-module-to-a-multi-module-repository>Is it possible to add a module to a multi-module repository?<a class=headerlink href=#is-it-possible-to-add-a-module-to-a-multi-module-repository title="Permanent link"></a></h3> <p>Yes. However, there are two classes of this problem:</p> <p>The first class: the package to which the module is being added to is not in version control yet (a new package). This case is straightforward: add the package and the go.mod in the same commit, tag the commit, and push.</p> <p>The second class: the path at which the module is being added is in version control and contains one or more existing packages. This case requires a considerable amount of care. To illustrate, consider again the following repository (now in a github.com location to simulate the real-world better):</p> <div class=highlight><pre><span></span><code>github.com/my-repo
|-- bar
|-- foo
|   |-- rop
|   `-- yut
|-- go.mod
`-- mig
    `-- vub
</code></pre></div> <p>Consider adding module "github.com/my-repo/mig". If one were to follow the same approach as above, the package /my-repo/mig could be provided by two different modules: the old version of "github.com/my-repo", and the new, standalone module "github.com/my-repo/mig. If both modules are active, importing "github.com/my-repo/mig" would cause an “ambiguous import” error at compile time.</p> <p>The way to get around this is to make the newly-added module depend on the module it was "carved out" from, at a version after which it was carved out.</p> <p>Let's step through this with the above repository, assuming that "github.com/my-repo" is currently at v1.2.3:</p> <ol> <li> <p>Add github.com/my-repo/mig/go.mod:</p> <div class=highlight><pre><span></span><code>cd path-to/github.com/my-repo/mig
go mod init github.com/my-repo/mig

# Note: if &quot;my-repo/mig&quot; does not actually depend on &quot;my-repo&quot;, add a blank
# import.
# Note: version must be at or after the carve-out.
go mod edit -require github.com/myrepo@v1.3
</code></pre></div> </li> <li> <p><code>git commit</code></p> </li> <li><code>git tag v1.3.0</code></li> <li><code>git tag mig/v1.0.0</code></li> <li> <p>Next, let's test these. We can't <code>go build</code> or <code>go test</code> naively, since the go commands would try to fetch each dependent module from the module cache. So, we need to use replace rules to cause <code>go</code> commands to use the local copies:</p> <div class=highlight><pre><span></span><code>cd path-to/github.com/my-repo/mig
go mod edit -replace github.com/my-repo@v1.3.0=../
go test ./...
go mod edit -dropreplace github.com/my-repo@v1.3.0
</code></pre></div> </li> <li> <p><code>git push origin master v1.3.0 mig/v1.0.0</code> push the commit and both tags</p> </li> </ol> <p>Note that in the future <a href=https://github.com/golang/go/issues/28835>golang.org/issue/28835</a> should make the testing step a more straightforward experience.</p> <p>Note also that code was removed from module "github.com/my-repo" between minor versions. It may seem strange to not consider this a major change, but in this instance the transitive dependencies continue to provide compatible implementations of the removed packages at their original import paths.</p> <h3 id=is-it-possible-to-remove-a-module-from-a-multi-module-repository>Is it possible to remove a module from a multi-module repository?<a class=headerlink href=#is-it-possible-to-remove-a-module-from-a-multi-module-repository title="Permanent link"></a></h3> <p>Yes, with the same two cases and similar steps as above. </p> <h3 id=can-a-module-depend-on-an-internal-in-another>Can a module depend on an internal/ in another?<a class=headerlink href=#can-a-module-depend-on-an-internal-in-another title="Permanent link"></a></h3> <p>Yes. Packages in one module are allowed to import internal packages from another module as long as they share the same path prefix up to the internal/ path component. For example, consider the following repository:</p> <div class=highlight><pre><span></span><code>my-repo
|-- foo
|   `-- go.mod
|-- go.mod
`-- internal
</code></pre></div> <p>Here, package foo can import /my-repo/internal as long as module "my-repo/foo" depends on module "my-repo". Similarly, in the following repository:</p> <div class=highlight><pre><span></span><code>my-repo
|-- foo
|   `-- go.mod
`-- internal
    `-- go.mod
</code></pre></div> <p>Here, package foo can import my-repo/internal as long as module "my-repo/foo" depends on module "my-repo/internal". The semantics are the same in both: since my-repo is a shared path prefix between my-repo/internal and my-repo/foo, package foo is allowed to import package internal.</p> <h3 id=can-an-additional-gomod-exclude-unnecessary-content-do-modules-have-the-equivalent-of-a-gitignore-file>Can an additional go.mod exclude unnecessary content? Do modules have the equivalent of a .gitignore file?<a class=headerlink href=#can-an-additional-gomod-exclude-unnecessary-content-do-modules-have-the-equivalent-of-a-gitignore-file title="Permanent link"></a></h3> <p>One additional use case for having multiple <code>go.mod</code> files in a single repository is if the repository has files that should be pruned from a module. For example, a repository might have very large files that are not needed for the Go module, or a multi-language repository might have many non-Go files. </p> <p>An empty <code>go.mod</code> in a directory will cause that directory and all of its subdirectories to be excluded from the top-level Go module.</p> <p>If the excluded directory does not contain any <code>.go</code> files, no additional steps are needed beyond placing the empty <code>go.mod</code> file. If the excluded directory does contain <code>.go</code> files, please first carefully review the other FAQs in <a href=/wiki/Modules#faqs--multi-module-repositories>this multi-module repository section</a>.</p> <h2 id=faqs--minimal-version-selection>FAQs — Minimal Version Selection<a class=headerlink href=#faqs--minimal-version-selection title="Permanent link"></a></h2> <h3 id=wont-minimal-version-selection-keep-developers-from-getting-important-updates>Won't minimal version selection keep developers from getting important updates?<a class=headerlink href=#wont-minimal-version-selection-keep-developers-from-getting-important-updates title="Permanent link"></a></h3> <p>Please see the question "Won't minimal version selection keep developers from getting important updates?" in the earlier <a href=https://github.com/golang/go/issues/24301#issuecomment-371228664>FAQ from the official proposal discussion</a>.</p> <h2 id=faqs--possible-problems>FAQs — Possible Problems<a class=headerlink href=#faqs--possible-problems title="Permanent link"></a></h2> <h3 id=what-are-some-general-things-i-can-spot-check-if-i-am-seeing-a-problem>What are some general things I can spot check if I am seeing a problem?<a class=headerlink href=#what-are-some-general-things-i-can-spot-check-if-i-am-seeing-a-problem title="Permanent link"></a></h3> <ul> <li>Double-check that modules are enabled by running <code>go env</code> to confirm it does not show an empty value for the read-only <code>GOMOD</code> variable.</li> <li>Note: you never set <code>GOMOD</code> as a variable because it is effectively read-only debug output that <code>go env</code> outputs. </li> <li>If you are setting <code>GO111MODULE=on</code> to enable modules, double-check that it is not accidentally the plural <code>GO111MODULES=on</code>. (People sometimes naturally include the <code>S</code> because the feature is often called "modules").</li> <li>If vendoring is expected to be used, check that the <code>-mod=vendor</code> flag is being passed to <code>go build</code>or similar, or that <code>GOFLAGS=-mod=vendor</code> is set. </li> <li>Modules by default ignore the <code>vendor</code> directory unless you ask the <code>go</code> tool to use <code>vendor</code>.</li> <li>It is frequently helpful to check <code>go list -m all</code> to see the list of actual versions selected for your build</li> <li><code>go list -m all</code> usually gives you more detail compared to if you were to instead just look a <code>go.mod</code> file. </li> <li>If running <code>go get foo</code> fails in some way, or if <code>go build</code> is failing on a particular package <code>foo</code>, it often can be helpful to check the output from <code>go get -v foo</code> or <code>go get -v -x foo</code>:</li> <li>In general, <code>go get</code> will often provide more a detailed error message than <code>go build</code>.</li> <li>The <code>-v</code> flag to <code>go get</code> asks to print more verbose details, though be mindful that certain "errors" such as 404 errors <em>might</em> be expected based on how a remote repository was configured.</li> <li>If the nature of the problem is still not clear, you can also try the more verbose <code>go get -v -x foo</code>, which also shows the git or other VCS commands being issued. (If warranted, you can often execute the same git commands outside of the context of the <code>go</code> tool for troubleshooting purposes).</li> <li>You can check to see if you are using a particularly old git version</li> <li>Older versions of git were a common source of problems for the <code>vgo</code> prototype and Go 1.11 beta, but much less frequently in the GA 1.11. </li> <li>The module cache in Go 1.11 can sometimes cause various errors, primarily if there were previously network issues or multiple <code>go</code> commands executing in parallel (see <a href=https://github.com/golang/go/issues/26794>#26794</a>, which is addressed for Go 1.12). As a troubleshooting step, you can copy $GOPATH/pkg/mod to a backup directory (in case further investigation is warranted later), run <code>go clean -modcache</code>, and then see whether the original problem persists.</li> <li>If you are using Docker, it can be helpful to check if you can reproduce the behavior outside of Docker (and if the behavior only occurs in Docker, the list of bullets above can be used as a starting point to compare results between inside Docker vs. outside).</li> </ul> <p>The error you are currently examining might be a secondary issue caused by not having the expected version of a particular module or package in your build. Therefore, if the cause of a particular error is not obvious, it can be helpful to spot check your versions as described in the next FAQ.</p> <h3 id=what-can-i-check-if-i-am-not-seeing-the-expected-version-of-a-dependency>What can I check if I am not seeing the expected version of a dependency?<a class=headerlink href=#what-can-i-check-if-i-am-not-seeing-the-expected-version-of-a-dependency title="Permanent link"></a></h3> <ol> <li> <p>A good first step is to run <code>go mod tidy</code>. There is some chance this might resolve the issue, but it will also help put your <code>go.mod</code> file into a consistent state with respect to your <code>.go</code> source code, which will help make any subsequent investigation easier. (If <code>go mod tidy</code> itself changes the versions of a dependency in a way you don't expect, first read <a href=/wiki/Modules#why-does-go-mod-tidy-record-indirect-and-test-dependencies-in-my-gomod>this FAQ on 'go mod tidy'</a>. If that does not explain it, you can try resetting your <code>go.mod</code> and then run <code>go list -mod=readonly all</code>, which might give a more specific message about whatever was requiring a change to its version).</p> </li> <li> <p>The second step usually should be to check <code>go list -m all</code> to see the list of actual versions selected for your build. <code>go list -m all</code> shows you the final selected versions, including for indirect dependencies and after resolving versions for any shared dependencies. It also shows the outcome of any <code>replace</code> and <code>exclude</code> directives.</p> </li> <li> <p>A good next step can be to examine the output of <code>go mod graph</code> or <code>go mod graph | grep &lt;module-of-interest&gt;</code>. <code>go mod graph</code> prints the module requirement graph (including taking into account replacements). Each line in the output has two fields: the first column is a consuming module, and the second column is one of that module's requirements (including the version required by that consuming module). This can be a quick way to see which modules are requiring a particular dependency, including when your build has a dependency that has different required versions from different consumers in your build (and if that is the case, it is important to be familiar with the behavior described in the <a href=/wiki/Modules#version-selection>"Version Selection"</a> section above).</p> </li> </ol> <p><code>go mod why -m &lt;module&gt;</code> can also be useful here, although it is typically more useful for seeing why a dependency is included at all (rather than why a dependency ends up with a particular version).</p> <p><code>go list</code> provides many more variations of queries that can be useful to interrogate your modules if needed. One example is the following, which will show the exact versions used in your build excluding test-only dependencies: <div class=highlight><pre><span></span><code>go list -deps -f &#39;{{with .Module}}{{.Path}} {{.Version}}{{end}}&#39; ./... | sort -u
</code></pre></div></p> <p>A more detailed set of commands and examples for interrogating your modules can be seen in a runnable "Go Modules by Example" <a href=https://github.com/go-modules-by-example/index/tree/master/018_go_list_mod_graph_why>walkthough</a>.</p> <p>One cause of unexpected versions can be due to someone having created an invalid or unexpected <code>go.mod</code> file that was not intended, or a related mistake (for example: a <code>v2.0.1</code> version of module might have incorrectly declared itself to be <code>module foo</code> in its <code>go.mod</code> without the required <code>/v2</code>; an import statement in <code>.go</code> code intended to import a v3 module might be be missing the required <code>/v3</code>; a <code>require</code> statement in a <code>go.mod</code> for a v4 module might be be missing the required <code>/v4</code>). Therefore, if the cause of a particular issue you are seeing is not obvious, it can be worthwhile to first re-read the material in the <a href=/wiki/Modules#gomod>"go.mod"</a> and <a href=/wiki/Modules#semantic-import-versioning>"Semantic Import Versioning"</a> sections above (given these include important rules that modules must follow) and then take a few minutes to spot check the most relevant <code>go.mod</code> files and import statements.</p> <h3 id=why-am-i-getting-an-error-cannot-find-module-providing-package-foo>Why am I getting an error 'cannot find module providing package foo'?<a class=headerlink href=#why-am-i-getting-an-error-cannot-find-module-providing-package-foo title="Permanent link"></a></h3> <p>This is a general error message that can occur for several different underlying causes.</p> <p>In some cases, this error is simply due to a mistyped path, so the first step likely should be to double-check for incorrect paths based on the details listed in the error message.</p> <p>If you have not already done so, a good next step is often to try <code>go get -v foo</code> or <code>go get -v -x foo</code>: * In general, <code>go get</code> will often provide more a detailed error message than <code>go build</code>. * See the first troubleshooting FAQ in this section <a href=/wiki/Modules#what-are-some-general-things-i-can-spot-check-if-i-am-seeing-a-problem>above</a> for more details.</p> <p>Some other possible causes:</p> <ul> <li> <p>You might see the error <code>cannot find module providing package foo</code> if you have issued <code>go build</code> or <code>go build .</code> but do not have any <code>.go</code> source files in the current directory. If this is what you are encountering, the solution might be an alternative invocation such as <code>go build ./...</code> (where the <code>./...</code> expands out to match all the packages within the current module). See <a href=https://github.com/golang/go/issues/27122>#27122</a>.</p> </li> <li> <p>The module cache in Go 1.11 can cause this error, including in the face of network issues or multiple <code>go</code> commands executing in parallel. This is resolved in Go 1.12. See the first troubleshooting FAQ in this section <a href=/wiki/Modules#what-are-some-general-things-i-can-spot-check-if-i-am-seeing-a-problem>above</a> for more details and possible corrective steps.</p> </li> </ul> <h3 id=why-does-go-mod-init-give-the-error-cannot-determine-module-path-for-source-directory>Why does 'go mod init' give the error 'cannot determine module path for source directory'?<a class=headerlink href=#why-does-go-mod-init-give-the-error-cannot-determine-module-path-for-source-directory title="Permanent link"></a></h3> <p><code>go mod init</code> without any arguments will attempt to guess the proper module path based on different hints such as VCS meta data. However, it is not expected that <code>go mod init</code> will always be able to guess the proper module path.</p> <p>If <code>go mod init</code> gives you this error, those heuristics were not able to guess, and you must supply the module path yourself (such as <code>go mod init github.com/you/hello</code>).</p> <h3 id=i-have-a-problem-with-a-complex-dependency-that-has-not-opted-in-to-modules-can-i-use-information-from-its-current-dependency-manager>I have a problem with a complex dependency that has not opted in to modules. Can I use information from its current dependency manager?<a class=headerlink href=#i-have-a-problem-with-a-complex-dependency-that-has-not-opted-in-to-modules-can-i-use-information-from-its-current-dependency-manager title="Permanent link"></a></h3> <p>Yes. This requires some manual steps, but can be helpful in some more complex cases.</p> <p>Go versions 1.21 and older attempted to convert a prior dependency manager formats to <code>go.mod</code> formats. The following instructions thus need 1.21.13 or older; you need to run the following with <code>GOTOOLCHAIN=go1.21.13</code>, or install an older version of go manually.</p> <p>When you run <code>go mod init</code> when initializing your own module, it will automatically convert from a prior dependency manager by translating configuration files like <code>Gopkg.lock</code>, <code>glide.lock</code>, or <code>vendor.json</code> into a <code>go.mod</code> file that contains corresponding <code>require</code> directives. The information in a pre-existing <code>Gopkg.lock</code> file for example usually describes version information for all of your direct and indirect dependencies.</p> <p>However, if instead you are adding a new dependency that has not yet opted in to modules itself, there is not a similar automatic conversion process from any prior dependency manager that your new dependency might have been using. If that new dependency itself has non-module dependencies that have had breaking changes, then in some cases that can cause incompatibility problems. In other words, a prior dependency manager of your new dependency is not automatically used, and that can cause problems with your indirect dependencies in some cases.</p> <p>One approach is to run <code>go mod init</code> on your problematic non-module direct dependency to convert from its current dependency manager, and then use the <code>require</code> directives from the resulting temporary <code>go.mod</code> to populate or update the <code>go.mod</code> in your module.</p> <p>For example, if <code>github.com/some/nonmodule</code> is a problematic direct dependency of your module that is currently using another dependency manager, you can do something similar to:</p> <div class=highlight><pre><span></span><code>$ git clone -b v1.2.3 https://github.com/some/nonmodule /tmp/scratchpad/nonmodule
$ cd /tmp/scratchpad/nonmodule
$ go mod init
$ cat go.mod
</code></pre></div> <p>The resulting <code>require</code> information from the temporary <code>go.mod</code> can be manually moved into the actual <code>go.mod</code> for your module, or you can consider using <a class="magiclink magiclink-github magiclink-repository" href=https://github.com/rogpeppe/gomodmerge title="GitHub Repository: rogpeppe/gomodmerge">rogpeppe/gomodmerge</a>, which is a community tool targeting this use case. In addition, you will want to add a <code>require github.com/some/nonmodule v1.2.3</code> to your actual <code>go.mod</code> to match the version that you manually cloned.</p> <p>A concrete example of following this technique for docker is in this <a href=https://github.com/golang/go/issues/28489#issuecomment-454795390>#28489 comment</a>, which illustrates getting a consistent set of versions of docker dependencies to avoid case sensitive issues between <code>github.com/sirupsen/logrus</code> vs. <code>github.com/Sirupsen/logrus</code>.</p> <h3 id=how-can-i-resolve-parsing-gomod-unexpected-module-path-and-error-loading-module-requirements-errors-caused-by-a-mismatch-between-import-paths-vs-declared-module-identity>How can I resolve "parsing go.mod: unexpected module path" and "error loading module requirements" errors caused by a mismatch between import paths vs. declared module identity?<a class=headerlink href=#how-can-i-resolve-parsing-gomod-unexpected-module-path-and-error-loading-module-requirements-errors-caused-by-a-mismatch-between-import-paths-vs-declared-module-identity title="Permanent link"></a></h3> <h4 id=why-does-this-error-occur>Why does this error occur?<a class=headerlink href=#why-does-this-error-occur title="Permanent link"></a></h4> <p>In general, a module declares its identity in its <code>go.mod</code> via the <code>module</code> directive, such as <code>module example.com/m</code>. This is the "module path" for that module, and the <code>go</code> tool enforces consistency between that declared module path and the import paths used by any consumer. If a module's <code>go.mod</code> file reads <code>module example.com/m</code>, then a consumer must import packages from that module using import paths that start with that module path (e.g., <code>import "example.com/m"</code> or <code>import "example.com/m/sub/pkg"</code>).</p> <p>The <code>go</code> command reports a <code>parsing go.mod: unexpected module path</code> fatal error if there is a mismatch between an import path used by a consumer vs. the corresponding declared module path. In addition, in some cases the <code>go</code> command will then report a more generic <code>error loading module requirements</code> error afterwards.</p> <p>The most common cause of this error is if there was a name change (e.g., <code>github.com/Sirupsen/logrus</code> to <code>github.com/sirupsen/logrus</code>), or if a module was sometimes used via two different names prior to modules due to a vanity import path (e.g., <code>github.com/golang/sync</code> vs. the recommended <code>golang.org/x/sync</code>).</p> <p>This can then cause problems if you have a dependency that is still being imported via an older name (e.g., <code>github.com/Sirupsen/logrus</code>) or a non-canonical name (e.g., <code>github.com/golang/sync</code>) but that dependency has subsequently adopted modules and now declares its canonical name in its <code>go.mod</code>. The error here can then trigger during an upgrade when the upgraded version of the module is found declaring a canonical module path that no longer matches the older import path.</p> <h4 id=example-problem-scenario>Example problem scenario<a class=headerlink href=#example-problem-scenario title="Permanent link"></a></h4> <ul> <li>You are indirectly depending on <code>github.com/Quasilyte/go-consistent</code>.</li> <li>The project adopts modules, and then later changes its name to <code>github.com/quasilyte/go-consistent</code> (changing <code>Q</code> to lowercase <code>q</code>), which is a breaking change. GitHub forwards from the old name to the new name.</li> <li>You run <code>go get -u</code>, which attempts to upgrade all of your direct and indirect dependencies.</li> <li><code>github.com/Quasilyte/go-consistent</code> is attempted to be upgraded, but the latest <code>go.mod</code> found now reads <code>module github.com/quasilyte/go-consistent</code>.</li> <li>The overall upgrade operation fails to complete, with error:</li> </ul> <blockquote> <p>go: github.com/Quasilyte/go-consistent@v0.0.0-20190521200055-c6f3937de18c: parsing go.mod: unexpected module path "github.com/quasilyte/go-consistent" go get: error loading module requirements</p> </blockquote> <h4 id=resolving>Resolving<a class=headerlink href=#resolving title="Permanent link"></a></h4> <p>The most common form of the error is:</p> <blockquote> <p>go: example.com/some/OLD/name@vX.Y.Z: parsing go.mod: unexpected module path "example.com/some/NEW/name"</p> </blockquote> <p>If you visit the repository for <code>example.com/some/NEW/name</code> (from the right-side of the error), you can check the <code>go.mod</code> file for the latest release or <code>master</code> to see if it declares itself on the first line of the <code>go.mod</code> as <code>module example.com/some/NEW/name</code>. If so, that is a hint that you are seeing an "old module name" vs. "new module name" problem.</p> <p>This remainder of this section focuses on resolving the "old name" vs. "new name" form of this the error by following these steps in sequence:</p> <ol> <li> <p>Check your own code to see if you are importing using <code>example.com/some/OLD/name</code>. If so, update your code to import using <code>example.com/some/NEW/name</code>.</p> </li> <li> <p>If you received this error during an upgrade, you should try upgrading using the tip version of Go, which has more targeted upgrade logic (<a href=https://github.com/golang/go/issues/26902>#26902</a>) that can often sidestep this problem and also often has a better error message for this situation. Note that the <code>go get</code> arguments in tip / 1.13 are different than in 1.12. Example of obtaining tip and using it to upgrade your dependencies: <div class=highlight><pre><span></span><code>go get golang.org/dl/gotip &amp;&amp; gotip download
gotip get -u all
gotip mod tidy
</code></pre></div> Because the problematic old import is often in an indirect dependency, upgrading with tip and then running <code>go mod tidy</code> can frequently upgrade you past the problematic version and then also remove the problematic version from your <code>go.mod</code> as no longer needed, which then puts you into a functioning state when you return to using Go 1.12 or 1.11 for day-to-day use. For example, see that approach work <a href=https://github.com/golang/go/issues/30831#issuecomment-489463638>here</a> to upgrade past <code>github.com/golang/lint</code> vs. <code>golang.org/x/lint</code> problems.</p> </li> <li> <p>If you received this error while doing <code>go get -u foo</code> or <code>go get -u foo@latest</code>, try removing the <code>-u</code>. This will give you the set of dependencies used by <code>foo@latest</code> without upgrading the dependencies of <code>foo</code> past the versions that the author of <code>foo</code> likely verified as working when releasing <code>foo</code>. This can be important especially during this transitional time when some of the direct and indirect dependencies of <code>foo</code> might not yet have adopted <a href=https://semver.org>semver</a> or modules. (A common mistake is thinking <code>go get -u foo</code> solely gets the latest version of <code>foo</code>. In actuality, the <code>-u</code> in <code>go get -u foo</code> or <code>go get -u foo@latest</code> means to <em>also</em> get the latest versions for <em>all</em> of the direct and indirect dependencies of <code>foo</code>; that might be what you want, but it might not be especially if it is otherwise failing due to deep indirect dependencies). </p> </li> <li> <p>If the steps above have not resolved the error, the next approach is slightly more complicated, but most often should work to resolve an "old name" vs. "new name" form of this error. This uses just information solely from the error message itself, plus some brief looking at some VCS history.</p> </li> </ol> <p>4.1. Go to the <code>example.com/some/NEW/name</code> repository</p> <p>4.2. Determine when the <code>go.mod</code> file was introduced there (e.g., by looking at the blame or history view for the <code>go.mod</code>).</p> <p>4.3. Pick the release or commit from <em>just before</em> the <code>go.mod</code> file was introduced there.</p> <p>4.4. In your <code>go.mod</code> file, add a <code>replace</code> statement using the old name on both sides of the <code>replace</code> statement: <div class=highlight><pre><span></span><code>replace example.com/some/OLD/name =&gt; example.com/some/OLD/name &lt;version-just-before-go.mod&gt;
</code></pre></div> Using our prior example where <code>github.com/Quasilyte/go-consistent</code> is the old name and <code>github.com/quasilyte/go-consistent</code> is the new name, we can see that the <code>go.mod</code> was first introduced there in commit <a href=https://github.com/quasilyte/go-consistent/tree/00c5b0cf371a96059852487731370694d75ffacf>00c5b0cf371a</a>. That repository is not using semver tags, so we will take the immediately prior commit <a href=https://github.com/quasilyte/go-consistent/tree/00dd7fb039e1eff09e7c0bfac209934254409360>00dd7fb039e</a> and add it to the replace using the old uppercase Quasilyte name on both sides of the <code>replace</code>:</p> <div class=highlight><pre><span></span><code>replace github.com/Quasilyte/go-consistent =&gt; github.com/Quasilyte/go-consistent 00dd7fb039e
</code></pre></div> <p>This <code>replace</code> statement then enables us to upgrade past the problematic "old name" vs. "new name" mismatch by effectively preventing the old name from being upgraded to the new name in the presence of a <code>go.mod</code>. Usually, an upgrade via <code>go get -u</code> or similar can now avoid the error. If the upgrade completes, you can check to see if anyone is still importing the old name (e.g., <code>go mod graph | grep github.com/Quasilyte/go-consistent</code>) and if not, the <code>replace</code> can then be removed. (The reason this often works is because the upgrade itself can otherwise fail if an old problematic import path is used even though it might not be used in the final result if the upgrade had completed, which is tracked in <a href=https://github.com/golang/go/issues/30831>#30831</a>).</p> <ol> <li>If the above steps have not resolved the problem, it might be because the problematic old import path is still in use by the latest version of one or more of your dependencies. In this case, it is important to identify who is still using the problematic old import path, and find or open an issue asking that the problematic importer change to using the now canonical import path. Using <code>gotip</code> in step 2. above might identify the problematic importer, but it does not do so in all cases, especially for upgrades (<a href=https://github.com/golang/go/issues/30661#issuecomment-480981833>#30661</a>). If it is unclear who is importing using the problematic old import path, you can usually find out by creating a clean module cache, performing the operation or operations that trigger the error, and then grepping for the old problematic import path within the module cache. For example:</li> </ol> <div class=highlight><pre><span></span><code>export GOPATH=$(mktemp -d)
go get -u foo               # perform operation that generates the error of interest
cd $GOPATH/pkg/mod
grep -R --include=&quot;*.go&quot; github.com/Quasilyte/go-consistent
</code></pre></div> <ol> <li>If these steps are not sufficient to resolve the issue, or if you are a maintainer of a project that seems unable to remove references to an older problematic import path due to circular references, please see a much more detailed write-up of the problem on a separate <a href=/wiki/Resolving-Problems-From-Modified-Module-Path>wiki page</a>.</li> </ol> <p>Finally, the above steps focus on how to resolve an underlying "old name" vs. "new name" problem. However, the same error message can also appear if a <code>go.mod</code> was placed in the wrong location or simply has the wrong module path. If that is the case, the importing that module should always fail. If you are importing a new module that you just created and has never been successfully imported before, you should check that the <code>go.mod</code> file is located correctly and that it has the proper module path that corresponds to that location. (The most common approach is a single <code>go.mod</code> per repository, with the single <code>go.mod</code> file placed in the repository root, and using the repository name as the module path declared in the <code>module</code> directive). See the <a href=/wiki/Modules#gomod>"go.mod"</a> section for more details.</p> <h3 id=why-does-go-build-require-gcc-and-why-are-prebuilt-packages-such-as-nethttp-not-used>Why does 'go build' require gcc, and why are prebuilt packages such as net/http not used?<a class=headerlink href=#why-does-go-build-require-gcc-and-why-are-prebuilt-packages-such-as-nethttp-not-used title="Permanent link"></a></h3> <p>In short:</p> <blockquote> <p>Because the pre-built packages are non-module builds and can’t be reused. Sorry. Disable cgo for now or install gcc.</p> </blockquote> <p>This is only an issue when opting in to modules (e.g., via <code>GO111MODULE=on</code>). See <a href=https://github.com/golang/go/issues/26988#issuecomment-417886417>#26988</a> for additional discussion.</p> <h3 id=do-modules-work-with-relative-imports-like-import-subdir>Do modules work with relative imports like <code>import "./subdir"</code>?<a class=headerlink href=#do-modules-work-with-relative-imports-like-import-subdir title="Permanent link"></a></h3> <p>No. See <a href=https://github.com/golang/go/issues/26645#issuecomment-408572701>#26645</a>, which includes:</p> <blockquote> <p>In modules, there finally is a name for the subdirectory. If the parent directory says "module m" then the subdirectory is imported as "m/subdir", no longer "./subdir".</p> </blockquote> <h3 id=some-needed-files-may-not-be-present-in-populated-vendor-directory>Some needed files may not be present in populated vendor directory<a class=headerlink href=#some-needed-files-may-not-be-present-in-populated-vendor-directory title="Permanent link"></a></h3> <p>Directories without <code>.go</code> files are not copied inside the <code>vendor</code> directory by <code>go mod vendor</code>. This is by design. </p> <p>In short, setting aside any particular vendoring behavior – the overall model for go builds is that the files needed to build a package should be in the directory with the <code>.go</code> files.</p> <p>Using the example of cgo – modifying C source code in other directories will not trigger a rebuild, and instead your build will use stale cache entries. The cgo documentation now <a href=https://go-review.googlesource.com/c/go/+/125297/5/src/cmd/cgo/doc.go>includes</a>:</p> <blockquote> <p>Note that changes to files in other directories do not cause the package to be recompiled, so <em>all non-Go source code for the package should be stored in the package directory</em>, not in subdirectories.</p> </blockquote> <p>A community tool <a class="magiclink magiclink-github magiclink-repository" href=https://github.com/goware/modvendor title="GitHub Repository: goware/modvendor">goware/modvendor</a> allows you to easily copy a complete set of .c, .h, .s, .proto or other files from a module into the <code>vendor</code> directory. Although this can be helpful, some care must be taken to make sure your go build is being handled properly in general (regardless of vendoring) if you have files needed to build a package that are outside of the directory with the <code>.go</code> files.</p> <p>See additional discussion in <a href=https://github.com/golang/go/issues/26366#issuecomment-405683150>#26366</a>.</p> <p>An alternative approach to traditional vendoring is to check in the module cache. It can end up with similar benefits as traditional vendoring and in some ways ends up with a higher fidelity copy. This approach is explained as a "Go Modules by Example" <a href=https://github.com/go-modules-by-example/index/blob/master/012_modvendor/README.md>walkthrough</a>.</p> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs Insiders </a> </div> <div class=md-social> <a href=https://github.com/zchee target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"annotate": null, "base": "..", "features": ["content.code.annotate", "navigation.expand", "navigation.instant", "navigation.sections", "toc.integrate", "search.suggest", "search.highlight"], "search": "../assets/javascripts/workers/search.26099bd0.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script> <script src=../assets/javascripts/bundle.9d1edc04.min.js></script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script> <script src=https://unpkg.com/mermaid></script> <script src=https://github.com/facelessuser/pymdown-extensions/raw/main/docs/theme/assets/pymdownx-extras/extra-loader-9e2c67b9.js></script> <script src=https://github.com/facelessuser/pymdown-extensions/raw/main/docs/theme/assets/pymdownx-extras/material-extra-3rdparty-804b836e.js></script> <script src=https://github.com/facelessuser/pymdown-extensions/raw/main/docs/theme/assets/pymdownx-extras/material-extra-theme-7c147bb7.js></script> </body> </html>