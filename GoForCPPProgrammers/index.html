<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Personal fork of Go Programming Language Wiki"><link href=https://zchee.github.io/golang-wiki/GoForCPPProgrammers/ rel=canonical><link href=../GoArm/ rel=prev><link href=../GoGenerateTools/ rel=next><link rel=icon href=../assets/images/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.21+insiders-4.53.17"><title>GoForCPPProgrammers - Go Programming Language Wiki</title><link rel=stylesheet href=../assets/stylesheets/main.7d528353.min.css><link rel=stylesheet href=../assets/stylesheets/palette.ab4e12ef.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=https://github.com/facelessuser/pymdown-extensions/raw/main/docs/theme/assets/pymdownx-extras/extra-2d3bedca0e.css><script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=blue data-md-color-accent=light-blue> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=.. title="Go Programming Language Wiki" class="md-header__button md-logo" aria-label="Go Programming Language Wiki" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Go Programming Language Wiki </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> GoForCPPProgrammers </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/zchee/golang-wiki title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> zchee/golang-wiki </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--integrated" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=.. title="Go Programming Language Wiki" class="md-nav__button md-logo" aria-label="Go Programming Language Wiki" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> Go Programming Language Wiki </label> <div class=md-nav__source> <a href=https://github.com/zchee/golang-wiki title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> zchee/golang-wiki </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Home/ class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class=md-nav__item> <a href=../AI/ class=md-nav__link> <span class=md-ellipsis> AI </span> </a> </li> <li class=md-nav__item> <a href=../Articles/ class=md-nav__link> <span class=md-ellipsis> Articles </span> </a> </li> <li class=md-nav__item> <a href=../AssemblyPolicy/ class=md-nav__link> <span class=md-ellipsis> AssemblyPolicy </span> </a> </li> <li class=md-nav__item> <a href=../AVX512/ class=md-nav__link> <span class=md-ellipsis> AVX512 </span> </a> </li> <li class=md-nav__item> <a href=../Benchmarks/ class=md-nav__link> <span class=md-ellipsis> Benchmarks </span> </a> </li> <li class=md-nav__item> <a href=../Blogs/ class=md-nav__link> <span class=md-ellipsis> Blogs </span> </a> </li> <li class=md-nav__item> <a href=../Books/ class=md-nav__link> <span class=md-ellipsis> Books </span> </a> </li> <li class=md-nav__item> <a href=../BoundingResourceUse/ class=md-nav__link> <span class=md-ellipsis> BoundingResourceUse </span> </a> </li> <li class=md-nav__item> <a href=../cgo/ class=md-nav__link> <span class=md-ellipsis> cgo </span> </a> </li> <li class=md-nav__item> <a href=../ChromeOS/ class=md-nav__link> <span class=md-ellipsis> ChromeOS </span> </a> </li> <li class=md-nav__item> <a href=../CodeReview/ class=md-nav__link> <span class=md-ellipsis> CodeReview </span> </a> </li> <li class=md-nav__item> <a href=../CodeReviewComments/ class=md-nav__link> <span class=md-ellipsis> CodeReviewComments </span> </a> </li> <li class=md-nav__item> <a href=../CodeReviewConcurrency/ class=md-nav__link> <span class=md-ellipsis> CodeReviewConcurrency </span> </a> </li> <li class=md-nav__item> <a href=../CodeTools/ class=md-nav__link> <span class=md-ellipsis> CodeTools </span> </a> </li> <li class=md-nav__item> <a href=../Comments/ class=md-nav__link> <span class=md-ellipsis> Comments </span> </a> </li> <li class=md-nav__item> <a href=../CommitMessage/ class=md-nav__link> <span class=md-ellipsis> CommitMessage </span> </a> </li> <li class=md-nav__item> <a href=../CommonMistakes/ class=md-nav__link> <span class=md-ellipsis> CommonMistakes </span> </a> </li> <li class=md-nav__item> <a href=../CompilerOptimizations/ class=md-nav__link> <span class=md-ellipsis> CompilerOptimizations </span> </a> </li> <li class=md-nav__item> <a href=../Conferences/ class=md-nav__link> <span class=md-ellipsis> Conferences </span> </a> </li> <li class=md-nav__item> <a href=../Configuring-GoLand-for-WebAssembly/ class=md-nav__link> <span class=md-ellipsis> Configuring GoLand for WebAssembly </span> </a> </li> <li class=md-nav__item> <a href=../Contributing-to-gopls/ class=md-nav__link> <span class=md-ellipsis> Contributing to gopls </span> </a> </li> <li class=md-nav__item> <a href=../Contributing/ class=md-nav__link> <span class=md-ellipsis> Contributing </span> </a> </li> <li class=md-nav__item> <a href=../CoreDumpDebugging/ class=md-nav__link> <span class=md-ellipsis> CoreDumpDebugging </span> </a> </li> <li class=md-nav__item> <a href=../Courses/ class=md-nav__link> <span class=md-ellipsis> Courses </span> </a> </li> <li class=md-nav__item> <a href=../CreatingSubRepository/ class=md-nav__link> <span class=md-ellipsis> CreatingSubRepository </span> </a> </li> <li class=md-nav__item> <a href=../CSSStyleGuide/ class=md-nav__link> <span class=md-ellipsis> CSSStyleGuide </span> </a> </li> <li class=md-nav__item> <a href=../CustomPprofProfiles/ class=md-nav__link> <span class=md-ellipsis> CustomPprofProfiles </span> </a> </li> <li class=md-nav__item> <a href=../Darwin/ class=md-nav__link> <span class=md-ellipsis> Darwin </span> </a> </li> <li class=md-nav__item> <a href=../DashboardBuilders/ class=md-nav__link> <span class=md-ellipsis> DashboardBuilders </span> </a> </li> <li class=md-nav__item> <a href=../Deprecated/ class=md-nav__link> <span class=md-ellipsis> Deprecated </span> </a> </li> <li class=md-nav__item> <a href=../DesignDocuments/ class=md-nav__link> <span class=md-ellipsis> DesignDocuments </span> </a> </li> <li class=md-nav__item> <a href=../Diagnostics/ class=md-nav__link> <span class=md-ellipsis> Diagnostics </span> </a> </li> <li class=md-nav__item> <a href=../Download-build-farm-failed-logs-and-debugging/ class=md-nav__link> <span class=md-ellipsis> Download build farm failed logs and debugging </span> </a> </li> <li class=md-nav__item> <a href=../DragonFly-BSD/ class=md-nav__link> <span class=md-ellipsis> DragonFly BSD </span> </a> </li> <li class=md-nav__item> <a href=../Errors/ class=md-nav__link> <span class=md-ellipsis> Errors </span> </a> </li> <li class=md-nav__item> <a href=../ErrorValueFAQ/ class=md-nav__link> <span class=md-ellipsis> ErrorValueFAQ </span> </a> </li> <li class=md-nav__item> <a href=../ExperienceReports/ class=md-nav__link> <span class=md-ellipsis> ExperienceReports </span> </a> </li> <li class=md-nav__item> <a href=../FileTreeDocumentation/ class=md-nav__link> <span class=md-ellipsis> FileTreeDocumentation </span> </a> </li> <li class=md-nav__item> <a href=../FreeBSD/ class=md-nav__link> <span class=md-ellipsis> FreeBSD </span> </a> </li> <li class=md-nav__item> <a href=../FromXToGo/ class=md-nav__link> <span class=md-ellipsis> FromXToGo </span> </a> </li> <li class=md-nav__item> <a href=../Frozen/ class=md-nav__link> <span class=md-ellipsis> Frozen </span> </a> </li> <li class=md-nav__item> <a href=../Fuzzing-trophy-case/ class=md-nav__link> <span class=md-ellipsis> Fuzzing trophy case </span> </a> </li> <li class=md-nav__item> <a href=../Gardening/ class=md-nav__link> <span class=md-ellipsis> Gardening </span> </a> </li> <li class=md-nav__item> <a href=../GccgoCrossCompilation/ class=md-nav__link> <span class=md-ellipsis> GccgoCrossCompilation </span> </a> </li> <li class=md-nav__item> <a href=../GcToolchainTricks/ class=md-nav__link> <span class=md-ellipsis> GcToolchainTricks </span> </a> </li> <li class=md-nav__item> <a href=../GerritAccess/ class=md-nav__link> <span class=md-ellipsis> GerritAccess </span> </a> </li> <li class=md-nav__item> <a href=../GerritBot/ class=md-nav__link> <span class=md-ellipsis> GerritBot </span> </a> </li> <li class=md-nav__item> <a href=../GitHubAccess/ class=md-nav__link> <span class=md-ellipsis> GitHubAccess </span> </a> </li> <li class=md-nav__item> <a href=../Go-1.10-Release-Party/ class=md-nav__link> <span class=md-ellipsis> Go 1.10 Release Party </span> </a> </li> <li class=md-nav__item> <a href=../Go-1.6-release-party/ class=md-nav__link> <span class=md-ellipsis> Go 1.6 release party </span> </a> </li> <li class=md-nav__item> <a href=../Go-1.8-Release-Party/ class=md-nav__link> <span class=md-ellipsis> Go 1.8 Release Party </span> </a> </li> <li class=md-nav__item> <a href=../Go-Community-Slides/ class=md-nav__link> <span class=md-ellipsis> Go Community Slides </span> </a> </li> <li class=md-nav__item> <a href=../Go-Release-Cycle/ class=md-nav__link> <span class=md-ellipsis> Go Release Cycle </span> </a> </li> <li class=md-nav__item> <a href=../Go123Timer/ class=md-nav__link> <span class=md-ellipsis> Go123Timer </span> </a> </li> <li class=md-nav__item> <a href=../Go2/ class=md-nav__link> <span class=md-ellipsis> Go2 </span> </a> </li> <li class=md-nav__item> <a href=../Go2ErrorHandlingFeedback/ class=md-nav__link> <span class=md-ellipsis> Go2ErrorHandlingFeedback </span> </a> </li> <li class=md-nav__item> <a href=../Go2ErrorValuesFeedback/ class=md-nav__link> <span class=md-ellipsis> Go2ErrorValuesFeedback </span> </a> </li> <li class=md-nav__item> <a href=../Go2GenericsFeedback/ class=md-nav__link> <span class=md-ellipsis> Go2GenericsFeedback </span> </a> </li> <li class=md-nav__item> <a href=../GoArm/ class=md-nav__link> <span class=md-ellipsis> GoArm </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> GoForCPPProgrammers </span> </a> </li> <li class=md-nav__item> <a href=../GoGenerateTools/ class=md-nav__link> <span class=md-ellipsis> GoGenerateTools </span> </a> </li> <li class=md-nav__item> <a href=../GoGetProxyConfig/ class=md-nav__link> <span class=md-ellipsis> GoGetProxyConfig </span> </a> </li> <li class=md-nav__item> <a href=../GoGetTools/ class=md-nav__link> <span class=md-ellipsis> GoGetTools </span> </a> </li> <li class=md-nav__item> <a href=../golang-tools/ class=md-nav__link> <span class=md-ellipsis> golang tools </span> </a> </li> <li class=md-nav__item> <a href=../GoMips/ class=md-nav__link> <span class=md-ellipsis> GoMips </span> </a> </li> <li class=md-nav__item> <a href=../Gomote/ class=md-nav__link> <span class=md-ellipsis> Gomote </span> </a> </li> <li class=md-nav__item> <a href=../GOPATH/ class=md-nav__link> <span class=md-ellipsis> GOPATH </span> </a> </li> <li class=md-nav__item> <a href=../Gopher/ class=md-nav__link> <span class=md-ellipsis> Gopher </span> </a> </li> <li class=md-nav__item> <a href=../gopherbot/ class=md-nav__link> <span class=md-ellipsis> gopherbot </span> </a> </li> <li class=md-nav__item> <a href=../gopls-integrator-FAQ/ class=md-nav__link> <span class=md-ellipsis> gopls integrator FAQ </span> </a> </li> <li class=md-nav__item> <a href=../gopls/ class=md-nav__link> <span class=md-ellipsis> gopls </span> </a> </li> <li class=md-nav__item> <a href=../GoStrings/ class=md-nav__link> <span class=md-ellipsis> GoStrings </span> </a> </li> <li class=md-nav__item> <a href=../GoTalks/ class=md-nav__link> <span class=md-ellipsis> GoTalks </span> </a> </li> <li class=md-nav__item> <a href=../GoUserGroups/ class=md-nav__link> <span class=md-ellipsis> GoUserGroups </span> </a> </li> <li class=md-nav__item> <a href=../GoUsers/ class=md-nav__link> <span class=md-ellipsis> GoUsers </span> </a> </li> <li class=md-nav__item> <a href=../HandlingIssues/ class=md-nav__link> <span class=md-ellipsis> HandlingIssues </span> </a> </li> <li class=md-nav__item> <a href=../heapdump13/ class=md-nav__link> <span class=md-ellipsis> heapdump13 </span> </a> </li> <li class=md-nav__item> <a href=../heapdump14/ class=md-nav__link> <span class=md-ellipsis> heapdump14 </span> </a> </li> <li class=md-nav__item> <a href=../heapdump15-through-heapdump17/ class=md-nav__link> <span class=md-ellipsis> heapdump15 through heapdump17 </span> </a> </li> <li class=md-nav__item> <a href=../heapdump15/ class=md-nav__link> <span class=md-ellipsis> heapdump15 </span> </a> </li> <li class=md-nav__item> <a href=../HostedContinuousIntegration/ class=md-nav__link> <span class=md-ellipsis> HostedContinuousIntegration </span> </a> </li> <li class=md-nav__item> <a href=../How-to-ask-for-help/ class=md-nav__link> <span class=md-ellipsis> How to ask for help </span> </a> </li> <li class=md-nav__item> <a href=../HowToAsk/ class=md-nav__link> <span class=md-ellipsis> HowToAsk </span> </a> </li> <li class=md-nav__item> <a href=../IDEsAndTextEditorPlugins/ class=md-nav__link> <span class=md-ellipsis> IDEsAndTextEditorPlugins </span> </a> </li> <li class=md-nav__item> <a href=../InstallFromSource/ class=md-nav__link> <span class=md-ellipsis> InstallFromSource </span> </a> </li> <li class=md-nav__item> <a href=../InstallTroubleshooting/ class=md-nav__link> <span class=md-ellipsis> InstallTroubleshooting </span> </a> </li> <li class=md-nav__item> <a href=../InterfaceSlice/ class=md-nav__link> <span class=md-ellipsis> InterfaceSlice </span> </a> </li> <li class=md-nav__item> <a href=../InvalidFlag/ class=md-nav__link> <span class=md-ellipsis> InvalidFlag </span> </a> </li> <li class=md-nav__item> <a href=../Iota/ class=md-nav__link> <span class=md-ellipsis> Iota </span> </a> </li> <li class=md-nav__item> <a href=../Learn/ class=md-nav__link> <span class=md-ellipsis> Learn </span> </a> </li> <li class=md-nav__item> <a href=../LearnConcurrency/ class=md-nav__link> <span class=md-ellipsis> LearnConcurrency </span> </a> </li> <li class=md-nav__item> <a href=../LearnErrorHandling/ class=md-nav__link> <span class=md-ellipsis> LearnErrorHandling </span> </a> </li> <li class=md-nav__item> <a href=../LearnServerProgramming/ class=md-nav__link> <span class=md-ellipsis> LearnServerProgramming </span> </a> </li> <li class=md-nav__item> <a href=../LearnTesting/ class=md-nav__link> <span class=md-ellipsis> LearnTesting </span> </a> </li> <li class=md-nav__item> <a href=../Linux/ class=md-nav__link> <span class=md-ellipsis> Linux </span> </a> </li> <li class=md-nav__item> <a href=../LinuxKernelSignalVectorBug/ class=md-nav__link> <span class=md-ellipsis> LinuxKernelSignalVectorBug </span> </a> </li> <li class=md-nav__item> <a href=../Livestreams/ class=md-nav__link> <span class=md-ellipsis> Livestreams </span> </a> </li> <li class=md-nav__item> <a href=../LockOSThread/ class=md-nav__link> <span class=md-ellipsis> LockOSThread </span> </a> </li> <li class=md-nav__item> <a href=../LoopvarExperiment/ class=md-nav__link> <span class=md-ellipsis> LoopvarExperiment </span> </a> </li> <li class=md-nav__item> <a href=../LUCI/ class=md-nav__link> <span class=md-ellipsis> LUCI </span> </a> </li> <li class=md-nav__item> <a href=../MacOS12BSDThreadRegisterIssue/ class=md-nav__link> <span class=md-ellipsis> MacOS12BSDThreadRegisterIssue </span> </a> </li> <li class=md-nav__item> <a href=../MethodSets/ class=md-nav__link> <span class=md-ellipsis> MethodSets </span> </a> </li> <li class=md-nav__item> <a href=../MinimumRequirements/ class=md-nav__link> <span class=md-ellipsis> MinimumRequirements </span> </a> </li> <li class=md-nav__item> <a href=../MinorReleases/ class=md-nav__link> <span class=md-ellipsis> MinorReleases </span> </a> </li> <li class=md-nav__item> <a href=../Mobile/ class=md-nav__link> <span class=md-ellipsis> Mobile </span> </a> </li> <li class=md-nav__item> <a href=../Modules/ class=md-nav__link> <span class=md-ellipsis> Modules </span> </a> </li> <li class=md-nav__item> <a href=../MutexOrChannel/ class=md-nav__link> <span class=md-ellipsis> MutexOrChannel </span> </a> </li> <li class=md-nav__item> <a href=../NetBSD/ class=md-nav__link> <span class=md-ellipsis> NetBSD </span> </a> </li> <li class=md-nav__item> <a href=../NewSpeakers/ class=md-nav__link> <span class=md-ellipsis> NewSpeakers </span> </a> </li> <li class=md-nav__item> <a href=../NonEnglish/ class=md-nav__link> <span class=md-ellipsis> NonEnglish </span> </a> </li> <li class=md-nav__item> <a href=../NoPlusOne/ class=md-nav__link> <span class=md-ellipsis> NoPlusOne </span> </a> </li> <li class=md-nav__item> <a href=../OpenBSD/ class=md-nav__link> <span class=md-ellipsis> OpenBSD </span> </a> </li> <li class=md-nav__item> <a href=../PackagePublishing/ class=md-nav__link> <span class=md-ellipsis> PackagePublishing </span> </a> </li> <li class=md-nav__item> <a href=../PanicAndRecover/ class=md-nav__link> <span class=md-ellipsis> PanicAndRecover </span> </a> </li> <li class=md-nav__item> <a href=../Performance/ class=md-nav__link> <span class=md-ellipsis> Performance </span> </a> </li> <li class=md-nav__item> <a href=../PerformanceMonitoring/ class=md-nav__link> <span class=md-ellipsis> PerformanceMonitoring </span> </a> </li> <li class=md-nav__item> <a href=../PGO-Tools/ class=md-nav__link> <span class=md-ellipsis> PGO Tools </span> </a> </li> <li class=md-nav__item> <a href=../Plan9/ class=md-nav__link> <span class=md-ellipsis> Plan9 </span> </a> </li> <li class=md-nav__item> <a href=../Podcasts/ class=md-nav__link> <span class=md-ellipsis> Podcasts </span> </a> </li> <li class=md-nav__item> <a href=../PortingPolicy/ class=md-nav__link> <span class=md-ellipsis> PortingPolicy </span> </a> </li> <li class=md-nav__item> <a href=../PriorDiscussion/ class=md-nav__link> <span class=md-ellipsis> PriorDiscussion </span> </a> </li> <li class=md-nav__item> <a href=../Projects/ class=md-nav__link> <span class=md-ellipsis> Projects </span> </a> </li> <li class=md-nav__item> <a href=../Proposals/ class=md-nav__link> <span class=md-ellipsis> Proposals </span> </a> </li> <li class=md-nav__item> <a href=../ProviderIntegration/ class=md-nav__link> <span class=md-ellipsis> ProviderIntegration </span> </a> </li> <li class=md-nav__item> <a href=../Questions/ class=md-nav__link> <span class=md-ellipsis> Questions </span> </a> </li> <li class=md-nav__item> <a href=../Quiet-Weeks/ class=md-nav__link> <span class=md-ellipsis> Quiet Weeks </span> </a> </li> <li class=md-nav__item> <a href=../Range/ class=md-nav__link> <span class=md-ellipsis> Range </span> </a> </li> <li class=md-nav__item> <a href=../RangefuncExperiment/ class=md-nav__link> <span class=md-ellipsis> RangefuncExperiment </span> </a> </li> <li class=md-nav__item> <a href=../RateLimiting/ class=md-nav__link> <span class=md-ellipsis> RateLimiting </span> </a> </li> <li class=md-nav__item> <a href=../ResearchPapers/ class=md-nav__link> <span class=md-ellipsis> ResearchPapers </span> </a> </li> <li class=md-nav__item> <a href=../Resolving-Problems-From-Modified-Module-Path/ class=md-nav__link> <span class=md-ellipsis> Resolving Problems From Modified Module Path </span> </a> </li> <li class=md-nav__item> <a href=../Resources-for-slog/ class=md-nav__link> <span class=md-ellipsis> Resources for slog </span> </a> </li> <li class=md-nav__item> <a href=../RiskyChanges/ class=md-nav__link> <span class=md-ellipsis> RiskyChanges </span> </a> </li> <li class=md-nav__item> <a href=../Screencasts/ class=md-nav__link> <span class=md-ellipsis> Screencasts </span> </a> </li> <li class=md-nav__item> <a href=../SettingGOPATH/ class=md-nav__link> <span class=md-ellipsis> SettingGOPATH </span> </a> </li> <li class=md-nav__item> <a href=../SignalHandling/ class=md-nav__link> <span class=md-ellipsis> SignalHandling </span> </a> </li> <li class=md-nav__item> <a href=../SimultaneousAssignment/ class=md-nav__link> <span class=md-ellipsis> SimultaneousAssignment </span> </a> </li> <li class=md-nav__item> <a href=../SliceTricks/ class=md-nav__link> <span class=md-ellipsis> SliceTricks </span> </a> </li> <li class=md-nav__item> <a href=../SlowBots/ class=md-nav__link> <span class=md-ellipsis> SlowBots </span> </a> </li> <li class=md-nav__item> <a href=../Solaris/ class=md-nav__link> <span class=md-ellipsis> Solaris </span> </a> </li> <li class=md-nav__item> <a href=../Spectre/ class=md-nav__link> <span class=md-ellipsis> Spectre </span> </a> </li> <li class=md-nav__item> <a href=../Spelling/ class=md-nav__link> <span class=md-ellipsis> Spelling </span> </a> </li> <li class=md-nav__item> <a href=../SQLDrivers/ class=md-nav__link> <span class=md-ellipsis> SQLDrivers </span> </a> </li> <li class=md-nav__item> <a href=../SQLInterface/ class=md-nav__link> <span class=md-ellipsis> SQLInterface </span> </a> </li> <li class=md-nav__item> <a href=../Style/ class=md-nav__link> <span class=md-ellipsis> Style </span> </a> </li> <li class=md-nav__item> <a href=../SuccessStories/ class=md-nav__link> <span class=md-ellipsis> SuccessStories </span> </a> </li> <li class=md-nav__item> <a href=../Switch/ class=md-nav__link> <span class=md-ellipsis> Switch </span> </a> </li> <li class=md-nav__item> <a href=../TableDrivenTests/ class=md-nav__link> <span class=md-ellipsis> TableDrivenTests </span> </a> </li> <li class=md-nav__item> <a href=../TargetSpecific/ class=md-nav__link> <span class=md-ellipsis> TargetSpecific </span> </a> </li> <li class=md-nav__item> <a href=../TestComments/ class=md-nav__link> <span class=md-ellipsis> TestComments </span> </a> </li> <li class=md-nav__item> <a href=../TestFailures/ class=md-nav__link> <span class=md-ellipsis> TestFailures </span> </a> </li> <li class=md-nav__item> <a href=../Timeouts/ class=md-nav__link> <span class=md-ellipsis> Timeouts </span> </a> </li> <li class=md-nav__item> <a href=../Training/ class=md-nav__link> <span class=md-ellipsis> Training </span> </a> </li> <li class=md-nav__item> <a href=../Ubuntu/ class=md-nav__link> <span class=md-ellipsis> Ubuntu </span> </a> </li> <li class=md-nav__item> <a href=../Watchflakes/ class=md-nav__link> <span class=md-ellipsis> Watchflakes </span> </a> </li> <li class=md-nav__item> <a href=../WebAccessibilityResourcesAndTips/ class=md-nav__link> <span class=md-ellipsis> WebAccessibilityResourcesAndTips </span> </a> </li> <li class=md-nav__item> <a href=../WebAssembly/ class=md-nav__link> <span class=md-ellipsis> WebAssembly </span> </a> </li> <li class=md-nav__item> <a href=../Well-known-struct-tags/ class=md-nav__link> <span class=md-ellipsis> Well known struct tags </span> </a> </li> <li class=md-nav__item> <a href=../WhyGo/ class=md-nav__link> <span class=md-ellipsis> WhyGo </span> </a> </li> <li class=md-nav__item> <a href=../Windows/ class=md-nav__link> <span class=md-ellipsis> Windows </span> </a> </li> <li class=md-nav__item> <a href=../WindowsBuild/ class=md-nav__link> <span class=md-ellipsis> WindowsBuild </span> </a> </li> <li class=md-nav__item> <a href=../WindowsCrossCompiling/ class=md-nav__link> <span class=md-ellipsis> WindowsCrossCompiling </span> </a> </li> <li class=md-nav__item> <a href=../WindowsDLLs/ class=md-nav__link> <span class=md-ellipsis> WindowsDLLs </span> </a> </li> <li class=md-nav__item> <a href=../X-Repositories/ class=md-nav__link> <span class=md-ellipsis> X Repositories </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1>GoForCPPProgrammers</h1> <p>Go is a systems programming language intended to be a general-purpose systems language, like C++. These are some notes on Go for experienced C++ programmers. This document discusses the differences between Go and C++, and says little to nothing about the similarities.</p> <p>An important point to keep in mind is that there are some fundamental differences in the thought processes required to be proficient in the two respective languages. Most formidably, C++'s object model is based on classes and class hierarchies while Go's object model is based on interfaces (and is essentially flat). Consequently, C++ design patterns rarely translate verbatim to Go. To program effectively in Go, one has to consider the <em>problem</em> being solved, not the mechanisms one might use in C++ to solve the problem.</p> <p>For a more general introduction to Go, see the <a href=http://tour.golang.org/ >Go Tour</a>, <a href=https://go.dev/doc/code>How to Write Go Code</a> and <a href=https://go.dev/doc/effective_go>Effective Go</a>.</p> <p>For a detailed description of the Go language, see the <a href=https://go.dev/ref/spec>Go spec</a>.</p> <h2>Conceptual Differences</h2> <ul> <li>Go does not have classes with constructors or destructors. Instead of class methods, a class inheritance hierarchy, and virtual functions, Go provides <em>interfaces</em>, which are discussed in more detail below. Interfaces are also used where C++ uses templates.</li> <li>Go provides automatic garbage collection of allocated memory. It is not necessary (or possible) to release memory explicitly. There is no need to worry about heap-allocated vs. stack-allocated storage, <code>new</code> vs. <code>malloc</code>, or <code>delete</code> vs. <code>delete[]</code> vs. <code>free</code>. There is no need to separately manage <code>std::unique_ptr</code>, <code>std::shared_ptr</code>, <code>std::weak_ptr</code>, <code>std::auto_ptr</code>, and ordinary, non-smart "raw" pointers. Go's run-time system handles all of that error-prone code on the programmer's behalf.</li> <li>Go has pointers but not pointer arithmetic. Go pointers therefore more closely resemble C++ references. One cannot use a Go pointer variable to walk through the bytes of a string. Slices, discussed further below, satisfy most of the need for pointer arithmetic.</li> <li>Go is "safe" by default. Pointers cannot point to arbitrary memory, and buffer overruns result in crashes, not security exploits. The <code>unsafe</code> package lets programmers bypass some of Go's protection mechanisms where explicitly requested.</li> <li>Arrays in Go are first class values. When an array is used as a function parameter, the function receives a copy of the array, not a pointer to it. However, in practice functions often use slices for parameters; slices hold pointers to underlying arrays. Slices are discussed further below.</li> <li>Strings are provided by the language. They may not be changed once they have been created.</li> <li>Hash tables are provided by the language. They are called maps.</li> <li>Separate threads of execution, and communication channels between them, are provided by the language. This is discussed further below.</li> <li>Certain types (maps and channels, described further below) are passed by reference, not by value. That is, passing a map to a function does not copy the map, and if the function changes the map the change will be seen by the caller. In C++ terms, one can think of these as being reference types.</li> <li>Go does not use header files. Instead, each source file is part of a defined <em>package</em>. When a package defines an object (type, constant, variable, function) with a name starting with an upper case letter, that object is visible to any other file which imports that package.</li> <li>Go does not support implicit type conversion. Operations that mix different types require casts (called conversions in Go). This is true even of different user-defined aliases of the same underlying type.</li> <li>Go does not support function overloading and does not support user defined operators.</li> <li>Go does not support <code>const</code> or <code>volatile</code> qualifiers.</li> <li>Go uses <code>nil</code> for invalid pointers, where C++ uses <code>NULL</code> or simply <code>0</code> (or in C++11, <code>nullptr</code>).</li> <li>Idiomatic Go uses multiple return values to convey errors—one or more data results plus an error code—instead of sentinel values (e.g., <code>-1</code>) or structured exception handling (C++'s <code>try</code>…<code>catch</code> and <code>throw</code> or Go's <code>panic</code>…<code>recover</code>).</li> </ul> <h2>Syntax</h2> <p>The declaration syntax is reversed compared to C++. You write the name followed by the type. Unlike in C++, the syntax for a type does not match the way in which the variable is used. Type declarations may be read easily from left to right. (<code>var v1 int</code> → "Variable <code>v1</code> is an <code>int</code>.")</p> <div class=highlight><pre><span></span><code><span class=c1>//Go                      C++</span>
<span class=kd>var</span><span class=w> </span><span class=nx>v1</span><span class=w> </span><span class=kt>int</span><span class=w>                </span><span class=c1>// int v1;</span>
<span class=kd>var</span><span class=w> </span><span class=nx>v2</span><span class=w> </span><span class=kt>string</span><span class=w>             </span><span class=c1>// const std::string v2;  (approximately)</span>
<span class=kd>var</span><span class=w> </span><span class=nx>v3</span><span class=w> </span><span class=p>[</span><span class=mi>10</span><span class=p>]</span><span class=kt>int</span><span class=w>            </span><span class=c1>// int v3[10];</span>
<span class=kd>var</span><span class=w> </span><span class=nx>v4</span><span class=w> </span><span class=p>[]</span><span class=kt>int</span><span class=w>              </span><span class=c1>// int* v4;  (approximately)</span>
<span class=kd>var</span><span class=w> </span><span class=nx>v5</span><span class=w> </span><span class=kd>struct</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>f</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=p>}</span><span class=w>   </span><span class=c1>// struct { int f; } v5;</span>
<span class=kd>var</span><span class=w> </span><span class=nx>v6</span><span class=w> </span><span class=o>*</span><span class=kt>int</span><span class=w>               </span><span class=c1>// int* v6;  (but no pointer arithmetic)</span>
<span class=kd>var</span><span class=w> </span><span class=nx>v7</span><span class=w> </span><span class=kd>map</span><span class=p>[</span><span class=kt>string</span><span class=p>]</span><span class=kt>int</span><span class=w>     </span><span class=c1>// unordered_map&lt;string, int&gt;* v7;  (approximately)</span>
<span class=kd>var</span><span class=w> </span><span class=nx>v8</span><span class=w> </span><span class=kd>func</span><span class=p>(</span><span class=nx>a</span><span class=w> </span><span class=kt>int</span><span class=p>)</span><span class=w> </span><span class=kt>int</span><span class=w>    </span><span class=c1>// int (*v8)(int a);</span>
</code></pre></div> <p>Declarations generally take the form of a keyword followed by the name of the object being declared. The keyword is one of <code>var</code>, <code>func</code>, <code>const</code>, or <code>type</code>. Method declarations are a minor exception in that the receiver appears before the name of the object being declared; see the <a href=#interfaces>discussion of interfaces</a>.</p> <p>You can also use a keyword followed by a series of declarations in parentheses.</p> <div class=highlight><pre><span></span><code><span class=kd>var</span><span class=w> </span><span class=p>(</span>
<span class=w>	</span><span class=nx>i</span><span class=w> </span><span class=kt>int</span>
<span class=w>	</span><span class=nx>m</span><span class=w> </span><span class=kt>float64</span>
<span class=p>)</span>
</code></pre></div> <p>When declaring a function, you must either provide a name for each parameter or not provide a name for any parameter. (That is, C++ permits <code>void f(int i, int);</code>, but Go does not permit the analogous <code>func f(i int, int)</code>.) However, for convenience, in Go you may group several names with the same type:</p> <div class=highlight><pre><span></span><code><span class=kd>func</span><span class=w> </span><span class=nx>f</span><span class=p>(</span><span class=nx>i</span><span class=p>,</span><span class=w> </span><span class=nx>j</span><span class=p>,</span><span class=w> </span><span class=nx>k</span><span class=w> </span><span class=kt>int</span><span class=p>,</span><span class=w> </span><span class=nx>s</span><span class=p>,</span><span class=w> </span><span class=nx>t</span><span class=w> </span><span class=kt>string</span><span class=p>)</span>
</code></pre></div> <p>A variable may be initialized when it is declared. When this is done, specifying the type is permitted but not required. When the type is not specified, the type of the variable is the type of the initialization expression.</p> <div class=highlight><pre><span></span><code><span class=kd>var</span><span class=w> </span><span class=nx>v</span><span class=w> </span><span class=p>=</span><span class=w> </span><span class=o>*</span><span class=nx>p</span>
</code></pre></div> <p>See also the <a href=#Constants>discussion of constants, below</a>. If a variable is not initialized explicitly, the type must be specified. In that case it will be implicitly initialized to the type's zero value (<code>0</code>, <code>nil</code>, etc.). There are no uninitialized variables in Go.</p> <p>Within a function, a short declaration syntax is available with <code>:=</code> .</p> <div class=highlight><pre><span></span><code><span class=nx>v1</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=nx>v2</span><span class=w> </span><span class=c1>// C++11: auto v1 = v2;</span>
</code></pre></div> <p>This is equivalent to</p> <div class=highlight><pre><span></span><code><span class=kd>var</span><span class=w> </span><span class=nx>v1</span><span class=w> </span><span class=p>=</span><span class=w> </span><span class=nx>v2</span><span class=w> </span><span class=c1>// C++11: auto v1 = v2;</span>
</code></pre></div> <p>Go permits multiple assignments, which are done in parallel. That is, first all of the values on the right-hand side are computed, and then these values are assigned to the variables on the left-hand side.</p> <div class=highlight><pre><span></span><code><span class=nx>i</span><span class=p>,</span><span class=w> </span><span class=nx>j</span><span class=w> </span><span class=p>=</span><span class=w> </span><span class=nx>j</span><span class=p>,</span><span class=w> </span><span class=nx>i</span><span class=w> </span><span class=c1>// Swap i and j.</span>
</code></pre></div> <p>Functions may have multiple return values, indicated by a list in parentheses. The returned values can be stored by assignment to a list of variables.</p> <div class=highlight><pre><span></span><code><span class=kd>func</span><span class=w> </span><span class=nx>f</span><span class=p>()</span><span class=w> </span><span class=p>(</span><span class=nx>i</span><span class=w> </span><span class=kt>int</span><span class=p>,</span><span class=w> </span><span class=nx>j</span><span class=w> </span><span class=kt>int</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=o>...</span><span class=w> </span><span class=p>}</span>
<span class=nx>v1</span><span class=p>,</span><span class=w> </span><span class=nx>v2</span><span class=w> </span><span class=p>=</span><span class=w> </span><span class=nx>f</span><span class=p>()</span>
</code></pre></div> <p>Multiple return values are Go's primary mechanism for error handling:</p> <div class=highlight><pre><span></span><code><span class=nx>result</span><span class=p>,</span><span class=w> </span><span class=nx>ok</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=nx>g</span><span class=p>()</span>
<span class=k>if</span><span class=w> </span><span class=p>!</span><span class=nx>ok</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=c1>// Something bad happened.</span>
<span class=w>  </span><span class=k>return</span><span class=w> </span><span class=kc>nil</span>
<span class=p>}</span>
<span class=c1>// Continue as normal.</span>
<span class=err>…</span>
</code></pre></div> <p>or, more tersely,</p> <div class=highlight><pre><span></span><code><span class=k>if</span><span class=w> </span><span class=nx>result</span><span class=p>,</span><span class=w> </span><span class=nx>ok</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=nx>g</span><span class=p>();</span><span class=w> </span><span class=p>!</span><span class=nx>ok</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=c1>// Something bad happened.</span>
<span class=w>  </span><span class=k>return</span><span class=w> </span><span class=kc>nil</span>
<span class=p>}</span>
<span class=c1>// Continue as normal.</span>
<span class=err>…</span>
</code></pre></div> <p>Go code uses very few semicolons in practice. Technically, all Go statements are terminated by a semicolon. However, Go treats the end of a non-blank line as a semicolon unless the line is clearly incomplete (the exact rules are in <a href=https://go.dev/ref/spec#Semicolons>the language specification</a>). A consequence of this is that in some cases Go does not permit you to use a line break. For example, you may not write</p> <div class=highlight><pre><span></span><code><span class=kd>func</span><span class=w> </span><span class=nx>g</span><span class=p>()</span>
<span class=p>{</span><span class=w>                  </span><span class=c1>// INVALID</span>
<span class=p>}</span>
</code></pre></div> <p>A semicolon will be inserted after <code>g()</code>, causing it to be a function declaration rather than a function definition. Similarly, you may not write</p> <div class=highlight><pre><span></span><code><span class=k>if</span><span class=w> </span><span class=nx>x</span><span class=w> </span><span class=p>{</span>
<span class=p>}</span>
<span class=k>else</span><span class=w> </span><span class=p>{</span><span class=w>             </span><span class=c1>// INVALID</span>
<span class=p>}</span>
</code></pre></div> <p>A semicolon will be inserted after the <code>}</code> preceding the <code>else</code>, causing a syntax error.</p> <p>Since semicolons do end statements, you may continue using them as in C++. However, that is not the recommended style. Idiomatic Go code omits unnecessary semicolons, which in practice is all of them other than the initial <code>for</code> loop clause and cases where you want several short statements on a single line.</p> <p>While we're on the topic, we recommend that rather than worry about semicolons and brace placement, you format your code with the <code>gofmt</code> program. That will produce a single standard Go style, and let you worry about your code rather than your formatting. While the style may initially seem odd, it is as good as any other style, and familiarity will lead to comfort.</p> <p>When using a pointer to a struct, you use <code>.</code> instead of <code>-&gt;</code>. Thus, syntactically speaking, a structure and a pointer to a structure are used in the same way.</p> <div class=highlight><pre><span></span><code><span class=kd>type</span><span class=w> </span><span class=nx>myStruct</span><span class=w> </span><span class=kd>struct</span><span class=p>{</span><span class=w> </span><span class=nx>i</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=p>}</span>
<span class=kd>var</span><span class=w> </span><span class=nx>v9</span><span class=w> </span><span class=nx>myStruct</span><span class=w>  </span><span class=c1>// v9 has structure type</span>
<span class=kd>var</span><span class=w> </span><span class=nx>p9</span><span class=w> </span><span class=o>*</span><span class=nx>myStruct</span><span class=w> </span><span class=c1>// p9 is a pointer to a structure</span>
<span class=nx>f</span><span class=p>(</span><span class=nx>v9</span><span class=p>.</span><span class=nx>i</span><span class=p>,</span><span class=w> </span><span class=nx>p9</span><span class=p>.</span><span class=nx>i</span><span class=p>)</span>
</code></pre></div> <p>Go does not require parentheses around the condition of an <code>if</code> statement, or the expressions of a <code>for</code> statement, or the value of a <code>switch</code> statement. On the other hand, it does require curly braces around the body of an <code>if</code> or <code>for</code> statement.</p> <div class=highlight><pre><span></span><code><span class=k>if</span><span class=w> </span><span class=nx>a</span><span class=w> </span><span class=p>&lt;</span><span class=w> </span><span class=nx>b</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>f</span><span class=p>()</span><span class=w> </span><span class=p>}</span><span class=w>             </span><span class=c1>// Valid</span>
<span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>a</span><span class=w> </span><span class=p>&lt;</span><span class=w> </span><span class=nx>b</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>f</span><span class=p>()</span><span class=w> </span><span class=p>}</span><span class=w>           </span><span class=c1>// Valid (condition is a parenthesized expression)</span>
<span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>a</span><span class=w> </span><span class=p>&lt;</span><span class=w> </span><span class=nx>b</span><span class=p>)</span><span class=w> </span><span class=nx>f</span><span class=p>()</span><span class=w>               </span><span class=c1>// INVALID</span>
<span class=k>for</span><span class=w> </span><span class=nx>i</span><span class=w> </span><span class=p>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span><span class=w> </span><span class=nx>i</span><span class=w> </span><span class=p>&lt;</span><span class=w> </span><span class=mi>10</span><span class=p>;</span><span class=w> </span><span class=nx>i</span><span class=o>++</span><span class=w> </span><span class=p>{}</span><span class=w>    </span><span class=c1>// Valid</span>
<span class=k>for</span><span class=w> </span><span class=p>(</span><span class=nx>i</span><span class=w> </span><span class=p>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span><span class=w> </span><span class=nx>i</span><span class=w> </span><span class=p>&lt;</span><span class=w> </span><span class=mi>10</span><span class=p>;</span><span class=w> </span><span class=nx>i</span><span class=o>++</span><span class=p>)</span><span class=w> </span><span class=p>{}</span><span class=w>  </span><span class=c1>// INVALID</span>
</code></pre></div> <p>Go does not have a <code>while</code> statement nor does it have a <code>do/while</code> statement. The <code>for</code> statement may be used with a single condition, which makes it equivalent to a <code>while</code> statement. Omitting the condition entirely is an endless loop.</p> <p>Go permits <code>break</code> and <code>continue</code> to specify a label. The label must refer to a <code>for</code>, <code>switch</code>, or <code>select</code> statement.</p> <p>In a <code>switch</code> statement, <code>case</code> labels do not fall through. You can make them fall through using the <code>fallthrough</code> keyword. This applies even to adjacent cases.</p> <div class=highlight><pre><span></span><code><span class=k>switch</span><span class=w> </span><span class=nx>i</span><span class=w> </span><span class=p>{</span>
<span class=k>case</span><span class=w> </span><span class=mi>0</span><span class=p>:</span><span class=w> </span><span class=c1>// empty case body</span>
<span class=k>case</span><span class=w> </span><span class=mi>1</span><span class=p>:</span>
<span class=w>	</span><span class=nx>f</span><span class=p>()</span><span class=w> </span><span class=c1>// f is not called when i == 0!</span>
<span class=p>}</span>
</code></pre></div> <p>But a <code>case</code> can have multiple values.</p> <div class=highlight><pre><span></span><code><span class=k>switch</span><span class=w> </span><span class=nx>i</span><span class=w> </span><span class=p>{</span>
<span class=k>case</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>:</span>
<span class=w>	</span><span class=nx>f</span><span class=p>()</span><span class=w> </span><span class=c1>// f is called if i == 0 || i == 1.</span>
<span class=p>}</span>
</code></pre></div> <p>The values in a <code>case</code> need not be constants&ndash;or even integers; any type that supports the equality comparison operator, such as strings or pointers, can be used&ndash;and if the <code>switch</code> value is omitted it defaults to <code>true</code>.</p> <div class=highlight><pre><span></span><code><span class=k>switch</span><span class=w> </span><span class=p>{</span>
<span class=k>case</span><span class=w> </span><span class=nx>i</span><span class=w> </span><span class=p>&lt;</span><span class=w> </span><span class=mi>0</span><span class=p>:</span>
<span class=w>	</span><span class=nx>f1</span><span class=p>()</span>
<span class=k>case</span><span class=w> </span><span class=nx>i</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=mi>0</span><span class=p>:</span>
<span class=w>	</span><span class=nx>f2</span><span class=p>()</span>
<span class=k>case</span><span class=w> </span><span class=nx>i</span><span class=w> </span><span class=p>&gt;</span><span class=w> </span><span class=mi>0</span><span class=p>:</span>
<span class=w>	</span><span class=nx>f3</span><span class=p>()</span>
<span class=p>}</span>
</code></pre></div> <p>The <code>defer</code> statement may be used to call a function after the function containing the <code>defer</code> statement returns. <code>defer</code> often takes the place of a destructor in C++ but is associated with the calling code, not any particular class or object.</p> <div class=highlight><pre><span></span><code><span class=nx>fd</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=nx>open</span><span class=p>(</span><span class=s>&quot;filename&quot;</span><span class=p>)</span>
<span class=k>defer</span><span class=w> </span><span class=nb>close</span><span class=p>(</span><span class=nx>fd</span><span class=p>)</span><span class=w> </span><span class=c1>// fd will be closed when this function returns.</span>
</code></pre></div> <h2>Operators</h2> <p>The <code>++</code> and <code>--</code> operators may only be used in statements, not in expressions. You cannot write <code>c = *p++</code>. <code>*p++</code> is parsed as <code>(*p)++</code>.</p> <p>The operator precedence is different. As an example <code>4 &amp; 3 &lt;&lt; 1</code> evaluates to <code>0</code> in Go and <code>4</code> in C++.</p> <div class=highlight><pre><span></span><code>Go operator precedence:
1. *   /   %  &lt;&lt;  &gt;&gt;  &amp;  &amp;^
2. +   -   |  ^
3. ==  !=  &lt;  &lt;=  &gt;   &gt;=
4. &amp;&amp;
5. ||
</code></pre></div> <div class=highlight><pre><span></span><code>C++ operator precedence (only relevant operators):
1.  *    /   %
2.  +    -
3.  &lt;&lt;   &gt;&gt;
4.  &lt;    &lt;=  &gt;   &gt;=
5.  ==   !=
6.  &amp;
7.  ^
8.  |
9.  &amp;&amp;
10. ||
</code></pre></div> <h2>Constants</h2> <p>In Go constants may be <i>untyped</i>. This applies even to constants named with a <code>const</code> declaration, if no type is given in the declaration and the initializer expression uses only untyped constants. A value derived from an untyped constant becomes typed when it is used within a context that requires a typed value. This permits constants to be used relatively freely without requiring general implicit type conversion.</p> <div class=highlight><pre><span></span><code><span class=kd>var</span><span class=w> </span><span class=nx>a</span><span class=w> </span><span class=kt>uint</span>
<span class=nx>f</span><span class=p>(</span><span class=nx>a</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mi>1</span><span class=p>)</span><span class=w> </span><span class=c1>// untyped numeric constant &quot;1&quot; becomes typed as uint</span>
</code></pre></div> <p>The language does not impose any limits on the size of an untyped numeric constant or constant expression. A limit is only applied when a constant is used where a type is required.</p> <div class=highlight><pre><span></span><code><span class=kd>const</span><span class=w> </span><span class=nx>huge</span><span class=w> </span><span class=p>=</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=mi>100</span>
<span class=nx>f</span><span class=p>(</span><span class=nx>huge</span><span class=w> </span><span class=o>&gt;&gt;</span><span class=w> </span><span class=mi>98</span><span class=p>)</span>
</code></pre></div> <p>Go does not support enums. Instead, you can use the special name <code>iota</code> in a single <code>const</code> declaration to get a series of increasing value. When an initialization expression is omitted for a <code>const</code>, it reuses the preceding expression.</p> <div class=highlight><pre><span></span><code><span class=kd>const</span><span class=w> </span><span class=p>(</span>
<span class=w>	</span><span class=nx>red</span><span class=w>   </span><span class=p>=</span><span class=w> </span><span class=kc>iota</span><span class=w> </span><span class=c1>// red == 0</span>
<span class=w>	</span><span class=nx>blue</span><span class=w>         </span><span class=c1>// blue == 1</span>
<span class=w>	</span><span class=nx>green</span><span class=w>        </span><span class=c1>// green == 2</span>
<span class=p>)</span>
</code></pre></div> <h2>Types</h2> <p>C++ and Go provide similar, but not identical, built-in types: signed and unsigned integers of various widths, 32-bit and 64-bit floating-point numbers (real and complex), <code>struct</code>s, pointers, etc. In Go, <code>uint8</code>, <code>int64</code>, and like-named integer types are part of the language, not built on top of integers whose sizes are implementation-dependent (e.g., <code>long long</code>). Go additionally provides native <code>string</code>, <code>map</code>, and <code>chan</code> (channel) types as well as first-class arrays and slices (described below). Strings are encoded with Unicode, not ASCII.</p> <p>Go is far more strongly typed than C++. In particular, there is no implicit type conversion in Go, only explicit type conversion. This provides additional safety and freedom from a class of bugs but at the cost of some additional typing. There is also no <code>union</code> type in Go, as this would enable subversion of the type system. However, a Go <code>interface{}</code> (see below) provides a type-safe alternative.</p> <p>Both C++ and Go support type aliases (<code>typedef</code> in C++, <code>type</code> in Go). However, unlike C++, Go treats these as different types. Hence, the following is valid in C++:</p> <div class=highlight><pre><span></span><code><span class=c1>// C++</span>
<span class=k>typedef</span><span class=w> </span><span class=kt>double</span><span class=w> </span><span class=n>position</span><span class=p>;</span>
<span class=k>typedef</span><span class=w> </span><span class=kt>double</span><span class=w> </span><span class=n>velocity</span><span class=p>;</span>

<span class=n>position</span><span class=w> </span><span class=n>pos</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>218.0</span><span class=p>;</span>
<span class=n>velocity</span><span class=w> </span><span class=n>vel</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>-9.8</span><span class=p>;</span>

<span class=n>pos</span><span class=w> </span><span class=o>+=</span><span class=w> </span><span class=n>vel</span><span class=p>;</span>
</code></pre></div> <p>but the equivalent is invalid in Go without an explicit type conversion:</p> <div class=highlight><pre><span></span><code><span class=kd>type</span><span class=w> </span><span class=nx>position</span><span class=w> </span><span class=kt>float64</span>
<span class=kd>type</span><span class=w> </span><span class=nx>velocity</span><span class=w> </span><span class=kt>float64</span>

<span class=kd>var</span><span class=w> </span><span class=nx>pos</span><span class=w> </span><span class=nx>position</span><span class=w> </span><span class=p>=</span><span class=w> </span><span class=mf>218.0</span>
<span class=kd>var</span><span class=w> </span><span class=nx>vel</span><span class=w> </span><span class=nx>velocity</span><span class=w> </span><span class=p>=</span><span class=w> </span><span class=o>-</span><span class=mf>9.8</span>

<span class=nx>pos</span><span class=w> </span><span class=o>+=</span><span class=w> </span><span class=nx>vel</span><span class=w> </span><span class=c1>// INVALID: mismatched types position and velocity</span>
<span class=c1>// pos += position(vel)  // Valid</span>
</code></pre></div> <p>The same is true even for unaliased types: an <code>int</code> and a <code>uint</code> cannot be combined in an expression without explicitly converting one to the other.</p> <p>Go does not allow pointers to be cast to and from integers, unlike in C++. However, Go's <code>unsafe</code> package enables one to explicitly bypass this safety mechanism if necessary (e.g., for use in low-level systems code).</p> <h2>Slices</h2> <p>A slice is conceptually a struct with three fields: a pointer to an array, a length, and a capacity. Slices support the <code>[]</code> operator to access elements of the underlying array. The builtin <code>len</code> function returns the length of the slice. The builtin <code>cap</code> function returns the capacity.</p> <p>Given an array, or another slice, a new slice is created via <code>a[i:j]</code>. This creates a new slice that refers to <code>a</code>, starts at index <code>i</code>, and ends before index <code>j</code>. It has length <code>j-i</code>. If <code>i</code> is omitted, the slice starts at <code>0</code>. If <code>j</code> is omitted, the slice ends at <code>len(a)</code>. The new slice refers to the same array to which <code>a</code> refers. Two implications of this statement are that ① changes made using the new slice may be seen using <code>a</code>, and ② slice creation is (intended to be) cheap; no copy needs to be made of the underlying array. The capacity of the new slice is simply the capacity of <code>a</code> minus <code>i</code>. The capacity of an array is the length of the array.</p> <p>What this means is that Go uses slices for some cases where C++ uses pointers. If you create a value of type <code>[100]byte</code> (an array of 100 bytes, perhaps a buffer) and you want to pass it to a function without copying it, you should declare the function parameter to have type <code>[]byte</code>, and pass a slice of the array (<code>a[:]</code> will pass the entire array). Unlike in C++, it is not necessary to pass the length of the buffer; it is efficiently accessible via <code>len</code>.</p> <p>The slice syntax may also be used with a string. It returns a new string, whose value is a substring of the original string. Because strings are immutable, string slices can be implemented without allocating new storage for the slices's contents.</p> <h2>Making values</h2> <p>Go has a builtin function <code>new</code> which takes a type and allocates space on the heap. The allocated space will be zero-initialized for the type. For example, <code>new(int)</code> allocates a new int on the heap, initializes it with the value <code>0</code>, and returns its address, which has type <code>*int</code>. Unlike in C++, <code>new</code> is a function, not an operator; <code>new int</code> is a syntax error.</p> <p>Perhaps surprisingly, <code>new</code> is not commonly used in Go programs. In Go taking the address of a variable is always safe and never yields a dangling pointer. If the program takes the address of a variable, it will be allocated on the heap if necessary. So these functions are equivalent:</p> <div class=highlight><pre><span></span><code><span class=kd>type</span><span class=w> </span><span class=nx>S</span><span class=w> </span><span class=kd>struct</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>I</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=p>}</span>

<span class=kd>func</span><span class=w> </span><span class=nx>f1</span><span class=p>()</span><span class=w> </span><span class=o>*</span><span class=nx>S</span><span class=w> </span><span class=p>{</span>
<span class=w>	</span><span class=k>return</span><span class=w> </span><span class=nb>new</span><span class=p>(</span><span class=nx>S</span><span class=p>)</span>
<span class=p>}</span>

<span class=kd>func</span><span class=w> </span><span class=nx>f2</span><span class=p>()</span><span class=w> </span><span class=o>*</span><span class=nx>S</span><span class=w> </span><span class=p>{</span>
<span class=w>	</span><span class=kd>var</span><span class=w> </span><span class=nx>s</span><span class=w> </span><span class=nx>S</span>
<span class=w>	</span><span class=k>return</span><span class=w> </span><span class=o>&amp;</span><span class=nx>s</span>
<span class=p>}</span>

<span class=kd>func</span><span class=w> </span><span class=nx>f3</span><span class=p>()</span><span class=w> </span><span class=o>*</span><span class=nx>S</span><span class=w> </span><span class=p>{</span>
<span class=w>	</span><span class=c1>// More idiomatic: use composite literal syntax.</span>
<span class=w>	</span><span class=k>return</span><span class=w> </span><span class=o>&amp;</span><span class=nx>S</span><span class=p>{}</span>
<span class=p>}</span>
</code></pre></div> <p>In contrast, it is not safe in C++ to return a pointer to a local variable:</p> <div class=highlight><pre><span></span><code><span class=c1>// C++</span>
<span class=n>S</span><span class=o>*</span><span class=w> </span><span class=nf>f2</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=n>S</span><span class=w> </span><span class=n>s</span><span class=p>;</span>
<span class=w>  </span><span class=k>return</span><span class=w> </span><span class=o>&amp;</span><span class=n>s</span><span class=p>;</span><span class=w>   </span><span class=c1>// INVALID -- contents can be overwritten at any time</span>
<span class=p>}</span>
</code></pre></div> <p>Map and channel values must be allocated using the builtin function <code>make</code>. A variable declared with map or channel type without an initializer will be automatically initialized to <code>nil</code>. Calling <code>make(map[int]int)</code> returns a newly allocated value of type <code>map[int]int</code>. Note that <code>make</code> returns a value, not a pointer. This is consistent with the fact that map and channel values are passed by reference. Calling <code>make</code> with a map type takes an optional argument which is the expected capacity of the map. Calling <code>make</code> with a channel type takes an optional argument which sets the buffering capacity of the channel; the default is 0 (unbuffered).</p> <p>The <code>make</code> function may also be used to allocate a slice. In this case it allocates memory for the underlying array and returns a slice referring to it. There is one required argument, which is the number of elements in the slice. A second, optional, argument is the capacity of the slice. For example, <code>make([]int, 10, 20)</code>. This is identical to <code>new([20]int)[0:10]</code>. Since Go uses garbage collection, the newly allocated array will be discarded sometime after there are no references to the returned slice.</p> <h2>Interfaces</h2> <p>Where C++ provides classes, subclasses and templates, Go provides interfaces. A Go interface is similar to a C++ pure abstract class: a class with no data members, with methods which are all pure virtual. However, in Go, any type which provides the methods named in the interface may be treated as an implementation of the interface. No explicitly declared inheritance is required. The implementation of the interface is entirely separate from the interface itself.</p> <p>A method looks like an ordinary function definition, except that it has a <em>receiver</em>. The receiver is similar to the <code>this</code> pointer in a C++ class method.</p> <div class=highlight><pre><span></span><code><span class=kd>type</span><span class=w> </span><span class=nx>myType</span><span class=w> </span><span class=kd>struct</span><span class=p>{</span><span class=w> </span><span class=nx>i</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=p>}</span>

<span class=kd>func</span><span class=w> </span><span class=p>(</span><span class=nx>p</span><span class=w> </span><span class=o>*</span><span class=nx>myType</span><span class=p>)</span><span class=w> </span><span class=nx>Get</span><span class=p>()</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=k>return</span><span class=w> </span><span class=nx>p</span><span class=p>.</span><span class=nx>i</span><span class=w> </span><span class=p>}</span>
</code></pre></div> <p>This declares a method <code>Get</code> associated with <code>myType</code>. The receiver is named <code>p</code> in the body of the function.</p> <p>Methods are defined on named types. If you convert the value to a different type, the new value will have the methods of the new type, not the old type.</p> <p>You may define methods on a builtin type by declaring a new named type derived from it. The new type is distinct from the builtin type.</p> <div class=highlight><pre><span></span><code><span class=kd>type</span><span class=w> </span><span class=nx>myInteger</span><span class=w> </span><span class=kt>int</span>

<span class=kd>func</span><span class=w> </span><span class=p>(</span><span class=nx>p</span><span class=w> </span><span class=nx>myInteger</span><span class=p>)</span><span class=w> </span><span class=nx>Get</span><span class=p>()</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=k>return</span><span class=w> </span><span class=nb>int</span><span class=p>(</span><span class=nx>p</span><span class=p>)</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=c1>// Conversion required.</span>
<span class=kd>func</span><span class=w> </span><span class=nx>f</span><span class=p>(</span><span class=nx>i</span><span class=w> </span><span class=kt>int</span><span class=p>)</span><span class=w>                </span><span class=p>{}</span>

<span class=kd>var</span><span class=w> </span><span class=nx>v</span><span class=w> </span><span class=nx>myInteger</span>

<span class=c1>// f(v) is invalid.</span>
<span class=c1>// f(int(v)) is valid; int(v) has no defined methods.</span>
</code></pre></div> <p>Given this interface:</p> <div class=highlight><pre><span></span><code><span class=kd>type</span><span class=w> </span><span class=nx>myInterface</span><span class=w> </span><span class=kd>interface</span><span class=w> </span><span class=p>{</span>
<span class=w>	</span><span class=nx>Get</span><span class=p>()</span><span class=w> </span><span class=kt>int</span>
<span class=w>	</span><span class=nx>Set</span><span class=p>(</span><span class=nx>i</span><span class=w> </span><span class=kt>int</span><span class=p>)</span>
<span class=p>}</span>
</code></pre></div> <p>we can make <code>myType</code> satisfy the interface by adding</p> <div class=highlight><pre><span></span><code><span class=kd>func</span><span class=w> </span><span class=p>(</span><span class=nx>p</span><span class=w> </span><span class=o>*</span><span class=nx>myType</span><span class=p>)</span><span class=w> </span><span class=nx>Set</span><span class=p>(</span><span class=nx>i</span><span class=w> </span><span class=kt>int</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>p</span><span class=p>.</span><span class=nx>i</span><span class=w> </span><span class=p>=</span><span class=w> </span><span class=nx>i</span><span class=w> </span><span class=p>}</span>
</code></pre></div> <p>Now any function which takes <code>myInterface</code> as a parameter will accept a variable of type <code>*myType</code>.</p> <div class=highlight><pre><span></span><code><span class=kd>func</span><span class=w> </span><span class=nx>GetAndSet</span><span class=p>(</span><span class=nx>x</span><span class=w> </span><span class=nx>myInterface</span><span class=p>)</span><span class=w> </span><span class=p>{}</span>
<span class=kd>func</span><span class=w> </span><span class=nx>f1</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<span class=w>	</span><span class=kd>var</span><span class=w> </span><span class=nx>p</span><span class=w> </span><span class=nx>myType</span>
<span class=w>	</span><span class=nx>GetAndSet</span><span class=p>(</span><span class=o>&amp;</span><span class=nx>p</span><span class=p>)</span>
<span class=p>}</span>
</code></pre></div> <p>In other words, if we view <code>myInterface</code> as a C++ pure abstract base class, defining <code>Set</code> and <code>Get</code> for <code>*myType</code> made <code>*myType</code> automatically inherit from <code>myInterface</code>. A type may satisfy multiple interfaces.</p> <p>An anonymous field may be used to implement something much like a C++ child class.</p> <div class=highlight><pre><span></span><code><span class=kd>type</span><span class=w> </span><span class=nx>myChildType</span><span class=w> </span><span class=kd>struct</span><span class=w> </span><span class=p>{</span>
<span class=w>	</span><span class=nx>myType</span>
<span class=w>	</span><span class=nx>j</span><span class=w> </span><span class=kt>int</span>
<span class=p>}</span>

<span class=kd>func</span><span class=w> </span><span class=p>(</span><span class=nx>p</span><span class=w> </span><span class=o>*</span><span class=nx>myChildType</span><span class=p>)</span><span class=w> </span><span class=nx>Get</span><span class=p>()</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>p</span><span class=p>.</span><span class=nx>j</span><span class=o>++</span><span class=p>;</span><span class=w> </span><span class=k>return</span><span class=w> </span><span class=nx>p</span><span class=p>.</span><span class=nx>myType</span><span class=p>.</span><span class=nx>Get</span><span class=p>()</span><span class=w> </span><span class=p>}</span>
</code></pre></div> <p>This effectively implements <code>myChildType</code> as a child of <code>myType</code>.</p> <div class=highlight><pre><span></span><code><span class=kd>func</span><span class=w> </span><span class=nx>f2</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<span class=w>	</span><span class=kd>var</span><span class=w> </span><span class=nx>p</span><span class=w> </span><span class=nx>myChildType</span>
<span class=w>	</span><span class=nx>GetAndSet</span><span class=p>(</span><span class=o>&amp;</span><span class=nx>p</span><span class=p>)</span>
<span class=p>}</span>
</code></pre></div> <p>The <code>Set</code> method is effectively inherited from <code>myType</code>, because methods associated with the anonymous field are promoted to become methods of the enclosing type. In this case, because <code>myChildType</code> has an anonymous field of type <code>myType</code>, the methods of <code>myType</code> also become methods of <code>myChildType</code>. In this example, the <code>Get</code> method was overridden, and the <code>Set</code> method was inherited.</p> <p>This is not precisely the same as a child class in C++. When a method of an anonymous field is called, its receiver is the field, not the surrounding struct. In other words, methods on anonymous fields are not virtual functions. When you want the equivalent of a virtual function, use an interface.</p> <p>A variable that has an interface type may be converted to have a different interface type using a special construct called a type assertion. This is implemented dynamically at run time, like C++ <code>dynamic_cast</code>. Unlike <code>dynamic_cast</code>, there does not need to be any declared relationship between the two interfaces.</p> <div class=highlight><pre><span></span><code><span class=kd>type</span><span class=w> </span><span class=nx>myPrintInterface</span><span class=w> </span><span class=kd>interface</span><span class=w> </span><span class=p>{</span>
<span class=w>	</span><span class=nx>Print</span><span class=p>()</span>
<span class=p>}</span>

<span class=kd>func</span><span class=w> </span><span class=nx>f3</span><span class=p>(</span><span class=nx>x</span><span class=w> </span><span class=nx>myInterface</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>	</span><span class=nx>x</span><span class=p>.(</span><span class=nx>myPrintInterface</span><span class=p>).</span><span class=nx>Print</span><span class=p>()</span><span class=w> </span><span class=c1>// type assertion to myPrintInterface</span>
<span class=p>}</span>
</code></pre></div> <p>The conversion to <code>myPrintInterface</code> is entirely dynamic. It will work as long as the dynamic type of x defines a <code>Print</code> method.</p> <p>Because the conversion is dynamic, it may be used to implement generic programming similar to templates in C++. This is done by manipulating values of the minimal interface.</p> <div class=highlight><pre><span></span><code><span class=kd>type</span><span class=w> </span><span class=nx>Any</span><span class=w> </span><span class=kd>interface</span><span class=p>{}</span>
</code></pre></div> <p>Containers may be written in terms of <code>Any</code>, but the caller must unbox using a type assertion to recover values of the contained type. As the typing is dynamic rather than static, there is no equivalent of the way that a C++ template may inline the relevant operations. The operations are fully type-checked at run time, but all operations will involve a function call.</p> <div class=highlight><pre><span></span><code><span class=kd>type</span><span class=w> </span><span class=nx>Iterator</span><span class=w> </span><span class=kd>interface</span><span class=w> </span><span class=p>{</span>
<span class=w>	</span><span class=nx>Get</span><span class=p>()</span><span class=w> </span><span class=nx>Any</span>
<span class=w>	</span><span class=nx>Set</span><span class=p>(</span><span class=nx>v</span><span class=w> </span><span class=nx>Any</span><span class=p>)</span>
<span class=w>	</span><span class=nx>Increment</span><span class=p>()</span>
<span class=w>	</span><span class=nx>Equal</span><span class=p>(</span><span class=nx>arg</span><span class=w> </span><span class=nx>Iterator</span><span class=p>)</span><span class=w> </span><span class=kt>bool</span>
<span class=p>}</span>
</code></pre></div> <p>Note that <code>Equal</code> has an argument of type <code>Iterator</code>. This does not behave like a C++ template. See <a href=/doc/faq#t_and_equal_interface>the FAQ</a>.</p> <h2>Function closures</h2> <p>In C++ versions prior to C++11, the most common way to create a function with hidden state is to use a "functor"—a class that overloads <code>operator()</code> to make instances look like functions. For example, the following code defines a <code>my_transform</code> function (a simplified version of the STL's <code>std::transform</code>) that applies a given unary operator (<code>op</code>) to each element of an array (<code>in</code>), storing the result in another array (<code>out</code>). To implement a prefix sum (i.e., {<code>x[0]</code>, <code>x[0]+x[1]</code>, <code>x[0]+x[1]+x[2]</code>, …}) the code creates a functor (<code>MyFunctor</code>) that keeps track of the running total (<code>total</code>) and passes an instance of this functor to <code>my_transform</code>.</p> <div class=highlight><pre><span></span><code><span class=c1>// C++</span>
<span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;iostream&gt;</span>
<span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;cstddef&gt;</span>

<span class=k>template</span><span class=w> </span><span class=o>&lt;</span><span class=k>class</span><span class=w> </span><span class=nc>UnaryOperator</span><span class=o>&gt;</span>
<span class=kt>void</span><span class=w> </span><span class=n>my_transform</span><span class=w> </span><span class=p>(</span><span class=kt>size_t</span><span class=w> </span><span class=n>n_elts</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=o>*</span><span class=w> </span><span class=n>in</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=o>*</span><span class=w> </span><span class=n>out</span><span class=p>,</span><span class=w> </span><span class=n>UnaryOperator</span><span class=w> </span><span class=n>op</span><span class=p>)</span>
<span class=p>{</span>
<span class=w>  </span><span class=kt>size_t</span><span class=w> </span><span class=n>i</span><span class=p>;</span>

<span class=w>  </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>n_elts</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=o>++</span><span class=p>)</span>
<span class=w>    </span><span class=n>out</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>op</span><span class=p>(</span><span class=n>in</span><span class=p>[</span><span class=n>i</span><span class=p>]);</span>
<span class=p>}</span>

<span class=k>class</span><span class=w> </span><span class=nc>MyFunctor</span><span class=w> </span><span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
<span class=w>  </span><span class=kt>int</span><span class=w> </span><span class=n>total</span><span class=p>;</span>
<span class=w>  </span><span class=kt>int</span><span class=w> </span><span class=nf>operator</span><span class=p>()(</span><span class=kt>int</span><span class=w> </span><span class=n>v</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=n>total</span><span class=w> </span><span class=o>+=</span><span class=w> </span><span class=n>v</span><span class=p>;</span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>total</span><span class=p>;</span>
<span class=w>  </span><span class=p>}</span>
<span class=w>  </span><span class=n>MyFunctor</span><span class=p>()</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>total</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span><span class=w> </span><span class=p>{}</span>
<span class=p>};</span>

<span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=w> </span><span class=p>(</span><span class=kt>void</span><span class=p>)</span>
<span class=p>{</span>
<span class=w>  </span><span class=kt>int</span><span class=w> </span><span class=n>data</span><span class=p>[</span><span class=mi>7</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span><span class=mi>8</span><span class=p>,</span><span class=w> </span><span class=mi>6</span><span class=p>,</span><span class=w> </span><span class=mi>7</span><span class=p>,</span><span class=w> </span><span class=mi>5</span><span class=p>,</span><span class=w> </span><span class=mi>3</span><span class=p>,</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=mi>9</span><span class=p>};</span>
<span class=w>  </span><span class=kt>int</span><span class=w> </span><span class=n>result</span><span class=p>[</span><span class=mi>7</span><span class=p>];</span>
<span class=w>  </span><span class=n>MyFunctor</span><span class=w> </span><span class=n>accumulate</span><span class=p>;</span>
<span class=w>  </span><span class=n>my_transform</span><span class=p>(</span><span class=mi>7</span><span class=p>,</span><span class=w> </span><span class=n>data</span><span class=p>,</span><span class=w> </span><span class=n>result</span><span class=p>,</span><span class=w> </span><span class=n>accumulate</span><span class=p>);</span>

<span class=w>  </span><span class=n>std</span><span class=o>::</span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;Result is [ &quot;</span><span class=p>;</span>
<span class=w>  </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>size_t</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=mi>7</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=o>++</span><span class=p>)</span>
<span class=w>    </span><span class=n>std</span><span class=o>::</span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>result</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=sc>&#39; &#39;</span><span class=p>;</span>
<span class=w>  </span><span class=n>std</span><span class=o>::</span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;]</span><span class=se>\n</span><span class=s>&quot;</span><span class=p>;</span>
<span class=w>  </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></div> <p>C++11 adds anonymous ("lambda") functions, which can be stored in variables and passed to functions. They can optionally serve as closures, meaning they can reference state from parent scopes. This feature greatly simplifies <code>my_transform</code>:</p> <div class=highlight><pre><span></span><code><span class=c1>// C++11</span>
<span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;iostream&gt;</span>
<span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;cstddef&gt;</span>
<span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;functional&gt;</span>

<span class=kt>void</span><span class=w> </span><span class=nf>my_transform</span><span class=w> </span><span class=p>(</span><span class=kt>size_t</span><span class=w> </span><span class=n>n_elts</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=o>*</span><span class=w> </span><span class=n>in</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=o>*</span><span class=w> </span><span class=n>out</span><span class=p>,</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>function</span><span class=o>&lt;</span><span class=kt>int</span><span class=p>(</span><span class=kt>int</span><span class=p>)</span><span class=o>&gt;</span><span class=w> </span><span class=n>op</span><span class=p>)</span>
<span class=p>{</span>
<span class=w>  </span><span class=kt>size_t</span><span class=w> </span><span class=n>i</span><span class=p>;</span>

<span class=w>  </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>n_elts</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=o>++</span><span class=p>)</span>
<span class=w>    </span><span class=n>out</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>op</span><span class=p>(</span><span class=n>in</span><span class=p>[</span><span class=n>i</span><span class=p>]);</span>
<span class=p>}</span>

<span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=w> </span><span class=p>(</span><span class=kt>void</span><span class=p>)</span>
<span class=p>{</span>
<span class=w>  </span><span class=kt>int</span><span class=w> </span><span class=n>data</span><span class=p>[</span><span class=mi>7</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span><span class=mi>8</span><span class=p>,</span><span class=w> </span><span class=mi>6</span><span class=p>,</span><span class=w> </span><span class=mi>7</span><span class=p>,</span><span class=w> </span><span class=mi>5</span><span class=p>,</span><span class=w> </span><span class=mi>3</span><span class=p>,</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=mi>9</span><span class=p>};</span>
<span class=w>  </span><span class=kt>int</span><span class=w> </span><span class=n>result</span><span class=p>[</span><span class=mi>7</span><span class=p>];</span>
<span class=w>  </span><span class=kt>int</span><span class=w> </span><span class=n>total</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
<span class=w>  </span><span class=n>my_transform</span><span class=p>(</span><span class=mi>7</span><span class=p>,</span><span class=w> </span><span class=n>data</span><span class=p>,</span><span class=w> </span><span class=n>result</span><span class=p>,</span><span class=w> </span><span class=p>[</span><span class=o>&amp;</span><span class=n>total</span><span class=p>]</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>v</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=n>total</span><span class=w> </span><span class=o>+=</span><span class=w> </span><span class=n>v</span><span class=p>;</span>
<span class=w>      </span><span class=k>return</span><span class=w> </span><span class=n>total</span><span class=p>;</span>
<span class=w>    </span><span class=p>});</span>

<span class=w>  </span><span class=n>std</span><span class=o>::</span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;Result is [ &quot;</span><span class=p>;</span>
<span class=w>  </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>size_t</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=mi>7</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=o>++</span><span class=p>)</span>
<span class=w>    </span><span class=n>std</span><span class=o>::</span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>result</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=sc>&#39; &#39;</span><span class=p>;</span>
<span class=w>  </span><span class=n>std</span><span class=o>::</span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;]</span><span class=se>\n</span><span class=s>&quot;</span><span class=p>;</span>
<span class=w>  </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></div> <p>A typical Go version of <code>my_transform</code> looks a lot like the C++11 version:</p> <div class=highlight><pre><span></span><code><span class=kn>package</span><span class=w> </span><span class=nx>main</span>

<span class=kn>import</span><span class=w> </span><span class=s>&quot;fmt&quot;</span>

<span class=kd>func</span><span class=w> </span><span class=nx>my_transform</span><span class=p>(</span><span class=nx>in</span><span class=w> </span><span class=p>[]</span><span class=kt>int</span><span class=p>,</span><span class=w> </span><span class=nx>xform</span><span class=w> </span><span class=kd>func</span><span class=p>(</span><span class=kt>int</span><span class=p>)</span><span class=w> </span><span class=kt>int</span><span class=p>)</span><span class=w> </span><span class=p>(</span><span class=nx>out</span><span class=w> </span><span class=p>[]</span><span class=kt>int</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>	</span><span class=nx>out</span><span class=w> </span><span class=p>=</span><span class=w> </span><span class=nb>make</span><span class=p>([]</span><span class=kt>int</span><span class=p>,</span><span class=w> </span><span class=nb>len</span><span class=p>(</span><span class=nx>in</span><span class=p>))</span>
<span class=w>	</span><span class=k>for</span><span class=w> </span><span class=nx>idx</span><span class=p>,</span><span class=w> </span><span class=nx>val</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=k>range</span><span class=w> </span><span class=nx>in</span><span class=w> </span><span class=p>{</span>
<span class=w>		</span><span class=nx>out</span><span class=p>[</span><span class=nx>idx</span><span class=p>]</span><span class=w> </span><span class=p>=</span><span class=w> </span><span class=nx>xform</span><span class=p>(</span><span class=nx>val</span><span class=p>)</span>
<span class=w>	</span><span class=p>}</span>
<span class=w>	</span><span class=k>return</span>
<span class=p>}</span>

<span class=kd>func</span><span class=w> </span><span class=nx>main</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<span class=w>	</span><span class=nx>data</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=p>[]</span><span class=kt>int</span><span class=p>{</span><span class=mi>8</span><span class=p>,</span><span class=w> </span><span class=mi>6</span><span class=p>,</span><span class=w> </span><span class=mi>7</span><span class=p>,</span><span class=w> </span><span class=mi>5</span><span class=p>,</span><span class=w> </span><span class=mi>3</span><span class=p>,</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=mi>9</span><span class=p>}</span>
<span class=w>	</span><span class=nx>total</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=mi>0</span>
<span class=w>	</span><span class=nx>fmt</span><span class=p>.</span><span class=nx>Printf</span><span class=p>(</span><span class=s>&quot;Result is %v\n&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>my_transform</span><span class=p>(</span><span class=nx>data</span><span class=p>,</span><span class=w> </span><span class=kd>func</span><span class=p>(</span><span class=nx>v</span><span class=w> </span><span class=kt>int</span><span class=p>)</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=p>{</span>
<span class=w>		</span><span class=nx>total</span><span class=w> </span><span class=o>+=</span><span class=w> </span><span class=nx>v</span>
<span class=w>		</span><span class=k>return</span><span class=w> </span><span class=nx>total</span>
<span class=w>	</span><span class=p>}))</span>
<span class=p>}</span>
</code></pre></div> <p>(Note that we chose to return <code>out</code> from <code>my_transform</code> rather than pass it an <code>out</code> to write to. This was an aesthetic decision; the code could have been written more like the C++ version in that regard.)</p> <p>In Go, functions are always full closures, the equivalent of <code>[&amp;]</code> in C++11. An important difference is that it is invalid in C++11 for a closure to reference a variable whose scope has gone away (as may be caused by an <a href=http://en.wikipedia.org/wiki/Funarg_problem>upward funarg</a>—a function that returns a lambda that references local variables). In Go, this is perfectly valid.</p> <h2>Concurrency</h2> <p>Like C++11's <code>std::thread</code>, Go permits starting new threads of execution that run concurrently in a shared address space. These are called <em>goroutines</em> and are spawned using the <code>go</code> statement. While typical <code>std::thread</code> implementations launch heavyweight, operating-system threads, goroutines are implemented as lightweight, user-level threads that are multiplexed among multiple operating-system threads. Consequently, goroutines are (intended to be) cheap and can be used liberally throughout a program.</p> <div class=highlight><pre><span></span><code><span class=kd>func</span><span class=w> </span><span class=nx>server</span><span class=p>(</span><span class=nx>i</span><span class=w> </span><span class=kt>int</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>	</span><span class=k>for</span><span class=w> </span><span class=p>{</span>
<span class=w>		</span><span class=nx>fmt</span><span class=p>.</span><span class=nx>Print</span><span class=p>(</span><span class=nx>i</span><span class=p>)</span>
<span class=w>		</span><span class=nx>time</span><span class=p>.</span><span class=nx>Sleep</span><span class=p>(</span><span class=mi>10</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=nx>time</span><span class=p>.</span><span class=nx>Second</span><span class=p>)</span>
<span class=w>	</span><span class=p>}</span>
<span class=p>}</span>
<span class=k>go</span><span class=w> </span><span class=nx>server</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
<span class=k>go</span><span class=w> </span><span class=nx>server</span><span class=p>(</span><span class=mi>2</span><span class=p>)</span>
</code></pre></div> <p>(Note that the <code>for</code> statement in the <code>server</code> function is equivalent to a C++ <code>while (true)</code> loop.)</p> <p>Function literals (which Go implements as closures) can be useful with the <code>go</code> statement.</p> <div class=highlight><pre><span></span><code><span class=kd>var</span><span class=w> </span><span class=nx>g</span><span class=w> </span><span class=kt>int</span>
<span class=k>go</span><span class=w> </span><span class=kd>func</span><span class=p>(</span><span class=nx>i</span><span class=w> </span><span class=kt>int</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>	</span><span class=nx>s</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=mi>0</span>
<span class=w>	</span><span class=k>for</span><span class=w> </span><span class=nx>j</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span><span class=w> </span><span class=nx>j</span><span class=w> </span><span class=p>&lt;</span><span class=w> </span><span class=nx>i</span><span class=p>;</span><span class=w> </span><span class=nx>j</span><span class=o>++</span><span class=w> </span><span class=p>{</span>
<span class=w>		</span><span class=nx>s</span><span class=w> </span><span class=o>+=</span><span class=w> </span><span class=nx>j</span>
<span class=w>	</span><span class=p>}</span>
<span class=w>	</span><span class=nx>g</span><span class=w> </span><span class=p>=</span><span class=w> </span><span class=nx>s</span>
<span class=p>}(</span><span class=mi>1000</span><span class=p>)</span><span class=w> </span><span class=c1>// Passes argument 1000 to the function literal.</span>
</code></pre></div> <p>Like C++11, but unlike prior versions of C++, Go defines a <a href=https://go.dev/ref/mem>memory model</a> for unsynchronized accesses to memory. Although Go provides an analogue of <code>std::mutex</code> in its <code>sync</code> package, this is not the normal way to implement inter-thread communication and synchronization in Go programs. Instead, Go threads more typically communicate by message passing, which is a fundamentally different approach from locks and barriers. The Go mantra for this subject is,</p> <blockquote> <p>Do not communicate by sharing memory; instead, share memory by communicating.</p> </blockquote> <p>That is, <em>channels</em> are used to communicate among goroutines. Values of any type (including other channels!) can be sent over a channel. Channels can be unbuffered or buffered (using a buffer length specified at channel-construction time).</p> <p>Channels are first-class values; they can be stored in variables and passed to and from functions like any other value. (When supplied to functions, channels are passed by reference.) Channels are also typed: a <code>chan int</code> is different from a <code>chan string</code>.</p> <p>Because they are so widely used in Go programs, channels are (intended to be) efficient and cheap. To send a value on a channel, use <code>&lt;-</code> as a binary operator. To receive a value on a channel, use <code>&lt;-</code> as a unary operator. Channels can be shared among multiple senders and multiple receivers and guarantee that each value sent is received by at most one receiver.</p> <p>Here is an example of using a manager function to control access to a single value.</p> <div class=highlight><pre><span></span><code><span class=kd>type</span><span class=w> </span><span class=nx>Cmd</span><span class=w> </span><span class=kd>struct</span><span class=w> </span><span class=p>{</span>
<span class=w>	</span><span class=nx>Get</span><span class=w> </span><span class=kt>bool</span>
<span class=w>	</span><span class=nx>Val</span><span class=w> </span><span class=kt>int</span>
<span class=p>}</span>

<span class=kd>func</span><span class=w> </span><span class=nx>Manager</span><span class=p>(</span><span class=nx>ch</span><span class=w> </span><span class=kd>chan</span><span class=w> </span><span class=nx>Cmd</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>	</span><span class=nx>val</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=mi>0</span>
<span class=w>	</span><span class=k>for</span><span class=w> </span><span class=p>{</span>
<span class=w>		</span><span class=nx>c</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=o>&lt;-</span><span class=nx>ch</span>
<span class=w>		</span><span class=k>if</span><span class=w> </span><span class=nx>c</span><span class=p>.</span><span class=nx>Get</span><span class=w> </span><span class=p>{</span>
<span class=w>			</span><span class=nx>c</span><span class=p>.</span><span class=nx>Val</span><span class=w> </span><span class=p>=</span><span class=w> </span><span class=nx>val</span>
<span class=w>			</span><span class=nx>ch</span><span class=w> </span><span class=o>&lt;-</span><span class=w> </span><span class=nx>c</span>
<span class=w>		</span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<span class=w>			</span><span class=nx>val</span><span class=w> </span><span class=p>=</span><span class=w> </span><span class=nx>c</span><span class=p>.</span><span class=nx>Val</span>
<span class=w>		</span><span class=p>}</span>
<span class=w>	</span><span class=p>}</span>
<span class=p>}</span>
</code></pre></div> <p>In that example the same channel is used for input and output. This is incorrect if there are multiple goroutines communicating with the manager at once: a goroutine waiting for a response from the manager might receive a request from another goroutine instead. A solution is to pass in a channel.</p> <div class=highlight><pre><span></span><code><span class=kd>type</span><span class=w> </span><span class=nx>Cmd2</span><span class=w> </span><span class=kd>struct</span><span class=w> </span><span class=p>{</span>
<span class=w>	</span><span class=nx>Get</span><span class=w> </span><span class=kt>bool</span>
<span class=w>	</span><span class=nx>Val</span><span class=w> </span><span class=kt>int</span>
<span class=w>	</span><span class=nx>Ch</span><span class=w>  </span><span class=kd>chan</span><span class=o>&lt;-</span><span class=w> </span><span class=kt>int</span>
<span class=p>}</span>

<span class=kd>func</span><span class=w> </span><span class=nx>Manager2</span><span class=p>(</span><span class=nx>ch</span><span class=w> </span><span class=o>&lt;-</span><span class=kd>chan</span><span class=w> </span><span class=nx>Cmd2</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>	</span><span class=nx>val</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=mi>0</span>
<span class=w>	</span><span class=k>for</span><span class=w> </span><span class=p>{</span>
<span class=w>		</span><span class=nx>c</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=o>&lt;-</span><span class=nx>ch</span>
<span class=w>		</span><span class=k>if</span><span class=w> </span><span class=nx>c</span><span class=p>.</span><span class=nx>Get</span><span class=w> </span><span class=p>{</span>
<span class=w>			</span><span class=nx>c</span><span class=p>.</span><span class=nx>Ch</span><span class=w> </span><span class=o>&lt;-</span><span class=w> </span><span class=nx>val</span>
<span class=w>		</span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<span class=w>			</span><span class=nx>val</span><span class=w> </span><span class=p>=</span><span class=w> </span><span class=nx>c</span><span class=p>.</span><span class=nx>Val</span>
<span class=w>		</span><span class=p>}</span>
<span class=w>	</span><span class=p>}</span>
<span class=p>}</span>
</code></pre></div> <p>To use <code>Manager2</code>, given a channel to it:</p> <div class=highlight><pre><span></span><code><span class=kd>func</span><span class=w> </span><span class=nx>getFromManagedChannel</span><span class=p>(</span><span class=nx>ch</span><span class=w> </span><span class=kd>chan</span><span class=o>&lt;-</span><span class=w> </span><span class=nx>Cmd2</span><span class=p>)</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=p>{</span>
<span class=w>	</span><span class=nx>myCh</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=nb>make</span><span class=p>(</span><span class=kd>chan</span><span class=w> </span><span class=kt>int</span><span class=p>)</span>
<span class=w>	</span><span class=nx>c</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=nx>Cmd2</span><span class=p>{</span><span class=kc>true</span><span class=p>,</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=nx>myCh</span><span class=p>}</span><span class=w> </span><span class=c1>// Composite literal syntax.</span>
<span class=w>	</span><span class=nx>ch</span><span class=w> </span><span class=o>&lt;-</span><span class=w> </span><span class=nx>c</span>
<span class=w>	</span><span class=k>return</span><span class=w> </span><span class=o>&lt;-</span><span class=nx>myCh</span>
<span class=p>}</span>

<span class=kd>func</span><span class=w> </span><span class=nx>main</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<span class=w>	</span><span class=nx>ch</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=nb>make</span><span class=p>(</span><span class=kd>chan</span><span class=w> </span><span class=nx>Cmd2</span><span class=p>)</span>
<span class=w>	</span><span class=k>go</span><span class=w> </span><span class=nx>Manager2</span><span class=p>(</span><span class=nx>ch</span><span class=p>)</span>
<span class=w>	</span><span class=c1>// ... some code ...</span>
<span class=w>	</span><span class=nx>currentValue</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=nx>getFromManagedChannel</span><span class=p>(</span><span class=nx>ch</span><span class=p>)</span>
<span class=w>	</span><span class=c1>// ... some more code...</span>
<span class=p>}</span>
</code></pre></div> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs Insiders </a> </div> <div class=md-social> <a href=https://github.com/zchee target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"annotate": null, "base": "..", "features": ["content.code.annotate", "navigation.expand", "navigation.instant", "navigation.sections", "toc.integrate", "search.suggest", "search.highlight"], "search": "../assets/javascripts/workers/search.26099bd0.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script> <script src=../assets/javascripts/bundle.9d1edc04.min.js></script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script> <script src=https://unpkg.com/mermaid></script> <script src=https://github.com/facelessuser/pymdown-extensions/raw/main/docs/theme/assets/pymdownx-extras/extra-loader-9e2c67b9.js></script> <script src=https://github.com/facelessuser/pymdown-extensions/raw/main/docs/theme/assets/pymdownx-extras/material-extra-3rdparty-804b836e.js></script> <script src=https://github.com/facelessuser/pymdown-extensions/raw/main/docs/theme/assets/pymdownx-extras/material-extra-theme-7c147bb7.js></script> </body> </html>