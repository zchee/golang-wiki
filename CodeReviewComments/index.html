<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Personal fork of Go Programming Language Wiki"><link href=https://zchee.github.io/golang-wiki/CodeReviewComments/ rel=canonical><link href=../CodeReview/ rel=prev><link href=../CodeReviewConcurrency/ rel=next><link rel=icon href=../assets/images/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.21+insiders-4.53.17"><title>Go Code Review Comments - Go Programming Language Wiki</title><link rel=stylesheet href=../assets/stylesheets/main.7d528353.min.css><link rel=stylesheet href=../assets/stylesheets/palette.ab4e12ef.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=https://github.com/facelessuser/pymdown-extensions/raw/main/docs/theme/assets/pymdownx-extras/extra-2d3bedca0e.css><script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=blue data-md-color-accent=light-blue> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#gofmt class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=.. title="Go Programming Language Wiki" class="md-header__button md-logo" aria-label="Go Programming Language Wiki" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Go Programming Language Wiki </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Go Code Review Comments </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/zchee/golang-wiki title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> zchee/golang-wiki </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--integrated" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=.. title="Go Programming Language Wiki" class="md-nav__button md-logo" aria-label="Go Programming Language Wiki" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> Go Programming Language Wiki </label> <div class=md-nav__source> <a href=https://github.com/zchee/golang-wiki title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> zchee/golang-wiki </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Home/ class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class=md-nav__item> <a href=../AI/ class=md-nav__link> <span class=md-ellipsis> AI </span> </a> </li> <li class=md-nav__item> <a href=../Articles/ class=md-nav__link> <span class=md-ellipsis> Articles </span> </a> </li> <li class=md-nav__item> <a href=../AssemblyPolicy/ class=md-nav__link> <span class=md-ellipsis> AssemblyPolicy </span> </a> </li> <li class=md-nav__item> <a href=../AVX512/ class=md-nav__link> <span class=md-ellipsis> AVX512 </span> </a> </li> <li class=md-nav__item> <a href=../Benchmarks/ class=md-nav__link> <span class=md-ellipsis> Benchmarks </span> </a> </li> <li class=md-nav__item> <a href=../Blogs/ class=md-nav__link> <span class=md-ellipsis> Blogs </span> </a> </li> <li class=md-nav__item> <a href=../Books/ class=md-nav__link> <span class=md-ellipsis> Books </span> </a> </li> <li class=md-nav__item> <a href=../BoundingResourceUse/ class=md-nav__link> <span class=md-ellipsis> BoundingResourceUse </span> </a> </li> <li class=md-nav__item> <a href=../cgo/ class=md-nav__link> <span class=md-ellipsis> cgo </span> </a> </li> <li class=md-nav__item> <a href=../ChromeOS/ class=md-nav__link> <span class=md-ellipsis> ChromeOS </span> </a> </li> <li class=md-nav__item> <a href=../CodeReview/ class=md-nav__link> <span class=md-ellipsis> CodeReview </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> CodeReviewComments </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> CodeReviewComments </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#gofmt class=md-nav__link> <span class=md-ellipsis> Gofmt </span> </a> </li> <li class=md-nav__item> <a href=#comment-sentences class=md-nav__link> <span class=md-ellipsis> Comment Sentences </span> </a> </li> <li class=md-nav__item> <a href=#contexts class=md-nav__link> <span class=md-ellipsis> Contexts </span> </a> </li> <li class=md-nav__item> <a href=#copying class=md-nav__link> <span class=md-ellipsis> Copying </span> </a> </li> <li class=md-nav__item> <a href=#crypto-rand class=md-nav__link> <span class=md-ellipsis> Crypto Rand </span> </a> </li> <li class=md-nav__item> <a href=#declaring-empty-slices class=md-nav__link> <span class=md-ellipsis> Declaring Empty Slices </span> </a> </li> <li class=md-nav__item> <a href=#doc-comments class=md-nav__link> <span class=md-ellipsis> Doc Comments </span> </a> </li> <li class=md-nav__item> <a href=#dont-panic class=md-nav__link> <span class=md-ellipsis> Don't Panic </span> </a> </li> <li class=md-nav__item> <a href=#error-strings class=md-nav__link> <span class=md-ellipsis> Error Strings </span> </a> </li> <li class=md-nav__item> <a href=#examples class=md-nav__link> <span class=md-ellipsis> Examples </span> </a> </li> <li class=md-nav__item> <a href=#goroutine-lifetimes class=md-nav__link> <span class=md-ellipsis> Goroutine Lifetimes </span> </a> </li> <li class=md-nav__item> <a href=#handle-errors class=md-nav__link> <span class=md-ellipsis> Handle Errors </span> </a> </li> <li class=md-nav__item> <a href=#imports class=md-nav__link> <span class=md-ellipsis> Imports </span> </a> </li> <li class=md-nav__item> <a href=#import-blank class=md-nav__link> <span class=md-ellipsis> Import Blank </span> </a> </li> <li class=md-nav__item> <a href=#import-dot class=md-nav__link> <span class=md-ellipsis> Import Dot </span> </a> </li> <li class=md-nav__item> <a href=#in-band-errors class=md-nav__link> <span class=md-ellipsis> In-Band Errors </span> </a> </li> <li class=md-nav__item> <a href=#indent-error-flow class=md-nav__link> <span class=md-ellipsis> Indent Error Flow </span> </a> </li> <li class=md-nav__item> <a href=#initialisms class=md-nav__link> <span class=md-ellipsis> Initialisms </span> </a> </li> <li class=md-nav__item> <a href=#interfaces class=md-nav__link> <span class=md-ellipsis> Interfaces </span> </a> </li> <li class=md-nav__item> <a href=#line-length class=md-nav__link> <span class=md-ellipsis> Line Length </span> </a> </li> <li class=md-nav__item> <a href=#mixed-caps class=md-nav__link> <span class=md-ellipsis> Mixed Caps </span> </a> </li> <li class=md-nav__item> <a href=#named-result-parameters class=md-nav__link> <span class=md-ellipsis> Named Result Parameters </span> </a> </li> <li class=md-nav__item> <a href=#naked-returns class=md-nav__link> <span class=md-ellipsis> Naked Returns </span> </a> </li> <li class=md-nav__item> <a href=#package-comments class=md-nav__link> <span class=md-ellipsis> Package Comments </span> </a> </li> <li class=md-nav__item> <a href=#package-names class=md-nav__link> <span class=md-ellipsis> Package Names </span> </a> </li> <li class=md-nav__item> <a href=#pass-values class=md-nav__link> <span class=md-ellipsis> Pass Values </span> </a> </li> <li class=md-nav__item> <a href=#receiver-names class=md-nav__link> <span class=md-ellipsis> Receiver Names </span> </a> </li> <li class=md-nav__item> <a href=#receiver-type class=md-nav__link> <span class=md-ellipsis> Receiver Type </span> </a> </li> <li class=md-nav__item> <a href=#synchronous-functions class=md-nav__link> <span class=md-ellipsis> Synchronous Functions </span> </a> </li> <li class=md-nav__item> <a href=#useful-test-failures class=md-nav__link> <span class=md-ellipsis> Useful Test Failures </span> </a> </li> <li class=md-nav__item> <a href=#variable-names class=md-nav__link> <span class=md-ellipsis> Variable Names </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../CodeReviewConcurrency/ class=md-nav__link> <span class=md-ellipsis> CodeReviewConcurrency </span> </a> </li> <li class=md-nav__item> <a href=../CodeTools/ class=md-nav__link> <span class=md-ellipsis> CodeTools </span> </a> </li> <li class=md-nav__item> <a href=../Comments/ class=md-nav__link> <span class=md-ellipsis> Comments </span> </a> </li> <li class=md-nav__item> <a href=../CommitMessage/ class=md-nav__link> <span class=md-ellipsis> CommitMessage </span> </a> </li> <li class=md-nav__item> <a href=../CommonMistakes/ class=md-nav__link> <span class=md-ellipsis> CommonMistakes </span> </a> </li> <li class=md-nav__item> <a href=../CompilerOptimizations/ class=md-nav__link> <span class=md-ellipsis> CompilerOptimizations </span> </a> </li> <li class=md-nav__item> <a href=../Conferences/ class=md-nav__link> <span class=md-ellipsis> Conferences </span> </a> </li> <li class=md-nav__item> <a href=../Configuring-GoLand-for-WebAssembly/ class=md-nav__link> <span class=md-ellipsis> Configuring GoLand for WebAssembly </span> </a> </li> <li class=md-nav__item> <a href=../Contributing-to-gopls/ class=md-nav__link> <span class=md-ellipsis> Contributing to gopls </span> </a> </li> <li class=md-nav__item> <a href=../Contributing/ class=md-nav__link> <span class=md-ellipsis> Contributing </span> </a> </li> <li class=md-nav__item> <a href=../CoreDumpDebugging/ class=md-nav__link> <span class=md-ellipsis> CoreDumpDebugging </span> </a> </li> <li class=md-nav__item> <a href=../Courses/ class=md-nav__link> <span class=md-ellipsis> Courses </span> </a> </li> <li class=md-nav__item> <a href=../CreatingSubRepository/ class=md-nav__link> <span class=md-ellipsis> CreatingSubRepository </span> </a> </li> <li class=md-nav__item> <a href=../CSSStyleGuide/ class=md-nav__link> <span class=md-ellipsis> CSSStyleGuide </span> </a> </li> <li class=md-nav__item> <a href=../CustomPprofProfiles/ class=md-nav__link> <span class=md-ellipsis> CustomPprofProfiles </span> </a> </li> <li class=md-nav__item> <a href=../Darwin/ class=md-nav__link> <span class=md-ellipsis> Darwin </span> </a> </li> <li class=md-nav__item> <a href=../DashboardBuilders/ class=md-nav__link> <span class=md-ellipsis> DashboardBuilders </span> </a> </li> <li class=md-nav__item> <a href=../Deprecated/ class=md-nav__link> <span class=md-ellipsis> Deprecated </span> </a> </li> <li class=md-nav__item> <a href=../DesignDocuments/ class=md-nav__link> <span class=md-ellipsis> DesignDocuments </span> </a> </li> <li class=md-nav__item> <a href=../Diagnostics/ class=md-nav__link> <span class=md-ellipsis> Diagnostics </span> </a> </li> <li class=md-nav__item> <a href=../Download-build-farm-failed-logs-and-debugging/ class=md-nav__link> <span class=md-ellipsis> Download build farm failed logs and debugging </span> </a> </li> <li class=md-nav__item> <a href=../DragonFly-BSD/ class=md-nav__link> <span class=md-ellipsis> DragonFly BSD </span> </a> </li> <li class=md-nav__item> <a href=../Errors/ class=md-nav__link> <span class=md-ellipsis> Errors </span> </a> </li> <li class=md-nav__item> <a href=../ErrorValueFAQ/ class=md-nav__link> <span class=md-ellipsis> ErrorValueFAQ </span> </a> </li> <li class=md-nav__item> <a href=../ExperienceReports/ class=md-nav__link> <span class=md-ellipsis> ExperienceReports </span> </a> </li> <li class=md-nav__item> <a href=../FileTreeDocumentation/ class=md-nav__link> <span class=md-ellipsis> FileTreeDocumentation </span> </a> </li> <li class=md-nav__item> <a href=../FreeBSD/ class=md-nav__link> <span class=md-ellipsis> FreeBSD </span> </a> </li> <li class=md-nav__item> <a href=../FromXToGo/ class=md-nav__link> <span class=md-ellipsis> FromXToGo </span> </a> </li> <li class=md-nav__item> <a href=../Frozen/ class=md-nav__link> <span class=md-ellipsis> Frozen </span> </a> </li> <li class=md-nav__item> <a href=../Fuzzing-trophy-case/ class=md-nav__link> <span class=md-ellipsis> Fuzzing trophy case </span> </a> </li> <li class=md-nav__item> <a href=../Gardening/ class=md-nav__link> <span class=md-ellipsis> Gardening </span> </a> </li> <li class=md-nav__item> <a href=../GccgoCrossCompilation/ class=md-nav__link> <span class=md-ellipsis> GccgoCrossCompilation </span> </a> </li> <li class=md-nav__item> <a href=../GcToolchainTricks/ class=md-nav__link> <span class=md-ellipsis> GcToolchainTricks </span> </a> </li> <li class=md-nav__item> <a href=../GerritAccess/ class=md-nav__link> <span class=md-ellipsis> GerritAccess </span> </a> </li> <li class=md-nav__item> <a href=../GerritBot/ class=md-nav__link> <span class=md-ellipsis> GerritBot </span> </a> </li> <li class=md-nav__item> <a href=../GitHubAccess/ class=md-nav__link> <span class=md-ellipsis> GitHubAccess </span> </a> </li> <li class=md-nav__item> <a href=../Go-1.10-Release-Party/ class=md-nav__link> <span class=md-ellipsis> Go 1.10 Release Party </span> </a> </li> <li class=md-nav__item> <a href=../Go-1.6-release-party/ class=md-nav__link> <span class=md-ellipsis> Go 1.6 release party </span> </a> </li> <li class=md-nav__item> <a href=../Go-1.8-Release-Party/ class=md-nav__link> <span class=md-ellipsis> Go 1.8 Release Party </span> </a> </li> <li class=md-nav__item> <a href=../Go-Community-Slides/ class=md-nav__link> <span class=md-ellipsis> Go Community Slides </span> </a> </li> <li class=md-nav__item> <a href=../Go-Release-Cycle/ class=md-nav__link> <span class=md-ellipsis> Go Release Cycle </span> </a> </li> <li class=md-nav__item> <a href=../Go123Timer/ class=md-nav__link> <span class=md-ellipsis> Go123Timer </span> </a> </li> <li class=md-nav__item> <a href=../Go2/ class=md-nav__link> <span class=md-ellipsis> Go2 </span> </a> </li> <li class=md-nav__item> <a href=../Go2ErrorHandlingFeedback/ class=md-nav__link> <span class=md-ellipsis> Go2ErrorHandlingFeedback </span> </a> </li> <li class=md-nav__item> <a href=../Go2ErrorValuesFeedback/ class=md-nav__link> <span class=md-ellipsis> Go2ErrorValuesFeedback </span> </a> </li> <li class=md-nav__item> <a href=../Go2GenericsFeedback/ class=md-nav__link> <span class=md-ellipsis> Go2GenericsFeedback </span> </a> </li> <li class=md-nav__item> <a href=../GoArm/ class=md-nav__link> <span class=md-ellipsis> GoArm </span> </a> </li> <li class=md-nav__item> <a href=../GoForCPPProgrammers/ class=md-nav__link> <span class=md-ellipsis> GoForCPPProgrammers </span> </a> </li> <li class=md-nav__item> <a href=../GoGenerateTools/ class=md-nav__link> <span class=md-ellipsis> GoGenerateTools </span> </a> </li> <li class=md-nav__item> <a href=../GoGetProxyConfig/ class=md-nav__link> <span class=md-ellipsis> GoGetProxyConfig </span> </a> </li> <li class=md-nav__item> <a href=../GoGetTools/ class=md-nav__link> <span class=md-ellipsis> GoGetTools </span> </a> </li> <li class=md-nav__item> <a href=../golang-tools/ class=md-nav__link> <span class=md-ellipsis> golang tools </span> </a> </li> <li class=md-nav__item> <a href=../GoMips/ class=md-nav__link> <span class=md-ellipsis> GoMips </span> </a> </li> <li class=md-nav__item> <a href=../Gomote/ class=md-nav__link> <span class=md-ellipsis> Gomote </span> </a> </li> <li class=md-nav__item> <a href=../GOPATH/ class=md-nav__link> <span class=md-ellipsis> GOPATH </span> </a> </li> <li class=md-nav__item> <a href=../Gopher/ class=md-nav__link> <span class=md-ellipsis> Gopher </span> </a> </li> <li class=md-nav__item> <a href=../gopherbot/ class=md-nav__link> <span class=md-ellipsis> gopherbot </span> </a> </li> <li class=md-nav__item> <a href=../gopls-integrator-FAQ/ class=md-nav__link> <span class=md-ellipsis> gopls integrator FAQ </span> </a> </li> <li class=md-nav__item> <a href=../gopls/ class=md-nav__link> <span class=md-ellipsis> gopls </span> </a> </li> <li class=md-nav__item> <a href=../GoStrings/ class=md-nav__link> <span class=md-ellipsis> GoStrings </span> </a> </li> <li class=md-nav__item> <a href=../GoTalks/ class=md-nav__link> <span class=md-ellipsis> GoTalks </span> </a> </li> <li class=md-nav__item> <a href=../GoUserGroups/ class=md-nav__link> <span class=md-ellipsis> GoUserGroups </span> </a> </li> <li class=md-nav__item> <a href=../GoUsers/ class=md-nav__link> <span class=md-ellipsis> GoUsers </span> </a> </li> <li class=md-nav__item> <a href=../HandlingIssues/ class=md-nav__link> <span class=md-ellipsis> HandlingIssues </span> </a> </li> <li class=md-nav__item> <a href=../heapdump13/ class=md-nav__link> <span class=md-ellipsis> heapdump13 </span> </a> </li> <li class=md-nav__item> <a href=../heapdump14/ class=md-nav__link> <span class=md-ellipsis> heapdump14 </span> </a> </li> <li class=md-nav__item> <a href=../heapdump15-through-heapdump17/ class=md-nav__link> <span class=md-ellipsis> heapdump15 through heapdump17 </span> </a> </li> <li class=md-nav__item> <a href=../heapdump15/ class=md-nav__link> <span class=md-ellipsis> heapdump15 </span> </a> </li> <li class=md-nav__item> <a href=../HostedContinuousIntegration/ class=md-nav__link> <span class=md-ellipsis> HostedContinuousIntegration </span> </a> </li> <li class=md-nav__item> <a href=../How-to-ask-for-help/ class=md-nav__link> <span class=md-ellipsis> How to ask for help </span> </a> </li> <li class=md-nav__item> <a href=../HowToAsk/ class=md-nav__link> <span class=md-ellipsis> HowToAsk </span> </a> </li> <li class=md-nav__item> <a href=../IDEsAndTextEditorPlugins/ class=md-nav__link> <span class=md-ellipsis> IDEsAndTextEditorPlugins </span> </a> </li> <li class=md-nav__item> <a href=../InstallFromSource/ class=md-nav__link> <span class=md-ellipsis> InstallFromSource </span> </a> </li> <li class=md-nav__item> <a href=../InstallTroubleshooting/ class=md-nav__link> <span class=md-ellipsis> InstallTroubleshooting </span> </a> </li> <li class=md-nav__item> <a href=../InterfaceSlice/ class=md-nav__link> <span class=md-ellipsis> InterfaceSlice </span> </a> </li> <li class=md-nav__item> <a href=../InvalidFlag/ class=md-nav__link> <span class=md-ellipsis> InvalidFlag </span> </a> </li> <li class=md-nav__item> <a href=../Iota/ class=md-nav__link> <span class=md-ellipsis> Iota </span> </a> </li> <li class=md-nav__item> <a href=../Learn/ class=md-nav__link> <span class=md-ellipsis> Learn </span> </a> </li> <li class=md-nav__item> <a href=../LearnConcurrency/ class=md-nav__link> <span class=md-ellipsis> LearnConcurrency </span> </a> </li> <li class=md-nav__item> <a href=../LearnErrorHandling/ class=md-nav__link> <span class=md-ellipsis> LearnErrorHandling </span> </a> </li> <li class=md-nav__item> <a href=../LearnServerProgramming/ class=md-nav__link> <span class=md-ellipsis> LearnServerProgramming </span> </a> </li> <li class=md-nav__item> <a href=../LearnTesting/ class=md-nav__link> <span class=md-ellipsis> LearnTesting </span> </a> </li> <li class=md-nav__item> <a href=../Linux/ class=md-nav__link> <span class=md-ellipsis> Linux </span> </a> </li> <li class=md-nav__item> <a href=../LinuxKernelSignalVectorBug/ class=md-nav__link> <span class=md-ellipsis> LinuxKernelSignalVectorBug </span> </a> </li> <li class=md-nav__item> <a href=../Livestreams/ class=md-nav__link> <span class=md-ellipsis> Livestreams </span> </a> </li> <li class=md-nav__item> <a href=../LockOSThread/ class=md-nav__link> <span class=md-ellipsis> LockOSThread </span> </a> </li> <li class=md-nav__item> <a href=../LoopvarExperiment/ class=md-nav__link> <span class=md-ellipsis> LoopvarExperiment </span> </a> </li> <li class=md-nav__item> <a href=../LUCI/ class=md-nav__link> <span class=md-ellipsis> LUCI </span> </a> </li> <li class=md-nav__item> <a href=../MacOS12BSDThreadRegisterIssue/ class=md-nav__link> <span class=md-ellipsis> MacOS12BSDThreadRegisterIssue </span> </a> </li> <li class=md-nav__item> <a href=../MethodSets/ class=md-nav__link> <span class=md-ellipsis> MethodSets </span> </a> </li> <li class=md-nav__item> <a href=../MinimumRequirements/ class=md-nav__link> <span class=md-ellipsis> MinimumRequirements </span> </a> </li> <li class=md-nav__item> <a href=../MinorReleases/ class=md-nav__link> <span class=md-ellipsis> MinorReleases </span> </a> </li> <li class=md-nav__item> <a href=../Mobile/ class=md-nav__link> <span class=md-ellipsis> Mobile </span> </a> </li> <li class=md-nav__item> <a href=../Modules/ class=md-nav__link> <span class=md-ellipsis> Modules </span> </a> </li> <li class=md-nav__item> <a href=../MutexOrChannel/ class=md-nav__link> <span class=md-ellipsis> MutexOrChannel </span> </a> </li> <li class=md-nav__item> <a href=../NetBSD/ class=md-nav__link> <span class=md-ellipsis> NetBSD </span> </a> </li> <li class=md-nav__item> <a href=../NewSpeakers/ class=md-nav__link> <span class=md-ellipsis> NewSpeakers </span> </a> </li> <li class=md-nav__item> <a href=../NonEnglish/ class=md-nav__link> <span class=md-ellipsis> NonEnglish </span> </a> </li> <li class=md-nav__item> <a href=../NoPlusOne/ class=md-nav__link> <span class=md-ellipsis> NoPlusOne </span> </a> </li> <li class=md-nav__item> <a href=../OpenBSD/ class=md-nav__link> <span class=md-ellipsis> OpenBSD </span> </a> </li> <li class=md-nav__item> <a href=../PackagePublishing/ class=md-nav__link> <span class=md-ellipsis> PackagePublishing </span> </a> </li> <li class=md-nav__item> <a href=../PanicAndRecover/ class=md-nav__link> <span class=md-ellipsis> PanicAndRecover </span> </a> </li> <li class=md-nav__item> <a href=../Performance/ class=md-nav__link> <span class=md-ellipsis> Performance </span> </a> </li> <li class=md-nav__item> <a href=../PerformanceMonitoring/ class=md-nav__link> <span class=md-ellipsis> PerformanceMonitoring </span> </a> </li> <li class=md-nav__item> <a href=../PGO-Tools/ class=md-nav__link> <span class=md-ellipsis> PGO Tools </span> </a> </li> <li class=md-nav__item> <a href=../Plan9/ class=md-nav__link> <span class=md-ellipsis> Plan9 </span> </a> </li> <li class=md-nav__item> <a href=../Podcasts/ class=md-nav__link> <span class=md-ellipsis> Podcasts </span> </a> </li> <li class=md-nav__item> <a href=../PortingPolicy/ class=md-nav__link> <span class=md-ellipsis> PortingPolicy </span> </a> </li> <li class=md-nav__item> <a href=../PriorDiscussion/ class=md-nav__link> <span class=md-ellipsis> PriorDiscussion </span> </a> </li> <li class=md-nav__item> <a href=../Projects/ class=md-nav__link> <span class=md-ellipsis> Projects </span> </a> </li> <li class=md-nav__item> <a href=../Proposals/ class=md-nav__link> <span class=md-ellipsis> Proposals </span> </a> </li> <li class=md-nav__item> <a href=../ProviderIntegration/ class=md-nav__link> <span class=md-ellipsis> ProviderIntegration </span> </a> </li> <li class=md-nav__item> <a href=../Questions/ class=md-nav__link> <span class=md-ellipsis> Questions </span> </a> </li> <li class=md-nav__item> <a href=../Quiet-Weeks/ class=md-nav__link> <span class=md-ellipsis> Quiet Weeks </span> </a> </li> <li class=md-nav__item> <a href=../Range/ class=md-nav__link> <span class=md-ellipsis> Range </span> </a> </li> <li class=md-nav__item> <a href=../RangefuncExperiment/ class=md-nav__link> <span class=md-ellipsis> RangefuncExperiment </span> </a> </li> <li class=md-nav__item> <a href=../RateLimiting/ class=md-nav__link> <span class=md-ellipsis> RateLimiting </span> </a> </li> <li class=md-nav__item> <a href=../ResearchPapers/ class=md-nav__link> <span class=md-ellipsis> ResearchPapers </span> </a> </li> <li class=md-nav__item> <a href=../Resolving-Problems-From-Modified-Module-Path/ class=md-nav__link> <span class=md-ellipsis> Resolving Problems From Modified Module Path </span> </a> </li> <li class=md-nav__item> <a href=../Resources-for-slog/ class=md-nav__link> <span class=md-ellipsis> Resources for slog </span> </a> </li> <li class=md-nav__item> <a href=../RiskyChanges/ class=md-nav__link> <span class=md-ellipsis> RiskyChanges </span> </a> </li> <li class=md-nav__item> <a href=../Screencasts/ class=md-nav__link> <span class=md-ellipsis> Screencasts </span> </a> </li> <li class=md-nav__item> <a href=../SettingGOPATH/ class=md-nav__link> <span class=md-ellipsis> SettingGOPATH </span> </a> </li> <li class=md-nav__item> <a href=../SignalHandling/ class=md-nav__link> <span class=md-ellipsis> SignalHandling </span> </a> </li> <li class=md-nav__item> <a href=../SimultaneousAssignment/ class=md-nav__link> <span class=md-ellipsis> SimultaneousAssignment </span> </a> </li> <li class=md-nav__item> <a href=../SliceTricks/ class=md-nav__link> <span class=md-ellipsis> SliceTricks </span> </a> </li> <li class=md-nav__item> <a href=../SlowBots/ class=md-nav__link> <span class=md-ellipsis> SlowBots </span> </a> </li> <li class=md-nav__item> <a href=../Solaris/ class=md-nav__link> <span class=md-ellipsis> Solaris </span> </a> </li> <li class=md-nav__item> <a href=../Spectre/ class=md-nav__link> <span class=md-ellipsis> Spectre </span> </a> </li> <li class=md-nav__item> <a href=../Spelling/ class=md-nav__link> <span class=md-ellipsis> Spelling </span> </a> </li> <li class=md-nav__item> <a href=../SQLDrivers/ class=md-nav__link> <span class=md-ellipsis> SQLDrivers </span> </a> </li> <li class=md-nav__item> <a href=../SQLInterface/ class=md-nav__link> <span class=md-ellipsis> SQLInterface </span> </a> </li> <li class=md-nav__item> <a href=../Style/ class=md-nav__link> <span class=md-ellipsis> Style </span> </a> </li> <li class=md-nav__item> <a href=../SuccessStories/ class=md-nav__link> <span class=md-ellipsis> SuccessStories </span> </a> </li> <li class=md-nav__item> <a href=../Switch/ class=md-nav__link> <span class=md-ellipsis> Switch </span> </a> </li> <li class=md-nav__item> <a href=../TableDrivenTests/ class=md-nav__link> <span class=md-ellipsis> TableDrivenTests </span> </a> </li> <li class=md-nav__item> <a href=../TargetSpecific/ class=md-nav__link> <span class=md-ellipsis> TargetSpecific </span> </a> </li> <li class=md-nav__item> <a href=../TestComments/ class=md-nav__link> <span class=md-ellipsis> TestComments </span> </a> </li> <li class=md-nav__item> <a href=../TestFailures/ class=md-nav__link> <span class=md-ellipsis> TestFailures </span> </a> </li> <li class=md-nav__item> <a href=../Timeouts/ class=md-nav__link> <span class=md-ellipsis> Timeouts </span> </a> </li> <li class=md-nav__item> <a href=../Training/ class=md-nav__link> <span class=md-ellipsis> Training </span> </a> </li> <li class=md-nav__item> <a href=../Ubuntu/ class=md-nav__link> <span class=md-ellipsis> Ubuntu </span> </a> </li> <li class=md-nav__item> <a href=../Watchflakes/ class=md-nav__link> <span class=md-ellipsis> Watchflakes </span> </a> </li> <li class=md-nav__item> <a href=../WebAccessibilityResourcesAndTips/ class=md-nav__link> <span class=md-ellipsis> WebAccessibilityResourcesAndTips </span> </a> </li> <li class=md-nav__item> <a href=../WebAssembly/ class=md-nav__link> <span class=md-ellipsis> WebAssembly </span> </a> </li> <li class=md-nav__item> <a href=../Well-known-struct-tags/ class=md-nav__link> <span class=md-ellipsis> Well known struct tags </span> </a> </li> <li class=md-nav__item> <a href=../WhyGo/ class=md-nav__link> <span class=md-ellipsis> WhyGo </span> </a> </li> <li class=md-nav__item> <a href=../Windows/ class=md-nav__link> <span class=md-ellipsis> Windows </span> </a> </li> <li class=md-nav__item> <a href=../WindowsBuild/ class=md-nav__link> <span class=md-ellipsis> WindowsBuild </span> </a> </li> <li class=md-nav__item> <a href=../WindowsCrossCompiling/ class=md-nav__link> <span class=md-ellipsis> WindowsCrossCompiling </span> </a> </li> <li class=md-nav__item> <a href=../WindowsDLLs/ class=md-nav__link> <span class=md-ellipsis> WindowsDLLs </span> </a> </li> <li class=md-nav__item> <a href=../X-Repositories/ class=md-nav__link> <span class=md-ellipsis> X Repositories </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1>CodeReviewComments</h1> <p>This page collects common comments made during reviews of Go code, so that a single detailed explanation can be referred to by shorthands. This is a laundry list of common style issues, not a comprehensive style guide.</p> <p>You can view this as a supplement to <a href=https://go.dev/doc/effective_go>Effective Go</a>.</p> <p>Additional comments related to testing can be found at <a href=/wiki/TestComments>Go Test Comments</a></p> <p>Google has published a longer <a href=https://google.github.io/styleguide/go/decisions>Go Style Guide</a>.</p> <p><strong>Please <a href="https://go.dev/issue/new?title=wiki%3A+CodeReviewComments+change&body=&labels=Documentation">discuss changes</a> before editing this page</strong>, even <em>minor</em> ones. Many people have opinions and this is not the place for edit wars.</p> <ul> <li><a href=#gofmt>Gofmt</a></li> <li><a href=#comment-sentences>Comment Sentences</a></li> <li><a href=#contexts>Contexts</a></li> <li><a href=#copying>Copying</a></li> <li><a href=#crypto-rand>Crypto Rand</a></li> <li><a href=#declaring-empty-slices>Declaring Empty Slices</a></li> <li><a href=#doc-comments>Doc Comments</a></li> <li><a href=#dont-panic>Don't Panic</a></li> <li><a href=#error-strings>Error Strings</a></li> <li><a href=#examples>Examples</a></li> <li><a href=#goroutine-lifetimes>Goroutine Lifetimes</a></li> <li><a href=#handle-errors>Handle Errors</a></li> <li><a href=#imports>Imports</a></li> <li><a href=#import-blank>Import Blank</a></li> <li><a href=#import-dot>Import Dot</a></li> <li><a href=#in-band-errors>In-Band Errors</a></li> <li><a href=#indent-error-flow>Indent Error Flow</a></li> <li><a href=#initialisms>Initialisms</a></li> <li><a href=#interfaces>Interfaces</a></li> <li><a href=#line-length>Line Length</a></li> <li><a href=#mixed-caps>Mixed Caps</a></li> <li><a href=#named-result-parameters>Named Result Parameters</a></li> <li><a href=#naked-returns>Naked Returns</a></li> <li><a href=#package-comments>Package Comments</a></li> <li><a href=#package-names>Package Names</a></li> <li><a href=#pass-values>Pass Values</a></li> <li><a href=#receiver-names>Receiver Names</a></li> <li><a href=#receiver-type>Receiver Type</a></li> <li><a href=#synchronous-functions>Synchronous Functions</a></li> <li><a href=#useful-test-failures>Useful Test Failures</a></li> <li><a href=#variable-names>Variable Names</a></li> </ul> <h2 id=gofmt>Gofmt<a class=headerlink href=#gofmt title="Permanent link"></a></h2> <p>Run <a href=https://pkg.go.dev/cmd/gofmt/ >gofmt</a> on your code to automatically fix the majority of mechanical style issues. Almost all Go code in the wild uses <code>gofmt</code>. The rest of this document addresses non-mechanical style points.</p> <p>An alternative is to use <a href=https://pkg.go.dev/golang.org/x/tools/cmd/goimports>goimports</a>, a superset of <code>gofmt</code> which additionally adds (and removes) import lines as necessary.</p> <h2 id=comment-sentences>Comment Sentences<a class=headerlink href=#comment-sentences title="Permanent link"></a></h2> <p>See <a href=https://go.dev/doc/effective_go#commentary>https://go.dev/doc/effective_go#commentary</a>. Comments documenting declarations should be full sentences, even if that seems a little redundant. This approach makes them format well when extracted into godoc documentation. Comments should begin with the name of the thing being described and end in a period:</p> <div class=highlight><pre><span></span><code><span class=c1>// Request represents a request to run a command.</span>
<span class=kd>type</span><span class=w> </span><span class=nx>Request</span><span class=w> </span><span class=kd>struct</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=o>...</span>

<span class=c1>// Encode writes the JSON encoding of req to w.</span>
<span class=kd>func</span><span class=w> </span><span class=nx>Encode</span><span class=p>(</span><span class=nx>w</span><span class=w> </span><span class=nx>io</span><span class=p>.</span><span class=nx>Writer</span><span class=p>,</span><span class=w> </span><span class=nx>req</span><span class=w> </span><span class=o>*</span><span class=nx>Request</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=o>...</span>
</code></pre></div> <p>and so on.</p> <h2 id=contexts>Contexts<a class=headerlink href=#contexts title="Permanent link"></a></h2> <p>Values of the context.Context type carry security credentials, tracing information, deadlines, and cancellation signals across API and process boundaries. Go programs pass Contexts explicitly along the entire function call chain from incoming RPCs and HTTP requests to outgoing requests.</p> <p>Most functions that use a Context should accept it as their first parameter:</p> <div class=highlight><pre><span></span><code>func F(ctx context.Context, /* other arguments */) {}
</code></pre></div> <p>A function that is never request-specific may use context.Background(), but err on the side of passing a Context even if you think you don't need to. The default case is to pass a Context; only use context.Background() directly if you have a good reason why the alternative is a mistake.</p> <p>Don't add a Context member to a struct type; instead add a ctx parameter to each method on that type that needs to pass it along. The one exception is for methods whose signature must match an interface in the standard library or in a third party library.</p> <p>Don't create custom Context types or use interfaces other than Context in function signatures.</p> <p>If you have application data to pass around, put it in a parameter, in the receiver, in globals, or, if it truly belongs there, in a Context value.</p> <p>Contexts are immutable, so it's fine to pass the same ctx to multiple calls that share the same deadline, cancellation signal, credentials, parent trace, etc.</p> <h2 id=copying>Copying<a class=headerlink href=#copying title="Permanent link"></a></h2> <p>To avoid unexpected aliasing, be careful when copying a struct from another package. For example, the bytes.Buffer type contains a <code>[]byte</code> slice. If you copy a <code>Buffer</code>, the slice in the copy may alias the array in the original, causing subsequent method calls to have surprising effects.</p> <p>In general, do not copy a value of type <code>T</code> if its methods are associated with the pointer type, <code>*T</code>.</p> <h2 id=crypto-rand>Crypto Rand<a class=headerlink href=#crypto-rand title="Permanent link"></a></h2> <p>Do not use package <a href=https://pkg.go.dev/math/rand><code>math/rand</code></a> or <a href=https://pkg.go.dev/math/rand/v2><code>math/rand/v2</code></a> to generate keys, even throwaway ones. Seeded with <a href=https://pkg.go.dev/time#Time.Nanosecond><code>Time.Nanoseconds()</code></a>, there are just a few bits of entropy. Instead, use <a href=https://pkg.go.dev/crypto/rand#pkg-variables><code>crypto/rand.Reader</code></a>. If you need text, use <a href=https://pkg.go.dev/crypto/rand#Text><code>crypto/rand.Text</code></a>, or alternatively, encode random bytes with <a href=https://pkg.go.dev/encoding/hex><code>encoding/hex</code></a> or <a href=https://pkg.go.dev/encoding/base64><code>encoding/base64</code></a>.</p> <div class=highlight><pre><span></span><code><span class=kn>import</span><span class=w> </span><span class=p>(</span>
<span class=w>	</span><span class=s>&quot;crypto/rand&quot;</span>
<span class=w>	</span><span class=s>&quot;fmt&quot;</span>
<span class=p>)</span>

<span class=kd>func</span><span class=w> </span><span class=nx>Key</span><span class=p>()</span><span class=w> </span><span class=kt>string</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=k>return</span><span class=w> </span><span class=nx>rand</span><span class=p>.</span><span class=nx>Text</span><span class=p>()</span>
<span class=p>}</span>
</code></pre></div> <h2 id=declaring-empty-slices>Declaring Empty Slices<a class=headerlink href=#declaring-empty-slices title="Permanent link"></a></h2> <p>When declaring an empty slice, prefer</p> <div class=highlight><pre><span></span><code><span class=kd>var</span><span class=w> </span><span class=nx>t</span><span class=w> </span><span class=p>[]</span><span class=kt>string</span>
</code></pre></div> <p>over</p> <div class=highlight><pre><span></span><code><span class=nx>t</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=p>[]</span><span class=kt>string</span><span class=p>{}</span>
</code></pre></div> <p>The former declares a nil slice value, while the latter is non-nil but zero-length. They are functionally equivalent—their <code>len</code> and <code>cap</code> are both zero—but the nil slice is the preferred style.</p> <p>Note that there are limited circumstances where a non-nil but zero-length slice is preferred, such as when encoding JSON objects (a <code>nil</code> slice encodes to <code>null</code>, while <code>[]string{}</code> encodes to the JSON array <code>[]</code>).</p> <p>When designing interfaces, avoid making a distinction between a nil slice and a non-nil, zero-length slice, as this can lead to subtle programming errors.</p> <p>For more discussion about nil in Go see Francesc Campoy's talk <a href="https://www.youtube.com/watch?v=ynoY2xz-F8s">Understanding Nil</a>.</p> <h2 id=doc-comments>Doc Comments<a class=headerlink href=#doc-comments title="Permanent link"></a></h2> <p>All top-level, exported names should have doc comments, as should non-trivial unexported type or function declarations. See <a href=https://go.dev/doc/effective_go#commentary>https://go.dev/doc/effective_go#commentary</a> for more information about commentary conventions.</p> <h2 id=dont-panic>Don't Panic<a class=headerlink href=#dont-panic title="Permanent link"></a></h2> <p>See <a href=https://go.dev/doc/effective_go#errors>https://go.dev/doc/effective_go#errors</a>. Don't use panic for normal error handling. Use error and multiple return values.</p> <h2 id=error-strings>Error Strings<a class=headerlink href=#error-strings title="Permanent link"></a></h2> <p>Error strings should not be capitalized (unless beginning with proper nouns or acronyms) or end with punctuation, since they are usually printed following other context. That is, use <code>fmt.Errorf("something bad")</code> not <code>fmt.Errorf("Something bad")</code>, so that <code>log.Printf("Reading %s: %v", filename, err)</code> formats without a spurious capital letter mid-message. This does not apply to logging, which is implicitly line-oriented and not combined inside other messages.</p> <h2 id=examples>Examples<a class=headerlink href=#examples title="Permanent link"></a></h2> <p>When adding a new package, include examples of intended usage: a runnable Example, or a simple test demonstrating a complete call sequence.</p> <p>Read more about <a href=https://go.dev/blog/examples>testable Example() functions</a>.</p> <h2 id=goroutine-lifetimes>Goroutine Lifetimes<a class=headerlink href=#goroutine-lifetimes title="Permanent link"></a></h2> <p>When you spawn goroutines, make it clear when - or whether - they exit.</p> <p>Goroutines can leak by blocking on channel sends or receives: the garbage collector will not terminate a goroutine even if the channels it is blocked on are unreachable.</p> <p>Even when goroutines do not leak, leaving them in-flight when they are no longer needed can cause other subtle and hard-to-diagnose problems. Sends on closed channels panic. Modifying still-in-use inputs "after the result isn't needed" can still lead to data races. And leaving goroutines in-flight for arbitrarily long can lead to unpredictable memory usage.</p> <p>Try to keep concurrent code simple enough that goroutine lifetimes are obvious. If that just isn't feasible, document when and why the goroutines exit.</p> <h2 id=handle-errors>Handle Errors<a class=headerlink href=#handle-errors title="Permanent link"></a></h2> <p>See <a href=https://go.dev/doc/effective_go#errors>https://go.dev/doc/effective_go#errors</a>. Do not discard errors using <code>_</code> variables. If a function returns an error, check it to make sure the function succeeded. Handle the error, return it, or, in truly exceptional situations, panic.</p> <h2 id=imports>Imports<a class=headerlink href=#imports title="Permanent link"></a></h2> <p>Avoid renaming imports except to avoid a name collision; good package names should not require renaming. In the event of collision, prefer to rename the most local or project-specific import.</p> <p>Imports are organized in groups, with blank lines between them. The standard library packages are always in the first group.</p> <div class=highlight><pre><span></span><code><span class=kn>package</span><span class=w> </span><span class=nx>main</span>

<span class=kn>import</span><span class=w> </span><span class=p>(</span>
<span class=w>	</span><span class=s>&quot;fmt&quot;</span>
<span class=w>	</span><span class=s>&quot;hash/adler32&quot;</span>
<span class=w>	</span><span class=s>&quot;os&quot;</span>

<span class=w>	</span><span class=s>&quot;github.com/foo/bar&quot;</span>
<span class=w>	</span><span class=s>&quot;rsc.io/goversion/version&quot;</span>
<span class=p>)</span>
</code></pre></div> <p><a href=https://pkg.go.dev/golang.org/x/tools/cmd/goimports>goimports</a> will do this for you.</p> <h2 id=import-blank>Import Blank<a class=headerlink href=#import-blank title="Permanent link"></a></h2> <p>Packages that are imported only for their side effects (using the syntax <code>import _ "pkg"</code>) should only be imported in the main package of a program, or in tests that require them.</p> <h2 id=import-dot>Import Dot<a class=headerlink href=#import-dot title="Permanent link"></a></h2> <p>The import . form can be useful in tests that, due to circular dependencies, cannot be made part of the package being tested:</p> <div class=highlight><pre><span></span><code><span class=kn>package</span><span class=w> </span><span class=nx>foo_test</span>

<span class=kn>import</span><span class=w> </span><span class=p>(</span>
<span class=w>	</span><span class=s>&quot;bar/testutil&quot;</span><span class=w> </span><span class=c1>// also imports &quot;foo&quot;</span>
<span class=w>	</span><span class=p>.</span><span class=w> </span><span class=s>&quot;foo&quot;</span>
<span class=p>)</span>
</code></pre></div> <p>In this case, the test file cannot be in package foo because it uses bar/testutil, which imports foo. So we use the 'import .' form to let the file pretend to be part of package foo even though it is not. Except for this one case, do not use import . in your programs. It makes the programs much harder to read because it is unclear whether a name like Quux is a top-level identifier in the current package or in an imported package.</p> <h2 id=in-band-errors>In-Band Errors<a class=headerlink href=#in-band-errors title="Permanent link"></a></h2> <p>In C and similar languages, it's common for functions to return values like -1 or null to signal errors or missing results:</p> <div class=highlight><pre><span></span><code><span class=c1>// Lookup returns the value for key or &quot;&quot; if there is no mapping for key.</span>
<span class=kd>func</span><span class=w> </span><span class=nx>Lookup</span><span class=p>(</span><span class=nx>key</span><span class=w> </span><span class=kt>string</span><span class=p>)</span><span class=w> </span><span class=kt>string</span>

<span class=c1>// Failing to check for an in-band error value can lead to bugs:</span>
<span class=nx>Parse</span><span class=p>(</span><span class=nx>Lookup</span><span class=p>(</span><span class=nx>key</span><span class=p>))</span><span class=w>  </span><span class=c1>// returns &quot;parse failure for value&quot; instead of &quot;no value for key&quot;</span>
</code></pre></div> <p>Go's support for multiple return values provides a better solution. Instead of requiring clients to check for an in-band error value, a function should return an additional value to indicate whether its other return values are valid. This return value may be an error, or a boolean when no explanation is needed. It should be the final return value.</p> <div class=highlight><pre><span></span><code><span class=c1>// Lookup returns the value for key or ok=false if there is no mapping for key.</span>
<span class=kd>func</span><span class=w> </span><span class=nx>Lookup</span><span class=p>(</span><span class=nx>key</span><span class=w> </span><span class=kt>string</span><span class=p>)</span><span class=w> </span><span class=p>(</span><span class=nx>value</span><span class=w> </span><span class=kt>string</span><span class=p>,</span><span class=w> </span><span class=nx>ok</span><span class=w> </span><span class=kt>bool</span><span class=p>)</span>
</code></pre></div> <p>This prevents the caller from using the result incorrectly:</p> <div class=highlight><pre><span></span><code><span class=nx>Parse</span><span class=p>(</span><span class=nx>Lookup</span><span class=p>(</span><span class=nx>key</span><span class=p>))</span><span class=w>  </span><span class=c1>// compile-time error</span>
</code></pre></div> <p>And encourages more robust and readable code:</p> <div class=highlight><pre><span></span><code><span class=nx>value</span><span class=p>,</span><span class=w> </span><span class=nx>ok</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=nx>Lookup</span><span class=p>(</span><span class=nx>key</span><span class=p>)</span>
<span class=k>if</span><span class=w> </span><span class=p>!</span><span class=nx>ok</span><span class=w> </span><span class=p>{</span>
<span class=w>	</span><span class=k>return</span><span class=w> </span><span class=nx>fmt</span><span class=p>.</span><span class=nx>Errorf</span><span class=p>(</span><span class=s>&quot;no value for %q&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>key</span><span class=p>)</span>
<span class=p>}</span>
<span class=k>return</span><span class=w> </span><span class=nx>Parse</span><span class=p>(</span><span class=nx>value</span><span class=p>)</span>
</code></pre></div> <p>This rule applies to exported functions but is also useful for unexported functions.</p> <p>Return values like nil, "", 0, and -1 are fine when they are valid results for a function, that is, when the caller need not handle them differently from other values.</p> <p>Some standard library functions, like those in package "strings", return in-band error values. This greatly simplifies string-manipulation code at the cost of requiring more diligence from the programmer. In general, Go code should return additional values for errors.</p> <h2 id=indent-error-flow>Indent Error Flow<a class=headerlink href=#indent-error-flow title="Permanent link"></a></h2> <p>Try to keep the normal code path at a minimal indentation, and indent the error handling, dealing with it first. This improves the readability of the code by permitting visually scanning the normal path quickly. For instance, don't write:</p> <div class=highlight><pre><span></span><code><span class=k>if</span><span class=w> </span><span class=nx>err</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=kc>nil</span><span class=w> </span><span class=p>{</span>
<span class=w>	</span><span class=c1>// error handling</span>
<span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<span class=w>	</span><span class=c1>// normal code</span>
<span class=p>}</span>
</code></pre></div> <p>Instead, write:</p> <div class=highlight><pre><span></span><code><span class=k>if</span><span class=w> </span><span class=nx>err</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=kc>nil</span><span class=w> </span><span class=p>{</span>
<span class=w>	</span><span class=c1>// error handling</span>
<span class=w>	</span><span class=k>return</span><span class=w> </span><span class=c1>// or continue, etc.</span>
<span class=p>}</span>
<span class=c1>// normal code</span>
</code></pre></div> <p>If the <code>if</code> statement has an initialization statement, such as:</p> <div class=highlight><pre><span></span><code><span class=k>if</span><span class=w> </span><span class=nx>x</span><span class=p>,</span><span class=w> </span><span class=nx>err</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=nx>f</span><span class=p>();</span><span class=w> </span><span class=nx>err</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=kc>nil</span><span class=w> </span><span class=p>{</span>
<span class=w>	</span><span class=c1>// error handling</span>
<span class=w>	</span><span class=k>return</span>
<span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<span class=w>	</span><span class=c1>// use x</span>
<span class=p>}</span>
</code></pre></div> <p>then this may require moving the short variable declaration to its own line:</p> <div class=highlight><pre><span></span><code><span class=nx>x</span><span class=p>,</span><span class=w> </span><span class=nx>err</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=nx>f</span><span class=p>()</span>
<span class=k>if</span><span class=w> </span><span class=nx>err</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=kc>nil</span><span class=w> </span><span class=p>{</span>
<span class=w>	</span><span class=c1>// error handling</span>
<span class=w>	</span><span class=k>return</span>
<span class=p>}</span>
<span class=c1>// use x</span>
</code></pre></div> <h2 id=initialisms>Initialisms<a class=headerlink href=#initialisms title="Permanent link"></a></h2> <p>Words in names that are initialisms or acronyms (e.g. "URL" or "NATO") have a consistent case. For example, "URL" should appear as "URL" or "url" (as in "urlPony", or "URLPony"), never as "Url". As an example: ServeHTTP not ServeHttp. For identifiers with multiple initialized "words", use for example "xmlHTTPRequest" or "XMLHTTPRequest".</p> <p>This rule also applies to "ID" when it is short for "identifier" (which is pretty much all cases when it's not the "id" as in "ego", "superego"), so write "appID" instead of "appId".</p> <p>Code generated by the protocol buffer compiler is exempt from this rule. Human-written code is held to a higher standard than machine-written code.</p> <h2 id=interfaces>Interfaces<a class=headerlink href=#interfaces title="Permanent link"></a></h2> <p>Go interfaces generally belong in the package that uses values of the interface type, not the package that implements those values. The implementing package should return concrete (usually pointer or struct) types: that way, new methods can be added to implementations without requiring extensive refactoring.</p> <p>Do not define interfaces on the implementor side of an API "for mocking"; instead, design the API so that it can be tested using the public API of the real implementation.</p> <p>Do not define interfaces before they are used: without a realistic example of usage, it is too difficult to see whether an interface is even necessary, let alone what methods it ought to contain.</p> <div class=highlight><pre><span></span><code><span class=kn>package</span><span class=w> </span><span class=nx>consumer</span><span class=w>  </span><span class=c1>// consumer.go</span>

<span class=kd>type</span><span class=w> </span><span class=nx>Thinger</span><span class=w> </span><span class=kd>interface</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>Thing</span><span class=p>()</span><span class=w> </span><span class=kt>bool</span><span class=w> </span><span class=p>}</span>

<span class=kd>func</span><span class=w> </span><span class=nx>Foo</span><span class=p>(</span><span class=nx>t</span><span class=w> </span><span class=nx>Thinger</span><span class=p>)</span><span class=w> </span><span class=kt>string</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=err>…</span><span class=w> </span><span class=p>}</span>
</code></pre></div> <div class=highlight><pre><span></span><code><span class=kn>package</span><span class=w> </span><span class=nx>consumer</span><span class=w> </span><span class=c1>// consumer_test.go</span>

<span class=kd>type</span><span class=w> </span><span class=nx>fakeThinger</span><span class=w> </span><span class=kd>struct</span><span class=p>{</span><span class=w> </span><span class=err>…</span><span class=w> </span><span class=p>}</span>
<span class=kd>func</span><span class=w> </span><span class=p>(</span><span class=nx>t</span><span class=w> </span><span class=nx>fakeThinger</span><span class=p>)</span><span class=w> </span><span class=nx>Thing</span><span class=p>()</span><span class=w> </span><span class=kt>bool</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=err>…</span><span class=w> </span><span class=p>}</span>
<span class=err>…</span>
<span class=k>if</span><span class=w> </span><span class=nx>Foo</span><span class=p>(</span><span class=nx>fakeThinger</span><span class=p>{</span><span class=err>…</span><span class=p>})</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=s>&quot;x&quot;</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=err>…</span><span class=w> </span><span class=p>}</span>
</code></pre></div> <div class=highlight><pre><span></span><code><span class=c1>// DO NOT DO IT!!!</span>
<span class=kn>package</span><span class=w> </span><span class=nx>producer</span>

<span class=kd>type</span><span class=w> </span><span class=nx>Thinger</span><span class=w> </span><span class=kd>interface</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>Thing</span><span class=p>()</span><span class=w> </span><span class=kt>bool</span><span class=w> </span><span class=p>}</span>

<span class=kd>type</span><span class=w> </span><span class=nx>defaultThinger</span><span class=w> </span><span class=kd>struct</span><span class=p>{</span><span class=w> </span><span class=err>…</span><span class=w> </span><span class=p>}</span>
<span class=kd>func</span><span class=w> </span><span class=p>(</span><span class=nx>t</span><span class=w> </span><span class=nx>defaultThinger</span><span class=p>)</span><span class=w> </span><span class=nx>Thing</span><span class=p>()</span><span class=w> </span><span class=kt>bool</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=err>…</span><span class=w> </span><span class=p>}</span>

<span class=kd>func</span><span class=w> </span><span class=nx>NewThinger</span><span class=p>()</span><span class=w> </span><span class=nx>Thinger</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=k>return</span><span class=w> </span><span class=nx>defaultThinger</span><span class=p>{</span><span class=w> </span><span class=err>…</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=p>}</span>
</code></pre></div> <p>Instead return a concrete type and let the consumer mock the producer implementation. <div class=highlight><pre><span></span><code><span class=kn>package</span><span class=w> </span><span class=nx>producer</span>

<span class=kd>type</span><span class=w> </span><span class=nx>Thinger</span><span class=w> </span><span class=kd>struct</span><span class=p>{</span><span class=w> </span><span class=err>…</span><span class=w> </span><span class=p>}</span>
<span class=kd>func</span><span class=w> </span><span class=p>(</span><span class=nx>t</span><span class=w> </span><span class=nx>Thinger</span><span class=p>)</span><span class=w> </span><span class=nx>Thing</span><span class=p>()</span><span class=w> </span><span class=kt>bool</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=err>…</span><span class=w> </span><span class=p>}</span>

<span class=kd>func</span><span class=w> </span><span class=nx>NewThinger</span><span class=p>()</span><span class=w> </span><span class=nx>Thinger</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=k>return</span><span class=w> </span><span class=nx>Thinger</span><span class=p>{</span><span class=w> </span><span class=err>…</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=p>}</span>
</code></pre></div></p> <h2 id=line-length>Line Length<a class=headerlink href=#line-length title="Permanent link"></a></h2> <p>There is no rigid line length limit in Go code, but avoid uncomfortably long lines. Similarly, don't add line breaks to keep lines short when they are more readable long&ndash;for example, if they are repetitive.</p> <p>Most of the time when people wrap lines "unnaturally" (in the middle of function calls or function declarations, more or less, say, though some exceptions are around), the wrapping would be unnecessary if they had a reasonable number of parameters and reasonably short variable names. Long lines seem to go with long names, and getting rid of the long names helps a lot.</p> <p>In other words, break lines because of the semantics of what you're writing (as a general rule) and not because of the length of the line. If you find that this produces lines that are too long, then change the names or the semantics and you'll probably get a good result.</p> <p>This is, actually, exactly the same advice about how long a function should be. There's no rule "never have a function more than N lines long", but there is definitely such a thing as too long of a function, and of too repetitive tiny functions, and the solution is to change where the function boundaries are, not to start counting lines.</p> <h2 id=mixed-caps>Mixed Caps<a class=headerlink href=#mixed-caps title="Permanent link"></a></h2> <p>See <a href=https://go.dev/doc/effective_go#mixed-caps>https://go.dev/doc/effective_go#mixed-caps</a>. This applies even when it breaks conventions in other languages. For example an unexported constant is <code>maxLength</code> not <code>MaxLength</code> or <code>MAX_LENGTH</code>.</p> <p>Also see <a href=/wiki/CodeReviewComments#initialisms>Initialisms</a>.</p> <h2 id=named-result-parameters>Named Result Parameters<a class=headerlink href=#named-result-parameters title="Permanent link"></a></h2> <p>Consider what it will look like in godoc. Named result parameters like:</p> <div class=highlight><pre><span></span><code><span class=kd>func</span><span class=w> </span><span class=p>(</span><span class=nx>n</span><span class=w> </span><span class=o>*</span><span class=nx>Node</span><span class=p>)</span><span class=w> </span><span class=nx>Parent1</span><span class=p>()</span><span class=w> </span><span class=p>(</span><span class=nx>node</span><span class=w> </span><span class=o>*</span><span class=nx>Node</span><span class=p>)</span><span class=w> </span><span class=p>{}</span>
<span class=kd>func</span><span class=w> </span><span class=p>(</span><span class=nx>n</span><span class=w> </span><span class=o>*</span><span class=nx>Node</span><span class=p>)</span><span class=w> </span><span class=nx>Parent2</span><span class=p>()</span><span class=w> </span><span class=p>(</span><span class=nx>node</span><span class=w> </span><span class=o>*</span><span class=nx>Node</span><span class=p>,</span><span class=w> </span><span class=nx>err</span><span class=w> </span><span class=kt>error</span><span class=p>)</span><span class=w> </span><span class=p>{}</span>
</code></pre></div> <p>will be repetitive in godoc; better to use:</p> <div class=highlight><pre><span></span><code><span class=kd>func</span><span class=w> </span><span class=p>(</span><span class=nx>n</span><span class=w> </span><span class=o>*</span><span class=nx>Node</span><span class=p>)</span><span class=w> </span><span class=nx>Parent1</span><span class=p>()</span><span class=w> </span><span class=o>*</span><span class=nx>Node</span><span class=w> </span><span class=p>{}</span>
<span class=kd>func</span><span class=w> </span><span class=p>(</span><span class=nx>n</span><span class=w> </span><span class=o>*</span><span class=nx>Node</span><span class=p>)</span><span class=w> </span><span class=nx>Parent2</span><span class=p>()</span><span class=w> </span><span class=p>(</span><span class=o>*</span><span class=nx>Node</span><span class=p>,</span><span class=w> </span><span class=kt>error</span><span class=p>)</span><span class=w> </span><span class=p>{}</span>
</code></pre></div> <p>On the other hand, if a function returns two or three parameters of the same type, or if the meaning of a result isn't clear from context, adding names may be useful in some contexts. Don't name result parameters just to avoid declaring a var inside the function; that trades off a minor implementation brevity at the cost of unnecessary API verbosity.</p> <div class=highlight><pre><span></span><code><span class=kd>func</span><span class=w> </span><span class=p>(</span><span class=nx>f</span><span class=w> </span><span class=o>*</span><span class=nx>Foo</span><span class=p>)</span><span class=w> </span><span class=nx>Location</span><span class=p>()</span><span class=w> </span><span class=p>(</span><span class=kt>float64</span><span class=p>,</span><span class=w> </span><span class=kt>float64</span><span class=p>,</span><span class=w> </span><span class=kt>error</span><span class=p>)</span>
</code></pre></div> <p>is less clear than:</p> <div class=highlight><pre><span></span><code><span class=c1>// Location returns f&#39;s latitude and longitude.</span>
<span class=c1>// Negative values mean south and west, respectively.</span>
<span class=kd>func</span><span class=w> </span><span class=p>(</span><span class=nx>f</span><span class=w> </span><span class=o>*</span><span class=nx>Foo</span><span class=p>)</span><span class=w> </span><span class=nx>Location</span><span class=p>()</span><span class=w> </span><span class=p>(</span><span class=nx>lat</span><span class=p>,</span><span class=w> </span><span class=nx>long</span><span class=w> </span><span class=kt>float64</span><span class=p>,</span><span class=w> </span><span class=nx>err</span><span class=w> </span><span class=kt>error</span><span class=p>)</span>
</code></pre></div> <p>Naked returns are okay if the function is a handful of lines. Once it's a medium sized function, be explicit with your return values. Corollary: it's not worth it to name result parameters just because it enables you to use naked returns. Clarity of docs is always more important than saving a line or two in your function.</p> <p>Finally, in some cases you need to name a result parameter in order to change it in a deferred closure. That is always OK.</p> <h2 id=naked-returns>Naked Returns<a class=headerlink href=#naked-returns title="Permanent link"></a></h2> <p>A <code>return</code> statement without arguments returns the named return values. This is known as a "naked" return.</p> <div class=highlight><pre><span></span><code><span class=kd>func</span><span class=w> </span><span class=nx>split</span><span class=p>(</span><span class=nx>sum</span><span class=w> </span><span class=kt>int</span><span class=p>)</span><span class=w> </span><span class=p>(</span><span class=nx>x</span><span class=p>,</span><span class=w> </span><span class=nx>y</span><span class=w> </span><span class=kt>int</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>	</span><span class=nx>x</span><span class=w> </span><span class=p>=</span><span class=w> </span><span class=nx>sum</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=mi>4</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=mi>9</span>
<span class=w>	</span><span class=nx>y</span><span class=w> </span><span class=p>=</span><span class=w> </span><span class=nx>sum</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=nx>x</span>
<span class=w>	</span><span class=k>return</span>
<span class=p>}</span>
</code></pre></div> <p>See <a href=#named-result-parameters>Named Result Parameters</a>.</p> <h2 id=package-comments>Package Comments<a class=headerlink href=#package-comments title="Permanent link"></a></h2> <p>Package comments, like all comments to be presented by godoc, must appear adjacent to the package clause, with no blank line.</p> <div class=highlight><pre><span></span><code><span class=c1>// Package math provides basic constants and mathematical functions.</span>
<span class=kn>package</span><span class=w> </span><span class=nx>math</span>
</code></pre></div> <div class=highlight><pre><span></span><code><span class=cm>/*</span>
<span class=cm>Package template implements data-driven templates for generating textual</span>
<span class=cm>output such as HTML.</span>
<span class=cm>....</span>
<span class=cm>*/</span>
<span class=kn>package</span><span class=w> </span><span class=nx>template</span>
</code></pre></div> <p>For "package main" comments, other styles of comment are fine after the binary name (and it may be capitalized if it comes first), For example, for a <code>package main</code> in the directory <code>seedgen</code> you could write:</p> <p><div class=highlight><pre><span></span><code><span class=c1>// Binary seedgen ...</span>
<span class=kn>package</span><span class=w> </span><span class=nx>main</span>
</code></pre></div> or <div class=highlight><pre><span></span><code><span class=c1>// Command seedgen ...</span>
<span class=kn>package</span><span class=w> </span><span class=nx>main</span>
</code></pre></div> or <div class=highlight><pre><span></span><code><span class=c1>// Program seedgen ...</span>
<span class=kn>package</span><span class=w> </span><span class=nx>main</span>
</code></pre></div> or <div class=highlight><pre><span></span><code><span class=c1>// The seedgen command ...</span>
<span class=kn>package</span><span class=w> </span><span class=nx>main</span>
</code></pre></div> or <div class=highlight><pre><span></span><code><span class=c1>// The seedgen program ...</span>
<span class=kn>package</span><span class=w> </span><span class=nx>main</span>
</code></pre></div> or <div class=highlight><pre><span></span><code><span class=c1>// Seedgen ..</span>
<span class=kn>package</span><span class=w> </span><span class=nx>main</span>
</code></pre></div></p> <p>These are examples, and sensible variants of these are acceptable.</p> <p>Note that starting the sentence with a lower-case word is not among the acceptable options for package comments, as these are publicly-visible and should be written in proper English, including capitalizing the first word of the sentence. When the binary name is the first word, capitalizing it is required even though it does not strictly match the spelling of the command-line invocation.</p> <p>See <a href=https://go.dev/doc/effective_go#commentary>https://go.dev/doc/effective_go#commentary</a> for more information about commentary conventions.</p> <h2 id=package-names>Package Names<a class=headerlink href=#package-names title="Permanent link"></a></h2> <p>All references to names in your package will be done using the package name, so you can omit that name from the identifiers. For example, if you are in package chubby, you don't need type ChubbyFile, which clients will write as <code>chubby.ChubbyFile</code>. Instead, name the type <code>File</code>, which clients will write as <code>chubby.File</code>. Avoid meaningless package names like util, common, misc, api, types, and interfaces. See <a href=https://go.dev/doc/effective_go#package-names>https://go.dev/doc/effective_go#package-names</a> and <a href=https://go.dev/blog/package-names>https://go.dev/blog/package-names</a> for more.</p> <h2 id=pass-values>Pass Values<a class=headerlink href=#pass-values title="Permanent link"></a></h2> <p>Don't pass pointers as function arguments just to save a few bytes. If a function refers to its argument <code>x</code> only as <code>*x</code> throughout, then the argument shouldn't be a pointer. Common instances of this include passing a pointer to a string (<code>*string</code>) or a pointer to an interface value (<code>*io.Reader</code>). In both cases the value itself is a fixed size and can be passed directly. This advice does not apply to large structs, or even small structs that might grow.</p> <h2 id=receiver-names>Receiver Names<a class=headerlink href=#receiver-names title="Permanent link"></a></h2> <p>The name of a method's receiver should be a reflection of its identity; often a one or two letter abbreviation of its type suffices (such as "c" or "cl" for "Client"). Don't use generic names such as "me", "this" or "self", identifiers typical of object-oriented languages that gives the method a special meaning. In Go, the receiver of a method is just another parameter and therefore, should be named accordingly. The name need not be as descriptive as that of a method argument, as its role is obvious and serves no documentary purpose. It can be very short as it will appear on almost every line of every method of the type; familiarity admits brevity. Be consistent, too: if you call the receiver "c" in one method, don't call it "cl" in another.</p> <h2 id=receiver-type>Receiver Type<a class=headerlink href=#receiver-type title="Permanent link"></a></h2> <p>Choosing whether to use a value or pointer receiver on methods can be difficult, especially to new Go programmers. If in doubt, use a pointer, but there are times when a value receiver makes sense, usually for reasons of efficiency, such as for small unchanging structs or values of basic type. Some useful guidelines:</p> <ul> <li>If the receiver is a map, func or chan, don't use a pointer to them. If the receiver is a slice and the method doesn't reslice or reallocate the slice, don't use a pointer to it.</li> <li>If the method needs to mutate the receiver, the receiver must be a pointer.</li> <li>If the receiver is a struct that contains a sync.Mutex or similar synchronizing field, the receiver must be a pointer to avoid copying.</li> <li>If the receiver is a large struct or array, a pointer receiver is more efficient. How large is large? Assume it's equivalent to passing all its elements as arguments to the method. If that feels too large, it's also too large for the receiver.</li> <li>Can function or methods, either concurrently or when called from this method, be mutating the receiver? A value type creates a copy of the receiver when the method is invoked, so outside updates will not be applied to this receiver. If changes must be visible in the original receiver, the receiver must be a pointer.</li> <li>If the receiver is a struct, array or slice and any of its elements is a pointer to something that might be mutating, prefer a pointer receiver, as it will make the intention clearer to the reader.</li> <li>If the receiver is a small array or struct that is naturally a value type (for instance, something like the time.Time type), with no mutable fields and no pointers, or is just a simple basic type such as int or string, a value receiver makes sense. A value receiver can reduce the amount of garbage that can be generated; if a value is passed to a value method, an on-stack copy can be used instead of allocating on the heap. (The compiler tries to be smart about avoiding this allocation, but it can't always succeed.) Don't choose a value receiver type for this reason without profiling first.</li> <li>Don't mix receiver types. Choose either pointers or struct types for all available methods.</li> <li>Finally, when in doubt, use a pointer receiver.</li> </ul> <h2 id=synchronous-functions>Synchronous Functions<a class=headerlink href=#synchronous-functions title="Permanent link"></a></h2> <p>Prefer synchronous functions - functions which return their results directly or finish any callbacks or channel ops before returning - over asynchronous ones.</p> <p>Synchronous functions keep goroutines localized within a call, making it easier to reason about their lifetimes and avoid leaks and data races. They're also easier to test: the caller can pass an input and check the output without the need for polling or synchronization.</p> <p>If callers need more concurrency, they can add it easily by calling the function from a separate goroutine. But it is quite difficult - sometimes impossible - to remove unnecessary concurrency at the caller side.</p> <h2 id=useful-test-failures>Useful Test Failures<a class=headerlink href=#useful-test-failures title="Permanent link"></a></h2> <p>Tests should fail with helpful messages saying what was wrong, with what inputs, what was actually got, and what was expected. It may be tempting to write a bunch of assertFoo helpers, but be sure your helpers produce useful error messages. Assume that the person debugging your failing test is not you, and is not your team. A typical Go test fails like:</p> <div class=highlight><pre><span></span><code><span class=k>if</span><span class=w> </span><span class=nx>got</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=nx>tt</span><span class=p>.</span><span class=nx>want</span><span class=w> </span><span class=p>{</span>
<span class=w>	</span><span class=nx>t</span><span class=p>.</span><span class=nx>Errorf</span><span class=p>(</span><span class=s>&quot;Foo(%q) = %d; want %d&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>tt</span><span class=p>.</span><span class=nx>in</span><span class=p>,</span><span class=w> </span><span class=nx>got</span><span class=p>,</span><span class=w> </span><span class=nx>tt</span><span class=p>.</span><span class=nx>want</span><span class=p>)</span><span class=w> </span><span class=c1>// or Fatalf, if test can&#39;t test anything more past this point</span>
<span class=p>}</span>
</code></pre></div> <p>Note that the order here is actual != expected, and the message uses that order too. Some test frameworks encourage writing these backwards: 0 != x, "expected 0, got x", and so on. Go does not.</p> <p>If that seems like a lot of typing, you may want to write a <a href=TableDrivenTests>table-driven test</a>.</p> <p>Another common technique to disambiguate failing tests when using a test helper with different input is to wrap each caller with a different TestFoo function, so the test fails with that name:</p> <div class=highlight><pre><span></span><code><span class=kd>func</span><span class=w> </span><span class=nx>TestSingleValue</span><span class=p>(</span><span class=nx>t</span><span class=w> </span><span class=o>*</span><span class=nx>testing</span><span class=p>.</span><span class=nx>T</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>testHelper</span><span class=p>(</span><span class=nx>t</span><span class=p>,</span><span class=w> </span><span class=p>[]</span><span class=kt>int</span><span class=p>{</span><span class=mi>80</span><span class=p>})</span><span class=w> </span><span class=p>}</span>
<span class=kd>func</span><span class=w> </span><span class=nx>TestNoValues</span><span class=p>(</span><span class=nx>t</span><span class=w> </span><span class=o>*</span><span class=nx>testing</span><span class=p>.</span><span class=nx>T</span><span class=p>)</span><span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nx>testHelper</span><span class=p>(</span><span class=nx>t</span><span class=p>,</span><span class=w> </span><span class=p>[]</span><span class=kt>int</span><span class=p>{})</span><span class=w> </span><span class=p>}</span>
</code></pre></div> <p>In any case, the onus is on you to fail with a helpful message to whoever's debugging your code in the future.</p> <h2 id=variable-names>Variable Names<a class=headerlink href=#variable-names title="Permanent link"></a></h2> <p>Variable names in Go should be short rather than long. This is especially true for local variables with limited scope. Prefer <code>c</code> to <code>lineCount</code>. Prefer <code>i</code> to <code>sliceIndex</code>.</p> <p>The basic rule: the further from its declaration that a name is used, the more descriptive the name must be. For a method receiver, one or two letters is sufficient. Common variables such as loop indices and readers can be a single letter (<code>i</code>, <code>r</code>). More unusual things and global variables need more descriptive names.</p> <p>See also the longer discussion in <a href=https://google.github.io/styleguide/go/decisions#variable-names>the Google Go Style Guide</a>.</p> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs Insiders </a> </div> <div class=md-social> <a href=https://github.com/zchee target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"annotate": null, "base": "..", "features": ["content.code.annotate", "navigation.expand", "navigation.instant", "navigation.sections", "toc.integrate", "search.suggest", "search.highlight"], "search": "../assets/javascripts/workers/search.26099bd0.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script> <script src=../assets/javascripts/bundle.9d1edc04.min.js></script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script> <script src=https://unpkg.com/mermaid></script> <script src=https://github.com/facelessuser/pymdown-extensions/raw/main/docs/theme/assets/pymdownx-extras/extra-loader-9e2c67b9.js></script> <script src=https://github.com/facelessuser/pymdown-extensions/raw/main/docs/theme/assets/pymdownx-extras/material-extra-3rdparty-804b836e.js></script> <script src=https://github.com/facelessuser/pymdown-extensions/raw/main/docs/theme/assets/pymdownx-extras/material-extra-theme-7c147bb7.js></script> </body> </html>